var CN=Object.defineProperty,TN=Object.defineProperties;var bN=Object.getOwnPropertyDescriptors;var WI=Object.getOwnPropertySymbols;var SN=Object.prototype.hasOwnProperty,AN=Object.prototype.propertyIsEnumerable;var KI=(t,e,n)=>e in t?CN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||={})SN.call(e,n)&&KI(t,n,e[n]);if(WI)for(var n of WI(e))AN.call(e,n)&&KI(t,n,e[n]);return t},ie=(t,e)=>TN(t,bN(e));var b=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(l){i(l)}},s=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((n=n.apply(t,e)).next())});var QI={apiKey:"AIzaSyAE7NUt3lSJqCI6x1a8jgvogUcHoSk92so",authDomain:"random-riot-backend.firebaseapp.com",projectId:"random-riot-backend",storageBucket:"random-riot-backend.appspot.com",messagingSenderId:"963331691549",appId:"1:963331691549:web:a42f4847577d26b75962f4",measurementId:"G-TZG4SS8VP3"};var ip;function op(){return ip}function Fn(t){let e=ip;return ip=t,e}var RN=Symbol("NotFound"),Su=class extends Error{name="\u0275NotFound";constructor(e){super(e)}};function fo(t){return t===RN||t?.name==="\u0275NotFound"}function Pu(t,e){return Object.is(t,e)}var je=null,Au=!1,sp=1,NN=null,ct=Symbol("SIGNAL");function re(t){let e=je;return je=t,e}function xu(){return je}var ni={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function po(t){if(Au)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(Lu(je),e<je.producerNode.length&&je.producerNode[e]!==t&&ga(je)){let n=je.producerNode[e];Fu(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=ga(je)?ZI(t,je,e):0),je.producerLastReadVersion[e]=t.version}function YI(){sp++}function ku(t){if(!(ga(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sp)){if(!t.producerMustRecompute(t)&&!ma(t)){Mu(t);return}t.producerRecomputeValue(t),Mu(t)}}function ap(t){if(t.liveConsumerNode===void 0)return;let e=Au;Au=!0;try{for(let n of t.liveConsumerNode)n.dirty||MN(n)}finally{Au=e}}function cp(){return je?.consumerAllowSignalWrites!==!1}function MN(t){t.dirty=!0,ap(t),t.consumerMarkedDirty?.(t)}function Mu(t){t.dirty=!1,t.lastCleanEpoch=sp}function ri(t){return t&&(t.nextProducerIndex=0),re(t)}function go(t,e){if(re(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ga(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Fu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ma(t){Lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ku(n),r!==n.version))return!0}return!1}function Ou(t){if(Lu(t),ga(t))for(let e=0;e<t.producerNode.length;e++)Fu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ZI(t,e,n){if(JI(t),t.liveConsumerNode.length===0&&XI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=ZI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Fu(t,e){if(JI(t),t.liveConsumerNode.length===1&&XI(t))for(let r=0;r<t.producerNode.length;r++)Fu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Lu(i),i.producerIndexOfThis[r]=e}}function ga(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function JI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function XI(t){return t.producerNode!==void 0}function Vu(t){NN?.(t)}function ju(t,e){let n=Object.create(PN);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ku(n),po(n),n.value===pa)throw n.error;return n.value};return r[ct]=n,Vu(n),r}var Ru=Symbol("UNSET"),Nu=Symbol("COMPUTING"),pa=Symbol("ERRORED"),PN=ie(O({},ni),{value:Ru,dirty:!0,error:null,equal:Pu,kind:"computed",producerMustRecompute(t){return t.value===Ru||t.value===Nu},producerRecomputeValue(t){if(t.value===Nu)throw new Error("");let e=t.value;t.value=Nu;let n=ri(t),r,i=!1;try{r=t.computation(),re(null),i=e!==Ru&&e!==pa&&r!==pa&&t.equal(e,r)}catch(o){r=pa,t.error=o}finally{go(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function xN(){throw new Error}var ew=xN;function tw(t){ew(t)}function up(t){ew=t}var kN=null;function lp(t,e){let n=Object.create(Uu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>nw(n);return r[ct]=n,Vu(n),[r,s=>mo(n,s),s=>dp(n,s)]}function nw(t){return po(t),t.value}function mo(t,e){cp()||tw(t),t.equal(t.value,e)||(t.value=e,ON(t))}function dp(t,e){cp()||tw(t),mo(t,e(t.value))}var Uu=ie(O({},ni),{equal:Pu,value:void 0,kind:"signal"});function ON(t){t.version++,YI(),ap(t),kN?.(t)}function Z(t){return typeof t=="function"}function yo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Bu=yo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ii(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof Bu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{rw(o)}catch(s){e=e??[],s instanceof Bu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Bu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)rw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ii(n,e)}remove(e){let{_finalizers:n}=this;n&&ii(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var hp=Me.EMPTY;function $u(t){return t instanceof Me||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function rw(t){Z(t)?t():t.unsubscribe()}var en={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vo={setTimeout(t,e,...n){let{delegate:r}=vo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Hu(t){vo.setTimeout(()=>{let{onUnhandledError:e}=en;if(e)e(t);else throw t})}function ya(){}var iw=fp("C",void 0,void 0);function ow(t){return fp("E",void 0,t)}function sw(t){return fp("N",t,void 0)}function fp(t,e,n){return{kind:t,value:e,error:n}}var oi=null;function _o(t){if(en.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}function aw(t){en.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}var si=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$u(e)&&e.add(this)):this.destination=VN}static create(e,n,r){return new Eo(e,n,r)}next(e){this.isStopped?gp(sw(e),this):this._next(e)}error(e){this.isStopped?gp(ow(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?gp(iw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FN=Function.prototype.bind;function pp(t,e){return FN.call(t,e)}var mp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zu(r)}else zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zu(n)}}},Eo=class extends si{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&en.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&pp(e.next,o),error:e.error&&pp(e.error,o),complete:e.complete&&pp(e.complete,o)}):i=e}this.destination=new mp(i)}};function zu(t){en.useDeprecatedSynchronousErrorHandling?aw(t):Hu(t)}function LN(t){throw t}function gp(t,e){let{onStoppedNotification:n}=en;n&&vo.setTimeout(()=>n(t,e))}var VN={closed:!0,next:ya,error:LN,complete:ya};var Io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function qu(...t){return yp(t)}function yp(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=UN(n)?n:new Eo(n,r,i);return _o(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=cw(r),new r((i,o)=>{let s=new Eo({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Io](){return this}pipe(...n){return yp(n)(this)}toPromise(n){return n=cw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function cw(t){var e;return(e=t??en.Promise)!==null&&e!==void 0?e:Promise}function jN(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function UN(t){return t&&t instanceof si||jN(t)&&$u(t)}function vp(t){return Z(t?.lift)}function he(t){return e=>{if(vp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new _p(t,e,n,r,i)}var _p=class extends si{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function wo(){return he((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Do=class extends ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return wo()(this)}};var uw=yo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new uw}next(n){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?hp:(this.currentObservers=null,o.push(n),new Me(()=>{this.currentObservers=null,ii(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ee;return n.source=this,n}}return t.create=(e,n)=>new Gu(e,n),t})(),Gu=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:hp}};var Ye=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ep={now(){return(Ep.delegate||Date).now()},delegate:void 0};var Wu=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var va={setInterval(t,e,...n){let{delegate:r}=va;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=va;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Co=class extends Wu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return va.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&va.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ii(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var To=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};To.now=Ep.now;var bo=class extends To{constructor(e,n=To.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ip=new bo(Co);var Ku=class extends Co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Qu=class extends bo{};var wp=new Qu(Ku);var It=new ee(t=>t.complete());function lw(t){return t&&Z(t.schedule)}function dw(t){return t[t.length-1]}function Yu(t){return Z(dw(t))?t.pop():void 0}function pr(t){return lw(dw(t))?t.pop():void 0}function Dp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function hw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(t){return this instanceof ai?(this.v=t,this):new ai(t)}function pw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(N){return new Promise(function(R,F){o.push([y,N,R,F])>1||u(y,N)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof ai?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function gw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hw=="function"?hw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Zu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ju(t){return Z(t?.then)}function Xu(t){return Z(t[Io])}function el(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function tl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nl=BN();function rl(t){return Z(t?.[nl])}function il(t){return pw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ai(n.read());if(i)return yield ai(void 0);yield yield ai(r)}}finally{n.releaseLock()}})}function ol(t){return Z(t?.getReader)}function Oe(t){if(t instanceof ee)return t;if(t!=null){if(Xu(t))return $N(t);if(Zu(t))return HN(t);if(Ju(t))return zN(t);if(el(t))return mw(t);if(rl(t))return qN(t);if(ol(t))return GN(t)}throw tl(t)}function $N(t){return new ee(e=>{let n=t[Io]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function HN(t){return new ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zN(t){return new ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Hu)})}function qN(t){return new ee(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function mw(t){return new ee(e=>{WN(t,e).catch(n=>e.error(n))})}function GN(t){return mw(il(t))}function WN(t,e){var n,r,i,o;return fw(this,void 0,void 0,function*(){try{for(n=gw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function wt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function gr(t,e=0){return he((n,r)=>{n.subscribe(le(r,i=>wt(r,t,()=>r.next(i),e),()=>wt(r,t,()=>r.complete(),e),i=>wt(r,t,()=>r.error(i),e)))})}function mr(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function yw(t,e){return Oe(t).pipe(mr(e),gr(e))}function vw(t,e){return Oe(t).pipe(mr(e),gr(e))}function _w(t,e){return new ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Ew(t,e){return new ee(n=>{let r;return wt(n,e,()=>{r=t[nl](),wt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function sl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ee(n=>{wt(n,e,()=>{let r=t[Symbol.asyncIterator]();wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Iw(t,e){return sl(il(t),e)}function ww(t,e){if(t!=null){if(Xu(t))return yw(t,e);if(Zu(t))return _w(t,e);if(Ju(t))return vw(t,e);if(el(t))return sl(t,e);if(rl(t))return Ew(t,e);if(ol(t))return Iw(t,e)}throw tl(t)}function Re(t,e){return e?ww(t,e):Oe(t)}function Q(...t){let e=pr(t);return Re(t,e)}function So(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new ee(e?i=>e.schedule(r,0,i):r)}function Cp(t){return!!t&&(t instanceof ee||Z(t.lift)&&Z(t.subscribe))}var Ln=yo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(t,e){return he((n,r)=>{let i=0;n.subscribe(le(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:KN}=Array;function QN(t,e){return KN(e)?t(...e):t(e)}function al(t){return oe(e=>QN(t,e))}var{isArray:YN}=Array,{getPrototypeOf:ZN,prototype:JN,keys:XN}=Object;function cl(t){if(t.length===1){let e=t[0];if(YN(e))return{args:e,keys:null};if(eM(e)){let n=XN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function eM(t){return t&&typeof t=="object"&&ZN(t)===JN}function ul(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ll(...t){let e=pr(t),n=Yu(t),{args:r,keys:i}=cl(t);if(r.length===0)return Re([],e);let o=new ee(tM(r,e,i?s=>ul(i,s):Nt));return n?o.pipe(al(n)):o}function tM(t,e,n=Nt){return r=>{Dw(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)Dw(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(le(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Dw(t,e,n){t?wt(n,t,e):e()}function Cw(t,e,n,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?S(N):u.push(N),S=N=>{o&&e.next(N),l++;let R=!1;Oe(n(N,h++)).subscribe(le(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let F=u.shift();s?wt(e,s,()=>S(F)):S(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(le(e,y,()=>{p=!0,m()})),()=>{c?.()}}function Be(t,e,n=1/0){return Z(e)?Be((r,i)=>oe((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>Cw(r,i,t,n)))}function Tw(t=1/0){return Be(Nt,t)}function bw(){return Tw(1)}function Ao(...t){return bw()(Re(t,pr(t)))}function _a(t){return new ee(e=>{Oe(t()).subscribe(e)})}function Tp(...t){let e=Yu(t),{args:n,keys:r}=cl(t),i=new ee(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Oe(n[h]).subscribe(le(o,m=>{p||(p=!0,l--),c[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?ul(r,c):c),o.complete())}))}});return e?i.pipe(al(e)):i}function Mt(t,e){return he((n,r)=>{let i=0;n.subscribe(le(r,o=>t.call(e,o,i++)&&r.next(o)))})}function yr(t){return he((e,n)=>{let r=null,i=!1,o;r=e.subscribe(le(n,void 0,void 0,s=>{o=Oe(t(s,yr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Sw(t,e,n,r,i){return(o,s)=>{let c=n,u=e,l=0;o.subscribe(le(s,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Ro(t,e){return Z(e)?Be(t,e,1):Be(t,1)}function vr(t){return he((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Vn(t){return t<=0?()=>It:he((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function dl(t=nM){return he((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function nM(){return new Ln}function Ea(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mt((i,o)=>t(i,o,r)):Nt,Vn(1),n?vr(e):dl(()=>new Ln))}function No(t){return t<=0?()=>It:he((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mt((i,o)=>t(i,o,r)):Nt,No(1),n?vr(e):dl(()=>new Ln))}function hl(t,e){return he(Sw(t,e,arguments.length>=2,!0))}function fl(...t){let e=pr(t);return he((n,r)=>{(e?Ao(t,n,e):Ao(t,n)).subscribe(r)})}function Bt(t,e){return he((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(le(r,u=>{i?.unsubscribe();let l=0,h=o++;Oe(t(u,h)).subscribe(i=le(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function pl(t){return he((e,n)=>{Oe(t).subscribe(le(n,()=>n.complete(),ya)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(le(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}function Aw(t){let e=re(null);try{return t()}finally{re(e)}}var jp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(_l(e,n)),this.code=e}};function rM(t){return`NG0${Math.abs(t)}`}function _l(t,e){return`${rM(t)}${e?": "+e:""}`}function Se(t){for(let e in t)if(t[e]===Se)return e;throw Error("")}function Pw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Dt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Up(t,e){return t?e?`${t} ${e}`:t:e||""}var iM=Se({__forward_ref__:Se});function hi(t){return t.__forward_ref__=hi,t.toString=function(){return Dt(this())},t}function Ze(t){return Bp(t)?t():t}function Bp(t){return typeof t=="function"&&t.hasOwnProperty(iM)&&t.__forward_ref__===hi}function xw(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Bn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ca(t){return oM(t,El)}function $p(t){return Ca(t)!==null}function oM(t,e){return t.hasOwnProperty(e)&&t[e]||null}function sM(t){let e=t?.[El]??null;return e||null}function Ap(t){return t&&t.hasOwnProperty(ml)?t[ml]:null}var El=Se({\u0275prov:Se}),ml=Se({\u0275inj:Se}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hp(t){return t&&!!t.\u0275providers}var zp=Se({\u0275cmp:Se}),qp=Se({\u0275dir:Se}),Gp=Se({\u0275pipe:Se}),Wp=Se({\u0275mod:Se}),wa=Se({\u0275fac:Se}),fi=Se({__NG_ELEMENT_ID__:Se}),Rw=Se({__NG_ENV_ID__:Se});function Kp(t){return typeof t=="string"?t:t==null?"":String(t)}function kw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Kp(t)}function Qp(t,e){throw new V(-200,t)}function Il(t,e){throw new V(-201,!1)}var Rp;function Ow(){return Rp}function yt(t){let e=Rp;return Rp=t,e}function Yp(t,e,n){let r=Ca(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Il(t,"Injector")}var aM={},ci=aM,Np="__NG_DI_FLAG__",Mp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=ui(n)||0;try{return this.injector.get(e,r&8?null:ci,r)}catch(i){if(fo(i))return i;throw i}}},yl="ngTempTokenPath",cM="ngTokenPath",uM=/\n/gm,lM="\u0275",Nw="__source";function dM(t,e=0){let n=op();if(n===void 0)throw new V(-203,!1);if(n===null)return Yp(t,void 0,e);{let r=hM(e),i=n.retrieve(t,r);if(fo(i)){if(r.optional)return null;throw i}return i}}function z(t,e=0){return(Ow()||dM)(Ze(t),e)}function P(t,e){return z(t,ui(e))}function ui(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hM(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Pp(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=fM(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(z(i,o))}else e.push(z(r))}return e}function Zp(t,e){return t[Np]=e,t.prototype[Np]=e,t}function fM(t){return t[Np]}function pM(t,e,n,r){let i=t[yl];throw e[Nw]&&i.unshift(e[Nw]),t.message=gM(`
`+t.message,i,n,r),t[cM]=i,t[yl]=null,t}function gM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==lM?t.slice(2):t;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Dt(c)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(uM,`
  `)}`}function _r(t,e){let n=t.hasOwnProperty(wa);return n?t[wa]:null}function wl(t,e){t.forEach(n=>Array.isArray(n)?wl(n,e):e(n))}function Jp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ta(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Fw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Lw(t,e,n){let r=Po(t,e);return r>=0?t[r|1]=n:(r=~r,Fw(t,r,e,n)),r}function Dl(t,e){let n=Po(t,e);if(n>=0)return t[n|1]}function Po(t,e){return mM(t,e,1)}function mM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wr={},Pt=[],Dr=new U(""),Xp=new U("",-1),eg=new U(""),Da=class{get(e,n=ci){if(n===ci)throw new Su(`NullInjectorError: No provider for ${Dt(e)}!`);return n}};function tg(t){return t[Wp]||null}function Cr(t){return t[zp]||null}function ng(t){return t[qp]||null}function Vw(t){return t[Gp]||null}function Tr(t){return{\u0275providers:t}}function jw(...t){return{\u0275providers:rg(!0,t),\u0275fromNgModule:!0}}function rg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return wl(e,s=>{let c=s;vl(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Uw(i,o),n}function Uw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ig(i,o=>{e(o,r)})}}function vl(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,o=Ap(t),s=!o&&Cr(t);if(!o&&!s){let u=t.ngModule;if(o=Ap(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)vl(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{wl(o.imports,h=>{vl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Uw(l,e)}if(!c){let l=_r(i)||(()=>new i);e({provide:i,useFactory:l,deps:Pt},i),e({provide:eg,useValue:i,multi:!0},i),e({provide:Dr,useValue:()=>z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;ig(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ig(t,e){for(let n of t)Hp(n)&&(n=n.\u0275providers),Array.isArray(n)?ig(n,e):e(n)}var yM=Se({provide:String,useValue:Se});function Bw(t){return t!==null&&typeof t=="object"&&yM in t}function vM(t){return!!(t&&t.useExisting)}function _M(t){return!!(t&&t.useFactory)}function li(t){return typeof t=="function"}function $w(t){return!!t.useClass}var ba=new U(""),gl={},Mw={},Sp;function Sa(){return Sp===void 0&&(Sp=new Da),Sp}var $e=class{},di=class extends $e{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,kp(e,s=>this.processProvider(s)),this.records.set(Xp,Mo(void 0,this)),i.has("environment")&&this.records.set($e,Mo(void 0,this));let o=this.records.get(ba);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(eg,Pt,{self:!0}))}retrieve(e,n){let r=ui(n)||0;try{return this.get(e,ci,r)}catch(i){if(fo(i))return i;throw i}}destroy(){Ia(this),this._destroyed=!0;let e=re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(e)}}onDestroy(e){return Ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ia(this);let n=Fn(this),r=yt(void 0),i;try{return e()}finally{Fn(n),yt(r)}}get(e,n=ci,r){if(Ia(this),e.hasOwnProperty(Rw))return e[Rw](this);let i=ui(r),o,s=Fn(this),c=yt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=CM(e)&&Ca(e);h&&this.injectableDefInScope(h)?l=Mo(xp(e),gl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let u=i&2?Sa():this.parent;return n=i&8&&n===ci?null:n,u.get(e,n)}catch(u){if(fo(u)){if((u[yl]=u[yl]||[]).unshift(Dt(e)),s)throw u;return pM(u,e,"R3InjectorError",this.source)}else throw u}finally{yt(c),Fn(s)}}resolveInjectorInitializers(){let e=re(null),n=Fn(this),r=yt(void 0),i;try{let o=this.get(Dr,Pt,{self:!0});for(let s of o)s()}finally{Fn(n),yt(r),re(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ze(e);let n=li(e)?e:Ze(e&&e.provide),r=IM(e);if(!li(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mo(void 0,gl,!0),i.factory=()=>Pp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=re(null);try{return n.value===Mw?Qp(Dt(e)):n.value===gl&&(n.value=Mw,n.value=n.factory()),typeof n.value=="object"&&n.value&&DM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xp(t){let e=Ca(t),n=e!==null?e.factory:_r(t);if(n!==null)return n;if(t instanceof U)throw new V(204,!1);if(t instanceof Function)return EM(t);throw new V(204,!1)}function EM(t){if(t.length>0)throw new V(204,!1);let n=sM(t);return n!==null?()=>n.factory(t):()=>new t}function IM(t){if(Bw(t))return Mo(void 0,t.useValue);{let e=og(t);return Mo(e,gl)}}function og(t,e,n){let r;if(li(t)){let i=Ze(t);return _r(i)||xp(i)}else if(Bw(t))r=()=>Ze(t.useValue);else if(_M(t))r=()=>t.useFactory(...Pp(t.deps||[]));else if(vM(t))r=()=>z(Ze(t.useExisting));else{let i=Ze(t&&(t.useClass||t.provide));if(wM(t))r=()=>new i(...Pp(t.deps));else return _r(i)||xp(i)}return r}function Ia(t){if(t.destroyed)throw new V(205,!1)}function Mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function wM(t){return!!t.deps}function DM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function CM(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function kp(t,e){for(let n of t)Array.isArray(n)?kp(n,e):n&&Hp(n)?kp(n.\u0275providers,e):e(n)}function et(t,e){let n;t instanceof di?(Ia(t),n=t):n=new Mp(t);let r,i=Fn(n),o=yt(void 0);try{return e()}finally{Fn(i),yt(o)}}function Hw(){return Ow()!==void 0||op()!=null}var tn=0,ae=1,J=2,Je=3,$t=4,Ht=5,Aa=6,xo=7,ut=8,pi=9,$n=10,Fe=11,ko=12,sg=13,gi=14,zt=15,mi=16,yi=17,vi=18,Ra=19,ag=20,Un=21,Cl=22,Na=23,xt=24,Tl=25,kt=26,zw=1;var br=7,Ma=8,Pa=9,Ct=10;function pn(t){return Array.isArray(t)&&typeof t[zw]=="object"}function nn(t){return Array.isArray(t)&&t[zw]===!0}function cg(t){return(t.flags&4)!==0}function Sr(t){return t.componentOffset>-1}function bl(t){return(t.flags&1)===1}function gn(t){return!!t.template}function Oo(t){return(t[J]&512)!==0}function _i(t){return(t[J]&256)===256}var qw="svg",Gw="math";function qt(t){for(;Array.isArray(t);)t=t[tn];return t}function ug(t,e){return qt(e[t])}function mn(t,e){return qt(e[t.index])}function Sl(t,e){return t.data[e]}function Ww(t,e){return t[e]}function lg(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Gt(t,e){let n=e[t];return pn(n)?n:n[tn]}function Al(t){return(t[J]&128)===128}function Kw(t){return nn(t[Je])}function xa(t,e){return e==null?null:t[e]}function dg(t){t[yi]=0}function hg(t){t[J]&1024||(t[J]|=1024,Al(t)&&Oa(t))}function Qw(t,e){for(;t>0;)e=e[gi],t--;return e}function ka(t){return!!(t[J]&9216||t[xt]?.dirty)}function Rl(t){t[$n].changeDetectionScheduler?.notify(8),t[J]&64&&(t[J]|=1024),ka(t)&&Oa(t)}function Oa(t){t[$n].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Al(e)));)e=Er(e)}function fg(t,e){if(_i(t))throw new V(911,!1);t[Un]===null&&(t[Un]=[]),t[Un].push(e)}function Yw(t,e){if(t[Un]===null)return;let n=t[Un].indexOf(e);n!==-1&&t[Un].splice(n,1)}function Er(t){let e=t[Je];return nn(e)?e[Je]:e}function Zw(t){return t[xo]??=[]}function Jw(t){return t.cleanup??=[]}var ce={lFrame:gD(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Fa=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(Fa||{}),TM=0,Op=!1;function Xw(){return ce.lFrame.elementDepthCount}function eD(){ce.lFrame.elementDepthCount++}function tD(){ce.lFrame.elementDepthCount--}function pg(){return ce.bindingsEnabled}function nD(){return ce.skipHydrationRootTNode!==null}function rD(t){return ce.skipHydrationRootTNode===t}function iD(){ce.skipHydrationRootTNode=null}function Ce(){return ce.lFrame.lView}function Tt(){return ce.lFrame.tView}function Hn(t){return ce.lFrame.contextLView=t,t[ut]}function zn(t){return ce.lFrame.contextLView=null,t}function bt(){let t=gg();for(;t!==null&&t.type===64;)t=t.parent;return t}function gg(){return ce.lFrame.currentTNode}function oD(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Fo(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function mg(){return ce.lFrame.isParent}function sD(){ce.lFrame.isParent=!1}function yg(t){xw("Must never be called in production mode"),TM=t}function vg(){return Op}function _g(t){let e=Op;return Op=t,e}function aD(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function cD(t){return ce.lFrame.bindingIndex=t}function Nl(){return ce.lFrame.bindingIndex++}function uD(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function lD(){return ce.lFrame.inI18n}function dD(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ml(e)}function hD(){return ce.lFrame.currentDirectiveIndex}function Ml(t){ce.lFrame.currentDirectiveIndex=t}function fD(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Eg(t){ce.lFrame.currentQueryIndex=t}function bM(t){let e=t[ae];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function Ig(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=bM(o),i===null||(o=o[gi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ce.lFrame=pD();return r.currentTNode=e,r.lView=t,!0}function Pl(t){let e=pD(),n=t[ae];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function pD(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?gD(t):e}function gD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function mD(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wg=mD;function xl(){let t=mD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yD(t){return(ce.lFrame.contextLView=Qw(t,ce.lFrame.contextLView))[ut]}function Ei(){return ce.lFrame.selectedIndex}function Ar(t){ce.lFrame.selectedIndex=t}function Dg(){let t=ce.lFrame;return Sl(t.tView,t.selectedIndex)}function vD(){return ce.lFrame.currentNamespace}var _D=!0;function kl(){return _D}function Ol(t){_D=t}function Fp(t,e=null,n=null,r){let i=Cg(t,e,n,r);return i.resolveInjectorInitializers(),i}function Cg(t,e=null,n=null,r,i=new Set){let o=[n||Pt,jw(t)];return r=r||(typeof t=="object"?void 0:Dt(t)),new di(o,e||Sa(),r||null,i)}var Xe=class t{static THROW_IF_NOT_FOUND=ci;static NULL=new Da;static create(e,n){if(Array.isArray(e))return Fp({name:""},n,e,"");{let r=e.name??"";return Fp({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:t,providedIn:"any",factory:()=>z(Xp)});static __NG_ELEMENT_ID__=-1},tt=new U(""),Ii=(()=>{class t{static __NG_ELEMENT_ID__=SM;static __NG_ENV_ID__=n=>n}return t})(),Lp=class extends Ii{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _i(this._lView)}onDestroy(e){let n=this._lView;return fg(n,e),()=>Yw(n,e)}};function SM(){return new Lp(Ce())}var fn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},St=new U("",{providedIn:"root",factory:()=>{let t=P($e),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(fn),e.handleError(n))}}}),ED={provide:Dr,useValue:()=>void P(fn),multi:!0};function Tg(t){return typeof t=="function"&&t[ct]!==void 0}function Rr(t,e){let[n,r,i]=lp(t,e?.equal),o=n,s=o[ct];return o.set=r,o.update=i,o.asReadonly=ID.bind(o),o}function ID(){let t=this[ct];if(t.readonlyFn===void 0){let e=()=>this();e[ct]=t,t.readonlyFn=e}return t.readonlyFn}function bg(t){return Tg(t)&&typeof t.set=="function"}var Ir=class{},Fl=new U("",{providedIn:"root",factory:()=>!1});var Sg=new U(""),Ag=new U("");var qn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ye(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ee(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),Lo=(()=>{class t{internalPendingTasks=P(qn);scheduler=P(Ir);errorHandler=P(St);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})();function La(...t){}var Rg=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>new Vp})}return t})(),Vp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function $o(t){return{toString:t}.toString()}var Ll="__parameters__";function FM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function JD(t,e,n){return $o(()=>{let r=FM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(Ll)?u[Ll]:Object.defineProperty(u,Ll,{value:[]})[Ll];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var _n=Zp(JD("Optional"),8);var XD=Zp(JD("SkipSelf"),4);function LM(t){return typeof t=="function"}var $l=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function eC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Ho=(()=>{let t=()=>tC;return t.ngInherit=!0,t})();function tC(t){return t.type.prototype.ngOnChanges&&(t.setInput=jM),VM}function VM(){let t=rC(this),e=t?.current;if(e){let n=t.previous;if(n===wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function jM(t,e,n,r,i){let o=this.declaredInputs[r],s=rC(t)||UM(t,{previous:wr,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new $l(l&&l.currentValue,n,u===wr),eC(t,e,i,n)}var nC="__ngSimpleChanges__";function rC(t){return t[nC]||null}function UM(t,e){return t[nC]=e}var wD=[];var we=function(t,e=null,n){for(let r=0;r<wD.length;r++){let i=wD[r];i(t,e,n)}};function BM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=tC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function iC(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function jl(t,e,n){oC(t,e,3,n)}function Ul(t,e,n,r){(t[J]&3)===n&&oC(t,e,n,r)}function Ng(t,e){let n=t[J];(n&3)===e&&(n&=16383,n+=1,t[J]=n)}function oC(t,e,n,r){let i=r!==void 0?t[yi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[yi]+=65536),(c<o||o==-1)&&($M(t,n,e,u),t[yi]=(t[yi]&4294901760)+u+2),u++}function DD(t,e){we(4,t,e);let n=re(null);try{e.call(t)}finally{re(n),we(5,t,e)}}function $M(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[J]>>14<t[yi]>>16&&(t[J]&3)===e&&(t[J]+=16384,DD(c,o)):DD(c,o)}var jo=-1,Di=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function HM(t){return(t.flags&8)!==0}function zM(t){return(t.flags&16)!==0}function qM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];WM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function GM(t){return t===3||t===4||t===6}function WM(t){return t.charCodeAt(0)===64}function Ua(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?CD(t,n,i,null,e[++r]):CD(t,n,i,null,null))}}return t}function CD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function sC(t){return t!==jo}function Hl(t){return t&32767}function KM(t){return t>>16}function zl(t,e){let n=KM(t),r=e;for(;n>0;)r=r[gi],n--;return r}var Ug=!0;function ql(t){let e=Ug;return Ug=t,e}var QM=256,aC=QM-1,cC=5,YM=0,yn={};function ZM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(fi)&&(r=n[fi]),r==null&&(r=n[fi]=YM++);let i=r&aC,o=1<<i;e.data[t+(i>>cC)]|=o}function Gl(t,e){let n=uC(t,e);if(n!==-1)return n;let r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,Mg(r.data,t),Mg(e,null),Mg(r.blueprint,null));let i=sm(t,e),o=t.injectorIndex;if(sC(i)){let s=Hl(i),c=zl(i,e),u=c[ae].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Mg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function uC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=pC(i),r===null)return jo;if(n++,i=i[gi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return jo}function Bg(t,e,n){ZM(t,e,n)}function lC(t,e,n){if(n&8||t!==void 0)return t;Il(e,"NodeInjector")}function dC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[pi],o=yt(void 0);try{return i?i.get(e,r,n&8):Yp(e,r,n&8)}finally{yt(o)}}return lC(r,e,n)}function hC(t,e,n,r=0,i){if(t!==null){if(e[J]&2048&&!(r&2)){let s=nP(t,e,n,r,yn);if(s!==yn)return s}let o=fC(t,e,n,r,yn);if(o!==yn)return o}return dC(e,n,r,i)}function fC(t,e,n,r,i){let o=eP(n);if(typeof o=="function"){if(!Ig(e,t,r))return r&1?lC(i,n,r):dC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Il(n);else return s}finally{wg()}}else if(typeof o=="number"){let s=null,c=uC(t,e),u=jo,l=r&1?e[zt][Ht]:null;for((c===-1||r&4)&&(u=c===-1?sm(t,e):e[c+8],u===jo||!bD(r,!1)?c=-1:(s=e[ae],c=Hl(u),e=zl(u,e)));c!==-1;){let h=e[ae];if(TD(o,c,h.data)){let p=JM(c,e,n,s,r,l);if(p!==yn)return p}u=e[c+8],u!==jo&&bD(r,e[ae].data[c+8]===l)&&TD(o,c,e)?(s=h,c=Hl(u),e=zl(u,e)):c=-1}}return i}function JM(t,e,n,r,i,o){let s=e[ae],c=s.data[t+8],u=r==null?Sr(c)&&Ug:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=XM(c,s,n,u,l);return h!==null?Wl(e,s,h,c):yn}function XM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&gn(y)&&y.type===n)return u}return null}function Wl(t,e,n,r){let i=t[n],o=e.data;if(i instanceof Di){let s=i;s.resolving&&Qp(kw(o[n]));let c=ql(s.canSeeViewProviders);s.resolving=!0;let u=o[n].type||o[n],l,h=s.injectImpl?yt(s.injectImpl):null,p=Ig(t,r,0);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&BM(n,o[n],e)}finally{h!==null&&yt(h),ql(c),s.resolving=!1,wg()}}return i}function eP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(fi)?t[fi]:void 0;return typeof e=="number"?e>=0?e&aC:tP:e}function TD(t,e,n){let r=1<<t;return!!(n[e+(t>>cC)]&r)}function bD(t,e){return!(t&2)&&!(t&1&&e)}var wi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return hC(this._tNode,this._lView,e,ui(r),n)}};function tP(){return new wi(bt(),Ce())}function zo(t){return $o(()=>{let e=t.prototype.constructor,n=e[wa]||$g(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wa]||$g(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $g(t){return Bp(t)?()=>{let e=$g(Ze(t));return e&&e()}:_r(t)}function nP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Oo(s);){let c=fC(o,s,n,r|2,yn);if(c!==yn)return c;let u=o.parent;if(!u){let l=s[ag];if(l){let h=l.get(n,yn,r);if(h!==yn)return h}u=pC(s),s=s[gi]}o=u}return i}function pC(t){let e=t[ae],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}function rP(){return rd(bt(),Ce())}function rd(t,e){return new qo(mn(t,e))}var qo=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=rP}return t})();function gC(t){return(t.flags&128)===128}var am=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(am||{}),mC=new Map,iP=0;function oP(){return iP++}function sP(t){mC.set(t[Ra],t)}function Hg(t){mC.delete(t[Ra])}var SD="__ngContext__";function za(t,e){pn(e)?(t[SD]=e[Ra],sP(e)):t[SD]=e}function yC(t){return _C(t[ko])}function vC(t){return _C(t[$t])}function _C(t){for(;t!==null&&!nn(t);)t=t[$t];return t}var zg;function cm(t){zg=t}function EC(){if(zg!==void 0)return zg;if(typeof document<"u")return document;throw new V(210,!1)}var id=new U("",{providedIn:"root",factory:()=>aP}),aP="ng",od=new U(""),Mr=new U("",{providedIn:"platform",factory:()=>"unknown"});var sd=new U("",{providedIn:"root",factory:()=>EC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cP="h",uP="b";var IC=!1,wC=new U("",{providedIn:"root",factory:()=>IC});var lP=(t,e,n,r)=>{};function dP(t,e,n,r){lP(t,e,n,r)}var hP=()=>null;function DC(t,e,n=!1){return hP(t,e,n)}function CC(t,e){let n=t.contentQueries;if(n!==null){let r=re(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Eg(o),c.contentQueries(2,e[s],s)}}}finally{re(r)}}}function qg(t,e,n){Eg(0);let r=re(null);try{e(t,n)}finally{re(r)}}function TC(t,e,n){if(cg(e)){let r=re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{re(r)}}}var Gn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Gn||{});var Gg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jp})`}};function bC(t){return t instanceof Gg?t.changingThisBreaksApplicationSecurity:t}function SC(t){return t instanceof Function?t():t}function fP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var AC="ng-template";function pP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(um(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function um(t){return t.type===4&&t.value!==AC}function gP(t,e,n){let r=t.type===4&&!n?AC:t.value;return e===r}function mP(t,e,n){let r=4,i=t.attrs,o=i!==null?_P(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!rn(r)&&!rn(u))return!1;if(s&&rn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!gP(t,u,n)||u===""&&e.length===1){if(rn(r))return!1;s=!0}}else if(r&8){if(i===null||!pP(t,i,u,n)){if(rn(r))return!1;s=!0}}else{let l=e[++c],h=yP(u,i,um(t),n);if(h===-1){if(rn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(rn(r))return!1;s=!0}}}}return rn(r)||s}function rn(t){return(t&1)===0}function yP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return EP(e,t)}function vP(t,e,n=!1){for(let r=0;r<e.length;r++)if(mP(t,e[r],n))return!0;return!1}function _P(t){for(let e=0;e<t.length;e++){let n=t[e];if(GM(n))return e}return t.length}function EP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function AD(t,e){return t?":not("+e.trim()+")":e}function IP(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rn(s)&&(e+=AD(o,i),i=""),r=s,o=o||!rn(r);n++}return i!==""&&(e+=AD(o,i)),e}function wP(t){return t.map(IP).join(",")}function DP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!rn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Wn={};function CP(t,e){return t.createText(e)}function TP(t,e,n){t.setValue(e,n)}function RC(t,e,n){return t.createElement(e,n)}function Kl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function NC(t,e,n){t.appendChild(e,n)}function RD(t,e,n,r,i){r!==null?Kl(t,e,n,r,i):NC(t,e,n)}function bP(t,e,n){t.removeChild(null,e,n)}function SP(t,e,n){t.setAttribute(e,"style",n)}function AP(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function MC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&qM(t,e,r),i!==null&&AP(t,e,i),o!==null&&SP(t,e,o)}function lm(t,e,n,r,i,o,s,c,u,l,h){let p=kt+r,m=p+i,y=RP(p,m),S=typeof l=="function"?l():l;return y[ae]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function RP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wn);return n}function NP(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=lm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dm(t,e,n,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[tn]=i,p[J]=r|4|128|8|64|1024,(l!==null||t&&t[J]&2048)&&(p[J]|=2048),dg(p),p[Je]=p[gi]=t,p[ut]=n,p[$n]=s||t&&t[$n],p[Fe]=c||t&&t[Fe],p[pi]=u||t&&t[pi]||null,p[Ht]=o,p[Ra]=oP(),p[Aa]=h,p[ag]=l,p[zt]=e.type==2?t[zt]:p,p}function MP(t,e,n){let r=mn(e,t),i=NP(n),o=t[$n].rendererFactory,s=hm(t,dm(t,i,null,PC(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function PC(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function xC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hm(t,e){return t[ko]?t[sg][$t]=e:t[ko]=e,t[sg]=e,e}function lt(t=1){kC(Tt(),Ce(),Ei()+t,!1)}function kC(t,e,n,r){if(!r)if((e[J]&3)===3){let o=t.preOrderCheckHooks;o!==null&&jl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ul(e,o,0,n)}Ar(n)}var ad=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ad||{});function Wg(t,e,n,r){let i=re(null);try{let[o,s,c]=t.inputs[n],u=null;(s&ad.SignalBased)!==0&&(u=e[o][ct]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):eC(e,u,o,r)}finally{re(i)}}function OC(t,e,n,r,i){let o=Ei(),s=r&2;try{Ar(-1),s&&e.length>kt&&kC(t,e,kt,!1),we(s?2:0,i,n),n(r,i)}finally{Ar(o),we(s?3:1,i,n)}}function fm(t,e,n){VP(t,e,n),(n.flags&64)===64&&jP(t,e,n)}function FC(t,e,n=mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function PP(t,e,n,r){let o=r.get(wC,IC)||n===Gn.ShadowDom,s=t.selectRootElement(e,o);return xP(s),s}function xP(t){kP(t)}var kP=()=>null;function OP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function LC(t,e,n,r,i,o){let s=e[ae];if(pm(t,s,e,n,r)){Sr(t)&&LP(e,t.index);return}FP(t,e,n,r,i,o)}function FP(t,e,n,r,i,o){if(t.type&3){let s=mn(t,e);n=OP(n),r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function LP(t,e){let n=Gt(e,t);n[J]&16||(n[J]|=64)}function VP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Sr(n)&&MP(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=Wl(e,t,s,n);if(za(u,e),o!==null&&BP(e,s-r,u,c,n,o),gn(c)){let l=Gt(n.index,e);l[ut]=Wl(e,t,s,n)}}}function jP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=hD();try{Ar(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Ml(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&UP(u,l)}}finally{Ar(-1),Ml(s)}}function UP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function VC(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];vP(e,o.selectors,!1)&&(r??=[],gn(o)?r.unshift(o):r.push(o))}return r}function BP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Wg(r,n,u,l)}}function $P(t,e){let n=t[pi];if(!n)return;n.get(St,null)?.(e)}function pm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Wg(p,n[l],h,i),c=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Wg(h,l,r,i),c=!0}return c}function HP(t,e){let n=Gt(e,t),r=n[ae];zP(r,n);let i=n[tn];i!==null&&n[Aa]===null&&(n[Aa]=DC(i,n[pi])),we(18),gm(r,n,n[ut]),we(19,n[ut])}function zP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gm(t,e,n){Pl(e);try{let r=t.viewQuery;r!==null&&qg(1,r,n);let i=t.template;i!==null&&OC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vi]?.finishViewCreation(t),t.staticContentQueries&&CC(t,e),t.staticViewQueries&&qg(2,t.viewQuery,n);let o=t.components;o!==null&&qP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,xl()}}function qP(t,e){for(let n=0;n<e.length;n++)HP(t,e[n])}function GP(t,e,n,r){let i=re(null);try{let o=e.tView,c=t[J]&4096?4096:16,u=dm(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[mi]=l;let h=t[vi];return h!==null&&(u[vi]=h.createEmbeddedView(o)),gm(o,u,n),u}finally{re(i)}}function ND(t,e){return!e||e.firstChild===null||gC(t)}var MD=!1,WP=new U(""),KP;function mm(t,e){return KP(t,e)}var vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(vn||{});function ym(t){return(t.flags&32)===32}function Vo(t,e,n,r,i){if(r!=null){let o,s=!1;nn(r)?o=r:pn(r)&&(s=!0,r=r[tn]);let c=qt(r);t===0&&n!==null?i==null?NC(e,n,c):Kl(e,n,c,i||null,!0):t===1&&n!==null?Kl(e,n,c,i||null,!0):t===2?bP(e,c,s):t===3&&e.destroyNode(c),o!=null&&sx(e,t,o,n,i)}}function QP(t,e){jC(t,e),e[tn]=null,e[Ht]=null}function YP(t,e,n,r,i,o){r[tn]=i,r[Ht]=e,cd(t,r,n,1,i,o)}function jC(t,e){e[$n].changeDetectionScheduler?.notify(9),cd(t,e,e[Fe],2,null,null)}function ZP(t){let e=t[ko];if(!e)return Pg(t[ae],t);for(;e;){let n=null;if(pn(e))n=e[ko];else{let r=e[Ct];r&&(n=r)}if(!n){for(;e&&!e[$t]&&e!==t;)pn(e)&&Pg(e[ae],e),e=e[Je];e===null&&(e=t),pn(e)&&Pg(e[ae],e),n=e&&e[$t]}e=n}}function vm(t,e){let n=t[Pa],r=n.indexOf(e);n.splice(r,1)}function UC(t,e){if(_i(e))return;let n=e[Fe];n.destroyNode&&cd(t,e,n,3,null,null),ZP(e)}function Pg(t,e){if(_i(e))return;let n=re(null);try{e[J]&=-129,e[J]|=256,e[xt]&&Ou(e[xt]),XP(t,e),JP(t,e),e[ae].type===1&&e[Fe].destroy();let r=e[mi];if(r!==null&&nn(e[Je])){r!==e[Je]&&vm(r,e);let i=e[vi];i!==null&&i.detachView(t)}Hg(e)}finally{re(n)}}function JP(t,e){let n=t.cleanup,r=e[xo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[xo]=null);let i=e[Un];if(i!==null){e[Un]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Na];if(o!==null){e[Na]=null;for(let s of o)s.destroy()}}function XP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Di)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];we(4,c,u);try{u.call(c)}finally{we(5,c,u)}}else{we(4,i,o);try{o.call(i)}finally{we(5,i,o)}}}}}function ex(t,e,n){return tx(t,e.parent,n)}function tx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[tn];if(Sr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Gn.None||i===Gn.Emulated)return null}return mn(r,n)}function nx(t,e,n){return ix(t,e,n)}function rx(t,e,n){return t.type&40?mn(t,n):null}var ix=rx,PD;function _m(t,e,n,r){let i=ex(t,r,e),o=e[Fe],s=r.parent||e[Ht],c=nx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)RD(o,i,n[u],c,!1);else RD(o,i,n,c,!1);PD!==void 0&&PD(o,r,e,n,i)}function Va(t,e){if(e!==null){let n=e.type;if(n&3)return mn(e,t);if(n&4)return Kg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Va(t,r);{let i=t[e.index];return nn(i)?Kg(-1,i):qt(i)}}else{if(n&128)return Va(t,e.next);if(n&32)return mm(e,t)()||qt(t[e.index]);{let r=BC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[zt]);return Va(i,r)}else return Va(t,e.next)}}}return null}function BC(t,e){if(e!==null){let r=t[zt][Ht],i=e.projection;return r.projection[i]}return null}function Kg(t,e){let n=Ct+t+1;if(n<e.length){let r=e[n],i=r[ae].firstChild;if(i!==null)return Va(r,i)}return e[br]}function Em(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&e===0&&(c&&za(qt(c),r),n.flags|=2),!ym(n))if(u&8)Em(t,e,n.child,r,i,o,!1),Vo(e,t,i,c,o);else if(u&32){let l=mm(n,r),h;for(;h=l();)Vo(e,t,i,h,o);Vo(e,t,i,c,o)}else u&16?ox(t,e,r,n,i,o):Vo(e,t,i,c,o);n=s?n.projectionNext:n.next}}function cd(t,e,n,r,i,o){Em(n,r,t.firstChild,e,i,o,!1)}function ox(t,e,n,r,i,o){let s=n[zt],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Vo(e,t,i,h,o)}else{let l=u,h=s[Je];gC(r)&&(l.flags|=128),Em(t,e,l,h,i,o,!0)}}function sx(t,e,n,r,i){let o=n[br],s=qt(n);o!==s&&Vo(e,t,r,o,i);for(let c=Ct;c<n.length;c++){let u=n[c];cd(u[ae],u,t,e,r,o)}}function ax(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:vn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=vn.Important),t.setStyle(n,r,i,o))}}function Ba(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(qt(o)),nn(o)&&$C(o,r);let s=n.type;if(s&8)Ba(t,e,n.child,r);else if(s&32){let c=mm(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=BC(e,n);if(Array.isArray(c))r.push(...c);else{let u=Er(e[zt]);Ba(u[ae],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function $C(t,e){for(let n=Ct;n<t.length;n++){let r=t[n],i=r[ae].firstChild;i!==null&&Ba(r[ae],r,i,e)}t[br]!==t[tn]&&e.push(t[br])}function HC(t){if(t[Tl]!==null){for(let e of t[Tl])e.impl.addSequence(e);t[Tl].length=0}}var zC=[];function cx(t){return t[xt]??ux(t)}function ux(t){let e=zC.pop()??Object.create(dx);return e.lView=t,e}function lx(t){t.lView[xt]!==t&&(t.lView=null,zC.push(t))}var dx=ie(O({},ni),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Oa(t.lView)},consumerOnSignalRead(){this.lView[xt]=this}});function hx(t){let e=t[xt]??Object.create(fx);return e.lView=t,e}var fx=ie(O({},ni),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!qC(e[ae]);)e=Er(e);e&&hg(e)},consumerOnSignalRead(){this.lView[xt]=this}});function qC(t){return t.type!==2}function GC(t){if(t[Na]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Na])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[J]&8192)}}var px=100;function Im(t,e=0){let r=t[$n].rendererFactory,i=!1;i||r.begin?.();try{gx(t,e)}finally{i||r.end?.()}}function gx(t,e){let n=vg();try{_g(!0),Qg(t,e);let r=0;for(;ka(t);){if(r===px)throw new V(103,!1);r++,Qg(t,1)}}finally{_g(n)}}function WC(t,e){yg(e?Fa.Exhaustive:Fa.OnlyDirtyViews);try{Im(t)}finally{yg(Fa.Off)}}function mx(t,e,n,r){if(_i(e))return;let i=e[J],o=!1,s=!1;Pl(e);let c=!0,u=null,l=null;o||(qC(t)?(l=cx(e),u=ri(l)):xu()===null?(c=!1,l=hx(e),u=ri(l)):e[xt]&&(Ou(e[xt]),e[xt]=null));try{dg(e),cD(t.bindingStartIndex),n!==null&&OC(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&jl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ul(e,y,0,null),Ng(e,0)}if(s||yx(e),GC(e),KC(e,0),t.contentQueries!==null&&CC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&jl(e,y)}else{let y=t.contentHooks;y!==null&&Ul(e,y,1),Ng(e,1)}_x(t,e);let p=t.components;p!==null&&YC(e,p,0);let m=t.viewQuery;if(m!==null&&qg(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&jl(e,y)}else{let y=t.viewHooks;y!==null&&Ul(e,y,2),Ng(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Cl]){for(let y of e[Cl])y();e[Cl]=null}o||(HC(e),e[J]&=-73)}catch(h){throw o||Oa(e),h}finally{l!==null&&(go(l,u),c&&lx(l)),xl()}}function KC(t,e){for(let n=yC(t);n!==null;n=vC(n))for(let r=Ct;r<n.length;r++){let i=n[r];QC(i,e)}}function yx(t){for(let e=yC(t);e!==null;e=vC(e)){if(!(e[J]&2))continue;let n=e[Pa];for(let r=0;r<n.length;r++){let i=n[r];hg(i)}}}function vx(t,e,n){we(18);let r=Gt(e,t);QC(r,n),we(19,r[ut])}function QC(t,e){Al(t)&&Qg(t,e)}function Qg(t,e){let r=t[ae],i=t[J],o=t[xt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ma(o)),s||=!1,o&&(o.dirty=!1),t[J]&=-9217,s)mx(r,t,r.template,t[ut]);else if(i&8192){let c=re(null);try{GC(t),KC(t,1);let u=r.components;u!==null&&YC(t,u,1),HC(t)}finally{re(c)}}}function YC(t,e,n){for(let r=0;r<e.length;r++)vx(t,e[r],n)}function _x(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ar(~i);else{let o=i,s=n[++r],c=n[++r];dD(s,o);let u=e[o];we(24,u),c(2,u),we(25,u)}}}finally{Ar(-1)}}function wm(t,e){let n=vg()?64:1088;for(t[$n].changeDetectionScheduler?.notify(e);t;){t[J]|=n;let r=Er(t);if(Oo(t)&&!r)return t;t=r}return null}function ZC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ex(t,e,n,r=!0){let i=e[ae];if(Ix(i,e,t,n),r){let s=Kg(n,t),c=e[Fe],u=c.parentNode(t[br]);u!==null&&YP(i,t[Ht],c,e,u,s)}let o=e[Aa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yg(t,e){if(t.length<=Ct)return;let n=Ct+e,r=t[n];if(r){let i=r[mi];i!==null&&i!==t&&vm(i,r),e>0&&(t[n-1][$t]=r[$t]);let o=Ta(t,Ct+e);QP(r[ae],r);let s=o[vi];s!==null&&s.detachView(o[ae]),r[Je]=null,r[$t]=null,r[J]&=-129}return r}function Ix(t,e,n,r){let i=Ct+r,o=n.length;r>0&&(n[i-1][$t]=e),r<o-Ct?(e[$t]=n[i],Jp(n,Ct+r,e)):(n.push(e),e[$t]=null),e[Je]=n;let s=e[mi];s!==null&&n!==s&&JC(s,e);let c=e[vi];c!==null&&c.insertView(t),Rl(e),e[J]|=128}function JC(t,e){let n=t[Pa],r=e[Je];if(pn(r))t[J]|=2;else{let i=r[Je][zt];e[zt]!==i&&(t[J]|=2)}n===null?t[Pa]=[e]:n.push(e)}var Nr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ae];return Ba(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ut]}set context(e){this._lView[ut]=e}get destroyed(){return _i(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(nn(e)){let n=e[Ma],r=n?n.indexOf(this):-1;r>-1&&(Yg(e,r),Ta(n,r))}this._attachedToViewContainer=!1}UC(this._lView[ae],this._lView)}onDestroy(e){fg(this._lView,e)}markForCheck(){wm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Rl(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,Im(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[pi].get(WP,MD)}catch{this.exhaustive=MD}}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Oo(this._lView),n=this._lView[mi];n!==null&&!e&&vm(n,this._lView),jC(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=Oo(this._lView),r=this._lView[mi];r!==null&&!n&&JC(r,this._lView),Rl(this._lView)}};var ud=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=wx;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=GP(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Nr(o)}}return t})();function wx(){return Dx(bt(),Ce())}function Dx(t,e){return t.type&4?new ud(e,t,rd(t,e)):null}function Dm(t,e,n,r,i){let o=t.data[e];if(o===null)o=Cx(t,e,n,r,i),lD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=oD();o.injectorIndex=s===null?-1:s.injectorIndex}return Fo(o,!0),o}function Cx(t,e,n,r,i){let o=gg(),s=mg(),c=s?o:o&&o.parent,u=t.data[e]=bx(t,c,n,e,r,i);return Tx(t,u,o,s),u}function Tx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function bx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return nD()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var WG=new RegExp(`^(\\d+)*(${uP}|${cP})*(.*)`);var Sx=()=>null;function xD(t,e){return Sx(t,e)}var XC=class{},ld=class{},Zg=class{resolveComponentFactory(e){throw new V(917,!1)}},qa=class{static NULL=new Zg},Ci=class{},Ga=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Ax()}return t})();function Ax(){let t=Ce(),e=bt(),n=Gt(e.index,t);return(pn(n)?n:t)[Fe]}var eT=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>null})}return t})();var Bl={},Jg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Bl,r);return i!==Bl||n===Bl?i:this.parentInjector.get(e,n,r)}};function kD(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Up(i,c);else if(o==2){let u=c,l=e[++s];r=Up(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function fe(t,e=0){let n=Ce();if(n===null)return z(t,e);let r=bt();return hC(r,n,Ze(t),e)}function tT(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}Mx(t,e,n,c,o,u,l)}o!==null&&r!==null&&Rx(n,r,o)}function Rx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function Nx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Mx(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&gn(y)&&(u=!0,Nx(t,n,m)),Bg(Gl(n,e),t,y.type)}Lx(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=xC(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Ua(n.mergedAttrs,y.hostAttrs),xx(t,n,e,p,y),Fx(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Px(t,n,o)}function Px(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))OD(0,e,i,r),OD(1,e,i,r),LD(e,r,!1);else{let o=n.get(i);FD(0,e,o,r),FD(1,e,o,r),LD(e,r,!0)}}}function OD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),nT(e,o)}}function FD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),nT(e,s)}}function nT(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function LD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||um(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function xx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=_r(i.type,!0)),s=new Di(o,gn(i),fe);t.blueprint[r]=s,n[r]=s,kx(t,e,r,xC(t,n,i.hostVars,Wn),i)}function kx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;Ox(s)!=c&&s.push(c),s.push(n,r,o)}}function Ox(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Fx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gn(e)&&(n[""]=t)}}function Lx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function rT(t,e,n,r,i,o,s,c){let u=e.consts,l=xa(u,s),h=Dm(e,t,2,r,l);return o&&tT(e,n,h,xa(u,c),i),h.mergedAttrs=Ua(h.mergedAttrs,h.attrs),h.attrs!==null&&kD(h,h.attrs,!1),h.mergedAttrs!==null&&kD(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function iT(t,e){iC(t,e),cg(e)&&t.queries.elementEnd(e)}function Cm(t){return sT(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function oT(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function sT(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Vx(t,e,n){return t[e]=n}function Wa(t,e,n){if(n===Wn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function xg(t,e,n){return function r(i){let o=Sr(t)?Gt(t.index,e):e;wm(o,5);let s=e[ut],c=VD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=VD(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function VD(t,e,n,r){let i=re(null);try{return we(6,e,n),n(r)!==!1}catch(o){return $P(t,o),!1}finally{we(7,e,n),re(i)}}function jx(t,e,n,r,i,o,s,c){let u=bl(t),l=!1,h=null;if(!r&&u&&(h=Ux(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=mn(t,n),m=r?r(p):p;dP(n,m,o,c);let y=i.listen(m,o,c),S=r?N=>r(qt(N[t.index])):t.index;aT(S,e,n,o,c,y,!1)}return l}function Ux(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[xo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function aT(t,e,n,r,i,o,s){let c=e.firstCreatePass?Jw(e):null,u=Zw(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function jD(t,e,n,r,i,o){let s=e[n],c=e[ae],l=c.data[n].outputs[r],p=s[l].subscribe(o);aT(t.index,c,e,i,o,p,!0)}var Xg=Symbol("BINDING");var Ql=class extends qa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Cr(e);return new Uo(n,this.ngModule)}};function Bx(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&ad.SignalBased)!==0};return i&&(o.transform=i),o})}function $x(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function Hx(t,e,n){let r=e instanceof $e?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Jg(n,r):n}function zx(t){let e=t.get(Ci,null);if(e===null)throw new V(407,!1);let n=t.get(eT,null),r=t.get(Ir,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function qx(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return RC(e,n,n==="svg"?qw:n==="math"?Gw:null)}var Uo=class extends ld{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Bx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$x(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=wP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){we(22);let c=re(null);try{let u=this.componentDef,l=Gx(r,u,s,o),h=Hx(u,i||this.ngModule,e),p=zx(h),m=p.rendererFactory.createRenderer(null,u),y=r?PP(m,r,u.encapsulation,h):qx(u,m),S=s?.some(UD)||o?.some(F=>typeof F!="function"&&F.bindings.some(UD)),N=dm(null,l,null,512|PC(u),null,null,p,m,h,null,DC(y,h,!0));N[kt]=y,Pl(N);let R=null;try{let F=rT(kt,l,N,"#host",()=>l.directiveRegistry,!0,0);y&&(MC(m,y,F),za(y,N)),fm(l,N,F),TC(l,F,N),iT(l,F),n!==void 0&&Kx(F,this.ngContentSelectors,n),R=Gt(F.index,N),N[ut]=R[ut],gm(l,N,null)}catch(F){throw R!==null&&Hg(R),Hg(N),F}finally{we(23),xl()}return new Yl(this.componentType,N,!!S)}finally{re(c)}}};function Gx(t,e,n,r){let i=t?["ng-version","20.0.5"]:DP(e.selectors[0]),o=null,s=null,c=0;if(n)for(let h of n)c+=h[Xg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[Xg].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=ng(p);u.push(m)}return lm(0,null,Wx(o,s),1,c,u,null,null,null,[i],null)}function Wx(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function UD(t){let e=t[Xg].kind;return e==="input"||e==="twoWay"}var Yl=class extends XC{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Sl(n[ae],kt),this.location=rd(this._tNode,n),this.instance=Gt(this._tNode.index,n)[ut],this.hostView=this.changeDetectorRef=new Nr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=pm(r,i[ae],i,e,n);this.previousInputValues.set(e,n);let s=Gt(r.index,i);wm(s,1)}get injector(){return new wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Kx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Go=(()=>{class t{static __NG_ELEMENT_ID__=Qx}return t})();function Qx(){let t=bt();return Zx(t,Ce())}var Yx=Go,cT=class extends Yx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return rd(this._hostTNode,this._hostLView)}get injector(){return new wi(this._hostTNode,this._hostLView)}get parentInjector(){let e=sm(this._hostTNode,this._hostLView);if(sC(e)){let n=zl(e,this._hostLView),r=Hl(e),i=n[ae].data[r+8];return new wi(i,n)}else return new wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=xD(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,ND(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!LM(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,c=R.bindings}let h=u?e:new Uo(Cr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(u?p:this.parentInjector).get($e,null);F&&(o=F)}let m=Cr(h.componentType??{}),y=xD(this._lContainer,m?.id??null),S=y?.firstChild??null,N=h.create(p,i,S,o,s,c);return this.insertImpl(N.hostView,l,ND(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Kw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Je],l=new cT(u,u[Ht],u[Je]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ex(s,i,o,r),e.attachToViewContainerRef(),Jp(kg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yg(this._lContainer,n);r&&(Ta(kg(this._lContainer),n),UC(r[ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yg(this._lContainer,n);return r&&Ta(kg(this._lContainer),n)!=null?new Nr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BD(t){return t[Ma]}function kg(t){return t[Ma]||(t[Ma]=[])}function Zx(t,e){let n,r=e[t.index];return nn(r)?n=r:(n=ZC(r,e,null,t),e[t.index]=n,hm(e,n)),Xx(n,e,t,r),new cT(n,t,e)}function Jx(t,e){let n=t[Fe],r=n.createComment(""),i=mn(e,t),o=n.parentNode(i);return Kl(n,o,r,n.nextSibling(i),!1),r}var Xx=nk,ek=()=>!1;function tk(t,e,n){return ek(t,e,n)}function nk(t,e,n,r){if(t[br])return;let i;n.type&8?i=qt(r):i=Jx(e,n),t[br]=i}var $D=new Set;function Tm(t){$D.has(t)||($D.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ti=class{},dd=class{};var Zl=class extends Ti{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ql(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=tg(e);this._bootstrapComponents=SC(o.bootstrap),this._r3Injector=Cg(e,n,[{provide:Ti,useValue:this},{provide:qa,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jl=class extends dd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Zl(this.moduleType,e,[])}};var $a=class extends Ti{injector;componentFactoryResolver=new Ql(this);instance=null;constructor(e){super();let n=new di([...e.providers,{provide:Ti,useValue:this},{provide:qa,useValue:this.componentFactoryResolver}],e.parent||Sa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ka(t,e,n=null){return new $a({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var rk=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=rg(!1,n.type),i=r.length>0?Ka([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(z($e))})}return t})();function vt(t){return $o(()=>{let e=uT(t),n=ie(O({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===am.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(rk).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Gn.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Tm("NgStandalone"),lT(n);let r=t.dependencies;return n.directiveDefs=HD(r,!1),n.pipeDefs=HD(r,!0),n.id=ck(n),n})}function ik(t){return Cr(t)||ng(t)}function ok(t){return t!==null}function Pr(t){return $o(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sk(t,e){if(t==null)return wr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=ad.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function ak(t){if(t==null)return wr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function on(t){return $o(()=>{let e=uT(t);return lT(e),e})}function bm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function uT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:sk(t.inputs,e),outputs:ak(t.outputs),debugInfo:null}}function lT(t){t.features?.forEach(e=>e(t))}function HD(t,e){if(!t)return null;let n=e?Vw:ik;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ok)}function ck(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function uk(t){return Object.getPrototypeOf(t.prototype).constructor}function Si(t){let e=uk(t.type),n=!0,r=[t];for(;e;){let i;if(gn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Og(t.inputs),s.declaredInputs=Og(t.declaredInputs),s.outputs=Og(t.outputs);let c=i.hostBindings;c&&pk(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&hk(t,u),l&&fk(t,l),lk(t,i),Pw(t.outputs,i.outputs),gn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===Si&&(n=!1)}}e=Object.getPrototypeOf(e)}dk(r)}function lk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function dk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ua(i.hostAttrs,n=Ua(n,i.hostAttrs))}}function Og(t){return t===wr?{}:t===Pt?[]:t}function hk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function fk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function pk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function gk(t,e,n,r,i,o,s,c,u){let l=e.consts,h=Dm(e,t,4,s||null,c||null);pg()&&tT(e,n,h,xa(l,u),VC),h.mergedAttrs=Ua(h.mergedAttrs,h.attrs),iC(e,h);let p=h.tView=lm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function mk(t,e,n,r,i,o,s,c,u,l,h){let p=n+kt,m=e.firstCreatePass?gk(p,e,t,r,i,o,s,c,l):e.data[p];u&&(m.flags|=u),Fo(m,!1);let y=yk(e,t,m,n);kl()&&_m(e,t,y,m),za(y,t);let S=ZC(y,t,y,m);return t[p]=S,hm(t,S),tk(S,m,t),bl(m)&&fm(e,t,m),l!=null&&FC(t,m,h),m}function xr(t,e,n,r,i,o,s,c){let u=Ce(),l=Tt(),h=xa(l.consts,o);return mk(u,l,t,e,n,r,i,h,void 0,s,c),xr}var yk=vk;function vk(t,e,n,r){return Ol(!0),e[Fe].createComment("")}var Sm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Sm||{}),Qa=new U(""),dT=!1,em=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Hw()&&(this.destroyRef=P(Ii,{optional:!0})??void 0,this.pendingTasks=P(qn,{optional:!0})??void 0)}emit(e){let n=re(null);try{super.next(e)}finally{re(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},He=em;function hT(t){let e,n;function r(){t=La;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function zD(t){return queueMicrotask(()=>t()),()=>{t=La}}var Am="isAngularZone",Xl=Am+"_ID",_k=0,Te=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new He(!1);onMicrotaskEmpty=new He(!1);onStable=new He(!1);onError=new He(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=dT}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,wk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Am)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ek,La,La);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Ek={};function Rm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ik(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){hT(()=>{t.callbackScheduled=!1,tm(t),t.isCheckStableRunning=!0,Rm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tm(t)}function wk(t){let e=()=>{Ik(t)},n=_k++;t._inner=t._inner.fork({name:"angular",properties:{[Am]:!0,[Xl]:n,[Xl+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(Dk(u))return r.invokeTask(o,s,c,u);try{return qD(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),GD(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return qD(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Ck(u)&&e(),GD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,tm(t),Rm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function tm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function GD(t){t._nesting--,Rm(t)}var ed=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new He;onMicrotaskEmpty=new He;onStable=new He;onError=new He;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Dk(t){return fT(t,"__ignore_ng_zone__")}function Ck(t){return fT(t,"__scheduler_tick__")}function fT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var pT=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})();var Nm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Mm=new U("");function Kn(t){return!!t&&typeof t.then=="function"}function hd(t){return!!t&&typeof t.subscribe=="function"}var gT=new U("");var Pm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(gT,{optional:!0})??[];injector=P(Xe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=et(this.injector,i);if(Kn(o))n.push(o);else if(hd(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fd=new U("");function mT(){up(()=>{let t="";throw new V(600,t)})}function yT(t){return t.isBoundToModule}var Tk=10;var Ai=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(St);afterRenderManager=P(pT);zonelessEnabled=P(Fl);rootEffectScheduler=P(Rg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ue;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(qn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(oe(n=>!n))}constructor(){P(Qa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P($e);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Xe.NULL){return this._injector.get(Te).run(()=>{we(10);let s=n instanceof ld;if(!this._injector.get(Pm).done){let S="";throw new V(405,S)}let u;s?u=n:u=this._injector.get(qa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=yT(u)?void 0:this._injector.get(Ti),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Mm,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),ja(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),we(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){we(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Sm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let n=re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,re(n),this.afterTick.next(),we(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ci,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Tk;)we(14),this.synchronizeOnce(),we(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ka(i))continue;let o=r&&!this.zonelessEnabled?0:1;Im(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ka(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ja(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(fd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ja(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ja(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kr(t,e,n){let r=Ce(),i=Nl();if(Wa(r,i,e)){let o=Tt(),s=Dg();LC(s,r,t,e,r[Fe],n)}return kr}function WD(t,e,n,r,i){pm(e,t,n,i?"class":"style",r)}function q(t,e,n,r){let i=Ce(),o=Tt(),s=kt+t,c=i[Fe],u=o.firstCreatePass?rT(s,o,i,e,VC,pg(),n,r):o.data[s],l=bk(o,i,u,c,e,t);i[s]=l;let h=bl(u);return Fo(u,!0),MC(c,l,u),!ym(u)&&kl()&&_m(o,i,l,u),(Xw()===0||h)&&za(l,i),eD(),h&&(fm(o,i,u),TC(o,u,i)),r!==null&&FC(i,u),q}function W(){let t=bt();mg()?sD():(t=t.parent,Fo(t,!1));let e=t;rD(e)&&iD(),tD();let n=Tt();return n.firstCreatePass&&iT(n,e),e.classesWithoutHost!=null&&HM(e)&&WD(n,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zM(e)&&WD(n,e,Ce(),e.stylesWithoutHost,!1),W}function Wo(t,e,n,r){return q(t,e,n,r),W(),Wo}var bk=(t,e,n,r,i,o)=>(Ol(!0),RC(r,i,vD()));function Ri(){return Ce()}var Ya="en-US";var Sk=Ya;function vT(t){typeof t=="string"&&(Sk=t.toLowerCase().replace(/_/g,"-"))}function De(t,e,n){let r=Ce(),i=Tt(),o=bt();return _T(i,r,r[Fe],o,t,e,n),De}function _T(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=xg(r,e,o),jx(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=xg(r,e,o),jD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=xg(r,e,o),jD(r,e,p,i,i,u)}}function sn(t=1){return yD(t)}function Vl(t,e){return t<<17|e<<2}function bi(t){return t>>17&32767}function Ak(t){return(t&2)==2}function Rk(t,e){return t&131071|e<<17}function nm(t){return t|2}function Bo(t){return(t&131068)>>2}function Fg(t,e){return t&-131069|e<<2}function Nk(t){return(t&1)===1}function rm(t){return t|1}function Mk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=bi(s),u=Bo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Po(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=bi(t[c+1]);t[r+1]=Vl(m,c),m!==0&&(t[m+1]=Fg(t[m+1],r)),t[c+1]=Rk(t[c+1],r)}else t[r+1]=Vl(c,0),c!==0&&(t[c+1]=Fg(t[c+1],r)),c=r;else t[r+1]=Vl(u,0),c===0?c=r:t[u+1]=Fg(t[u+1],r),u=r;l&&(t[r+1]=nm(t[r+1])),KD(t,h,r,!0),KD(t,h,r,!1),Pk(e,h,t,r,o),s=Vl(c,u),o?e.classBindings=s:e.styleBindings=s}function Pk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Po(o,e)>=0&&(n[r+1]=rm(n[r+1]))}function KD(t,e,n,r){let i=t[n+1],o=e===null,s=r?bi(i):Bo(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];xk(u,e)&&(c=!0,t[s+1]=r?rm(l):nm(l)),s=r?bi(l):Bo(l)}c&&(t[n+1]=r?nm(i):rm(i))}function xk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Po(t,e)>=0:!1}function pd(t,e){return kk(t,e,null,!0),pd}function kk(t,e,n,r){let i=Ce(),o=Tt(),s=uD(2);if(o.firstUpdatePass&&Fk(o,t,s,r),e!==Wn&&Wa(i,s,e)){let c=o.data[Ei()];Bk(o,c,i,i[Fe],t,i[s+1]=$k(e,n),r,s)}}function Ok(t,e){return e>=t.expandoStartIndex}function Fk(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ei()],s=Ok(t,n);Hk(o,r)&&e===null&&!s&&(e=!1),e=Lk(i,o,e,r),Mk(i,o,e,n,s,r)}}function Lk(t,e,n,r){let i=fD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lg(null,t,e,n,r),n=Ha(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Lg(i,t,e,n,r),o===null){let u=Vk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lg(null,t,e,u[1],r),u=Ha(u,e.attrs,r),jk(t,e,r,u))}else o=Uk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function Vk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Bo(r)!==0)return t[bi(r)]}function jk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[bi(i)]=r}function Uk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ha(r,s,n)}return Ha(r,e.attrs,n)}function Lg(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=Ha(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Ha(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Lw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Bk(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=Nk(l)?QD(u,e,n,i,Bo(l),s):void 0;if(!td(h)){td(o)||Ak(l)&&(o=QD(u,null,n,i,c,s));let p=ug(Ei(),n);ax(r,s,p,i,o)}}function QD(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Wn&&(m=p?Pt:void 0);let y=p?Dl(m,r):h===r?m:void 0;if(l&&!td(y)&&(y=Dl(u,r)),td(y)&&(c=y,s))return c;let S=t[i+1];i=s?bi(S):Bo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Dl(u,r))}return c}function td(t){return t!==void 0}function $k(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Dt(bC(t)))),t}function Hk(t,e){return(t.flags&(e?8:16))!==0}function te(t,e=""){let n=Ce(),r=Tt(),i=t+kt,o=r.firstCreatePass?Dm(r,i,1,e,null):r.data[i],s=zk(r,n,o,e,t);n[i]=s,kl()&&_m(r,n,s,o),Fo(o,!1)}var zk=(t,e,n,r,i)=>(Ol(!0),CP(e[Fe],r));function qk(t,e,n,r=""){return Wa(t,Nl(),n)?e+Kp(n)+r:Wn}function Ko(t){return En("",t),Ko}function En(t,e,n){let r=Ce(),i=qk(r,t,e,n);return i!==Wn&&Gk(r,Ei(),i),En}function Gk(t,e,n){let r=ug(e,t);TP(t[Fe],r,n)}function Or(t,e,n){bg(e)&&(e=e());let r=Ce(),i=Nl();if(Wa(r,i,e)){let o=Tt(),s=Dg();LC(s,r,t,e,r[Fe],n)}return Or}function Ni(t,e){let n=bg(t);return n&&t.set(e),n}function Fr(t,e){let n=Ce(),r=Tt(),i=bt();return _T(r,n,n[Fe],i,t,e),Fr}function Wk(t,e,n){let r=Tt();if(r.firstCreatePass){let i=gn(t);im(n,r.data,r.blueprint,i,!0),im(e,r.data,r.blueprint,i,!1)}}function im(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)im(t[o],e,n,r,i);else{let o=Tt(),s=Ce(),c=bt(),u=li(t)?t:Ze(t.provide),l=og(t),h=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(li(t)||!t.multi){let y=new Di(l,i,fe),S=jg(u,e,i?h:h+m,p);S===-1?(Bg(Gl(c,s),o,u),Vg(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=jg(u,e,h+m,p),S=jg(u,e,h,h+m),N=y>=0&&n[y],R=S>=0&&n[S];if(i&&!R||!i&&!N){Bg(Gl(c,s),o,u);let F=Yk(i?Qk:Kk,n.length,i,r,l);!i&&R&&(n[S].providerFactory=F),Vg(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(F),s.push(F)}else{let F=ET(n[i?S:y],l,!i&&r);Vg(o,t,y>-1?y:S,F)}!i&&r&&R&&n[S].componentProviders++}}}function Vg(t,e,n,r){let i=li(e),o=$w(e);if(i||o){let u=(o?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function ET(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Kk(t,e,n,r){return om(this.multi,[])}function Qk(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,c=Wl(n,n[ae],this.providerFactory.index,r);o=c.slice(0,s),om(i,o);for(let u=s;u<c.length;u++)o.push(c[u])}else o=[],om(i,o);return o}function om(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Yk(t,e,n,r,i){let o=new Di(t,n,fe);return o.multi=[],o.index=e,o.componentProviders=0,ET(o,i,r&&!n),o}function gd(t,e=[]){return n=>{n.providersResolver=(r,i)=>Wk(r,i?i(t):t,e)}}function Zk(t,e){let n=t[e];return n===Wn?void 0:n}function Jk(t,e,n,r,i,o){let s=e+n;return Wa(t,s,i)?Vx(t,s+1,o?r.call(o,i):r(i)):Zk(t,s+1)}function Mi(t,e){let n=Tt(),r,i=t+kt;n.firstCreatePass?(r=Xk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=_r(r.type,!0)),s,c=yt(fe);try{let u=ql(!1),l=o();return ql(u),lg(n,Ce(),i,l),l}finally{yt(c)}}function Xk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Pi(t,e,n){let r=t+kt,i=Ce(),o=Ww(i,r);return eO(i,r)?Jk(i,aD(),e,o.transform,n,o):o.transform(n)}function eO(t,e){return t[ae].data[e].pure}var nd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},xm=(()=>{class t{compileModuleSync(n){return new Jl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=tg(n),o=SC(i.declarations).reduce((s,c)=>{let u=Cr(c);return u&&s.push(new Uo(u)),s},[]);return new nd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var tO=(()=>{class t{zone=P(Te);changeDetectionScheduler=P(Ir);applicationRef=P(Ai);applicationErrorHandler=P(St);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Te(ie(O({},wT()),{scheduleInRootZone:n})),[{provide:Te,useFactory:t},{provide:Dr,multi:!0,useFactory:()=>{let r=P(tO,{optional:!0});return()=>r.initialize()}},{provide:Dr,multi:!0,useFactory:()=>{let r=P(nO);return()=>{r.initialize()}}},e===!0?{provide:Sg,useValue:!0}:[],{provide:Ag,useValue:n??dT},{provide:St,useFactory:()=>{let r=P(Te),i=P($e),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(fn),o.handleError(s))})}}}]}function wT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var nO=(()=>{class t{subscription=new Me;initialized=!1;zone=P(Te);pendingTasks=P(qn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var DT=(()=>{class t{applicationErrorHandler=P(St);appRef=P(Ai);taskService=P(qn);ngZone=P(Te);zonelessEnabled=P(Fl);tracing=P(Qa,{optional:!0});disableScheduling=P(Sg,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Ag,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ed||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zD:hT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rO(){return typeof $localize<"u"&&$localize.locale||Ya}var md=new U("",{providedIn:"root",factory:()=>P(md,{optional:!0,skipSelf:!0})||rO()});function Wt(t){return Aw(t)}function Za(t,e){return ju(t,e?.equal)}var CT=class{[ct];constructor(e){this[ct]=e}destroy(){this[ct].destroy()}};var AT=Symbol("InputSignalNode#UNSET"),EO=ie(O({},Uu),{transformFn:void 0,applyValueToInputSignal(t,e){mo(t,e)}});function RT(t,e){let n=Object.create(EO);n.value=t,n.transformFn=e?.transform;function r(){if(po(n),n.value===AT){let i=null;throw new V(-950,i)}return n.value}return r[ct]=n,r}var IO=new U("");IO.__NG_ELEMENT_ID__=t=>{let e=bt();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new V(204,!1)};function TT(t,e){return RT(t,e)}function wO(t){return RT(AT,t)}var NT=(TT.required=wO,TT);var Qo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},MT=new Qo("20.0.5");var km=new U(""),DO=new U("");function Ja(t){return!t.moduleRef}function CO(t){let e=Ja(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Te);return n.run(()=>{Ja(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(St),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ja(t)){let o=()=>e.destroy(),s=t.platformInjector.get(km);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(km);s.add(o),t.moduleRef.onDestroy(()=>{ja(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return bO(r,n,()=>{let o=e.get(Pm);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(md,Ya);if(vT(s||Ya),!e.get(DO,!0))return Ja(t)?e.get(Ai):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ja(t)){let u=e.get(Ai);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return TO?.(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}var TO;function bO(t,e,n){try{let r=n();return Kn(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var yd=null;function SO(t=[],e){return Xe.create({name:e,providers:[{provide:ba,useValue:"platform"},{provide:km,useValue:new Set([()=>yd=null])},...t]})}function AO(t=[]){if(yd)return yd;let e=SO(t);return yd=e,mT(),RO(e),e}function RO(t){let e=t.get(od,null);et(t,()=>{e?.forEach(n=>n())})}function jm(){return!1}var Zo=(()=>{class t{static __NG_ELEMENT_ID__=NO}return t})();function NO(t){return MO(bt(),Ce(),(t&16)===16)}function MO(t,e,n){if(Sr(t)&&!n){let r=Gt(t.index,e);return new Nr(r,r)}else if(t.type&175){let r=e[zt];return new Nr(r,e)}return null}var Om=class{constructor(){}supports(e){return Cm(e)}create(e){return new Fm(e)}},PO=(t,e)=>e,Fm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||PO}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<bT(r,i,o)?n:r,c=bT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;h<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Cm(e))throw new V(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,c),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,c)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,oT(e,c=>{s=this._trackByFn(i,c),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,c,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,c,s,i)),Object.is(n.item,c)||this._addIdentityChange(n,c)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Lm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new vd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Lm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Vm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},vd=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Vm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function ST(){return new Um([new Om])}var Um=(()=>{class t{factories;static \u0275prov=j({token:t,providedIn:"root",factory:ST});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||ST()),deps:[[t,new XD,new _n]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new V(901,!1)}}return t})();function PT(t){we(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=AO(r),o=[IT({}),{provide:Ir,useExisting:DT},ED,...n||[]],s=new $a({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return CO({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{we(9)}}function Bm(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var OT=null;function Kt(){return OT}function $m(t){OT??=t}var Xa=class{},Hm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(FT),providedIn:"platform"})}return t})();var FT=(()=>{class t extends Hm{_location;_history;_doc=P(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kt().getBaseHref(this._doc)}onPopState(n){let r=Kt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Kt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function LT(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function xT(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Lr(t){return t&&t[0]!=="?"?`?${t}`:t}var _d=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(jT),providedIn:"root"})}return t})(),VT=new U(""),jT=(()=>{class t extends _d{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return LT(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Lr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(z(Hm),z(VT,8))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Jo=(()=>{class t{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=OO(xT(kT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Lr(r))}normalize(n){return t.stripTrailingSlash(kO(this._basePath,kT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Lr;static joinWithSlash=LT;static stripTrailingSlash=xT;static \u0275fac=function(r){return new(r||t)(z(_d))};static \u0275prov=j({token:t,factory:()=>xO(),providedIn:"root"})}return t})();function xO(){return new Jo(z(_d))}function kO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function kT(t){return t.replace(/\/index.html$/,"")}function OO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Ed=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vr=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ed(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),UT(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);UT(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(fe(Go),fe(ud),fe(Um))};static \u0275dir=on({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function UT(t,e){t.context.$implicit=e.item}function FO(t,e){return new V(2100,!1)}var zm=class{createSubscription(e,n,r){return Wt(()=>e.subscribe({next:n,error:r}))}dispose(e){Wt(()=>e.unsubscribe())}},qm=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},LO=new qm,VO=new zm,xi=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(St);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(Kn(n))return LO;if(hd(n))return VO;throw FO(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(fe(Zo,16))};static \u0275pipe=bm({name:"async",type:t,pure:!1})}return t})();var jr=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pr({type:t});static \u0275inj=Bn({})}return t})();function Gm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ec=class{};var BT="browser",jO="server";function $T(t){return t===jO}var Dd=new U(""),Zm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(z(Dd),z(Te))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),tc=class{_doc;constructor(e){this._doc=e}manager},Id="ng-app-id";function HT(t){for(let e of t)e.remove()}function zT(t,e){let n=e.createElement("style");return n.textContent=t,n}function UO(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Id}="${e}"],link[${Id}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Id),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Qm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Jm=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=$T(o),UO(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,zT);r?.forEach(i=>this.addUsage(i,this.external,Qm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(HT(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])HT(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,zT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Qm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Id,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(z(tt),z(id),z(sd,8),z(Mr))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Km={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xm=/%COMP%/g;var GT="%COMP%",BO=`_nghost-${GT}`,$O=`_ngcontent-${GT}`,HO=!0,zO=new U("",{providedIn:"root",factory:()=>HO});function qO(t){return $O.replace(Xm,t)}function GO(t){return BO.replace(Xm,t)}function WT(t,e){return e.map(n=>n.replace(Xm,t))}var ey=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=c,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new nc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof wd?i.applyToHost(n):i instanceof rc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Gn.Emulated:o=new wd(u,l,r,this.appId,h,s,c,p,m);break;case Gn.ShadowDom:return new Ym(u,l,n,r,s,c,this.nonce,p,m);default:o=new rc(u,l,r,h,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(z(Zm),z(Jm),z(id),z(zO),z(tt),z(Mr),z(Te),z(sd),z(Qa,8))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),nc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Km[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Km[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Km[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(vn.DashCase|vn.Important)?e.style.setProperty(n,r,i&vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Kt().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function qT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ym=class extends nc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=WT(i.id,h);for(let m of h){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Qm(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rc=class extends nc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?WT(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wd=class extends rc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,c,u,l,h),this.contentAttr=qO(h),this.hostAttr=GO(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Cd=class t extends Xa{supportsDOMEvents=!0;static makeCurrent(){$m(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=WO();return n==null?null:KO(n)}resetBaseElement(){ic=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gm(document.cookie,e)}},ic=null;function WO(){return ic=ic||document.head.querySelector("base"),ic?ic.getAttribute("href"):null}function KO(t){return new URL(t,document.baseURI).pathname}var QO=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),QT=(()=>{class t extends tc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(z(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),KT=["alt","control","meta","shift"],YO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},YT=(()=>{class t extends tc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kt().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),KT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=YO[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),KT.forEach(s=>{if(s!==i){let c=ZO[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(z(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})();function ty(t,e){return PT(O({rootComponent:t},JO(e)))}function JO(t){return{appProviders:[...r1,...t?.providers??[]],platformProviders:n1}}function XO(){Cd.makeCurrent()}function e1(){return new fn}function t1(){return cm(document),document}var n1=[{provide:Mr,useValue:BT},{provide:od,useValue:XO,multi:!0},{provide:tt,useFactory:t1}];var r1=[{provide:ba,useValue:"root"},{provide:fn,useFactory:e1},{provide:Dd,useClass:QT,multi:!0,deps:[tt]},{provide:Dd,useClass:YT,multi:!0,deps:[tt]},ey,Jm,Zm,{provide:Ci,useExisting:ey},{provide:ec,useClass:QO},[]];var ZT=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(z(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ne="primary",_c=Symbol("RouteTitle"),sy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fi(t){return new sy(t)}function ob(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function o1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!In(t[n],e[n]))return!1;return!0}function In(t,e){let n=t?ay(t):void 0,r=e?ay(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!sb(t[i],e[i]))return!1;return!0}function ay(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function sb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function ab(t){return t.length>0?t[t.length-1]:null}function Zn(t){return Cp(t)?t:Kn(t)?Re(Promise.resolve(t)):Q(t)}var s1={exact:ub,subset:lb},cb={exact:a1,subset:c1,ignored:()=>!0};function JT(t,e,n){return s1[n.paths](t.root,e.root,n.matrixParams)&&cb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function a1(t,e){return In(t,e)}function ub(t,e,n){if(!ki(t.segments,e.segments)||!Sd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ub(t.children[r],e.children[r],n))return!1;return!0}function c1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>sb(t[n],e[n]))}function lb(t,e,n){return db(t,e,e.segments,n)}function db(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ki(i,n)||e.hasChildren()||!Sd(i,n,r))}else if(t.segments.length===n.length){if(!ki(t.segments,n)||!Sd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!lb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ki(t.segments,i)||!Sd(t.segments,i,r)||!t.children[ne]?!1:db(t.children[ne],e,o,r)}}function Sd(t,e,n){return e.every((r,i)=>cb[n](t[i].parameters,r.parameters))}var Dn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){return d1.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ad(this)}},Ur=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fi(this.parameters),this._parameterMap}toString(){return fb(this)}};function u1(t,e){return ki(t,e)&&t.every((n,r)=>In(n.parameters,e[r].parameters))}function ki(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function l1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var Ec=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new Li,providedIn:"root"})}return t})(),Li=class{parse(e){let n=new uy(e);return new Dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${oc(e.root,!0)}`,r=p1(e.queryParams),i=typeof e.fragment=="string"?`#${h1(e.fragment)}`:"";return`${n}${r}${i}`}},d1=new Li;function Ad(t){return t.segments.map(e=>fb(e)).join("/")}function oc(t,e){if(!t.hasChildren())return Ad(t);if(e){let n=t.children[ne]?oc(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ne&&r.push(`${i}:${oc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=l1(t,(r,i)=>i===ne?[oc(t.children[ne],!1)]:[`${i}:${oc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${Ad(t)}/${n[0]}`:`${Ad(t)}/(${n.join("//")})`}}function hb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Td(t){return hb(t).replace(/%3B/gi,";")}function h1(t){return encodeURI(t)}function cy(t){return hb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rd(t){return decodeURIComponent(t)}function XT(t){return Rd(t.replace(/\+/g,"%20"))}function fb(t){return`${cy(t.path)}${f1(t.parameters)}`}function f1(t){return Object.entries(t).map(([e,n])=>`;${cy(e)}=${cy(n)}`).join("")}function p1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Td(n)}=${Td(i)}`).join("&"):`${Td(n)}=${Td(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var g1=/^[^\/()?;#]+/;function ny(t){let e=t.match(g1);return e?e[0]:""}var m1=/^[^\/()?;=#]+/;function y1(t){let e=t.match(m1);return e?e[0]:""}var v1=/^[^=?&#]+/;function _1(t){let e=t.match(v1);return e?e[0]:""}var E1=/^[^&#]+/;function I1(t){let e=t.match(E1);return e?e[0]:""}var uy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new me(e,n)),r}parseSegment(){let e=ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new Ur(Rd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=y1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ny(this.remaining);i&&(r=i,this.capture(r))}e[Rd(n)]=Rd(r)}parseQueryParam(e){let n=_1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=I1(this.remaining);s&&(r=s,this.capture(r))}let i=XT(n),o=XT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ne);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ne]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function pb(t){return t.segments.length>0?new me([],{[ne]:t}):t}function gb(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=gb(i);if(r===ne&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return w1(n)}function w1(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new me(t.segments.concat(e.segments),e.children)}return t}function rs(t){return t instanceof Dn}function mb(t,e,n=null,r=null){let i=yb(t);return vb(i,e,n,r)}function yb(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new me(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=pb(r);return e??i}function vb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ry(i,i,i,n,r);let o=D1(e);if(o.toRoot())return ry(i,i,new me([],{}),n,r);let s=C1(o,i,t),c=s.processChildren?ac(s.segmentGroup,s.index,o.commands):Eb(s.segmentGroup,s.index,o.commands);return ry(i,s.segmentGroup,c,n,r)}function Nd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function lc(t){return typeof t=="object"&&t!=null&&t.outlets}function ry(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=_b(t,e,n);let c=pb(gb(s));return new Dn(c,o,i)}function _b(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=_b(o,e,n)}),new me(t.segments,r)}var Md=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Nd(r[0]))throw new V(4003,!1);let i=r.find(lc);if(i&&i!==ab(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function D1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Md(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new Md(n,e,r)}var ts=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function C1(t,e,n){if(t.isAbsolute)return new ts(e,!0,0);if(!n)return new ts(e,!1,NaN);if(n.parent===null)return new ts(n,!0,0);let r=Nd(t.commands[0])?0:1,i=n.segments.length-1+r;return T1(n,i,t.numberOfDoubleDots)}function T1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new ts(r,!1,i-o)}function b1(t){return lc(t[0])?t[0].outlets:{[ne]:t}}function Eb(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return ac(t,e,n);let r=S1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[ne]=new me(t.segments.slice(r.pathIndex),t.children),ac(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?ly(t,e,n):r.match?ac(t,0,i):ly(t,e,n)}function ac(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=b1(n),i={};if(Object.keys(r).some(o=>o!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let o=ac(t.children[ne],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Eb(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function S1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(lc(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!tb(u,l,s))return o;r+=2}else{if(!tb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ly(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(lc(o)){let u=A1(o.outlets);return new me(r,u)}if(i===0&&Nd(n[0])){let u=t.segments[e];r.push(new Ur(u.path,eb(n[0]))),i++;continue}let s=lc(o)?o.outlets[ne]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&Nd(c)?(r.push(new Ur(s,eb(c))),i+=2):(r.push(new Ur(s,{})),i++)}return new me(r,{})}function A1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ly(new me([],{}),0,r))}),e}function eb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function tb(t,e,n){return t==n.path&&In(e,n.parameters)}var cc="imperative",Ge=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ge||{}),Ft=class{id;url;constructor(e,n){this.id=e,this.url=n}},Vi=class extends Ft{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qn=class extends Ft{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(_t||{}),dc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(dc||{}),wn=class extends Ft{reason;code;type=Ge.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yn=class extends Ft{reason;code;type=Ge.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},is=class extends Ft{error;target;type=Ge.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hc=class extends Ft{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class extends Ft{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xd=class extends Ft{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kd=class extends Ft{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Od=class extends Ft{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fd=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ld=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vd=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jd=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ud=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bd=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fc=class{},os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function R1(t){return!(t instanceof fc)&&!(t instanceof os)}function N1(t,e){return t.providers&&!t._injector&&(t._injector=Ka(t.providers,e,`Route: ${t.path}`)),t._injector??e}function an(t){return t.outlet||ne}function M1(t,e){let n=t.filter(r=>an(r)===e);return n.push(...t.filter(r=>an(r)!==e)),n}function Ic(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var $d=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ic(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new cs(this.rootInjector)}},cs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new $d(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(z($e))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=hy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hy(e,this._root).map(n=>n.value)}};function dy(t,e){if(t===e.value)return e;for(let n of e.children){let r=dy(t,n);if(r)return r}return null}function hy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=hy(t,n);if(r.length)return r.unshift(e),r}return[]}var Ot=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function es(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var pc=class extends Hd{snapshot;constructor(e,n){super(e),this.snapshot=n,Ey(this,e)}toString(){return this.snapshot.toString()}};function Ib(t){let e=P1(t),n=new Ye([new Ur("",{})]),r=new Ye({}),i=new Ye({}),o=new Ye({}),s=new Ye(""),c=new Cn(n,r,o,s,i,ne,t,e.root);return c.snapshot=e.root,new pc(new Ot(c,[]),e)}function P1(t){let e={},n={},r={},i="",o=new Oi([],e,r,i,n,ne,t,null,{});return new gc("",new Ot(o,[]))}var Cn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(l=>l[_c]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),t.params),data:O(O({},e.data),t.data),resolve:O(O(O(O({},t.data),e.data),i?.data),t._resolvedData)}:r={params:O({},t.params),data:O({},t.data),resolve:O(O({},t.data),t._resolvedData??{})},i&&Db(i)&&(r.resolve[_c]=i.title),r}var Oi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[_c]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},gc=class extends Hd{url;constructor(e,n){super(n),this.url=e,Ey(this,n)}toString(){return wb(this._root)}};function Ey(t,e){e.value._routerState=t,e.children.forEach(n=>Ey(t,n))}function wb(t){let e=t.children.length>0?` { ${t.children.map(wb).join(", ")} } `:"";return`${t.value}${e}`}function iy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,In(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),In(e.params,n.params)||t.paramsSubject.next(n.params),o1(e.url,n.url)||t.urlSubject.next(n.url),In(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function fy(t,e){let n=In(t.params,e.params)&&u1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||fy(t.parent,e.parent))}function Db(t){return typeof t.title=="string"||t.title===null}var Cb=new U(""),wc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ne;activateEvents=new He;deactivateEvents=new He;attachEvents=new He;detachEvents=new He;routerOutletData=NT(void 0);parentContexts=P(cs);location=P(Go);changeDetector=P(Zo);inputBinder=P(Kd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new py(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=on({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ho]})}return t})(),py=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Cn?this.route:e===cs?this.childContexts:e===Cb?this.outletData:this.parent.get(e,n)}},Kd=new U("");var Iy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=vt({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Wo(0,"router-outlet")},dependencies:[wc],encapsulation:2})}return t})();function wy(t){let e=t.children&&t.children.map(wy),n=e?ie(O({},t),{children:e}):O({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=Iy),n}function x1(t,e,n){let r=mc(t,e._root,n?n._root:void 0);return new pc(r,e)}function mc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=k1(t,e,n);return new Ot(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>mc(t,c)),s}}let r=O1(e.value),i=e.children.map(o=>mc(t,o));return new Ot(r,i)}}function k1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return mc(t,r,i);return mc(t,r)})}function O1(t){return new Cn(new Ye(t.url),new Ye(t.params),new Ye(t.queryParams),new Ye(t.fragment),new Ye(t.data),t.outlet,t.component,t)}var ss=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Tb="ngNavigationCancelingError";function qd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bb(!1,_t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function bb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Tb]=!0,n.cancellationCode=e,n}function F1(t){return Sb(t)&&rs(t.url)}function Sb(t){return!!t&&t[Tb]}var L1=(t,e,n,r)=>oe(i=>(new gy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),gy=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),iy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=es(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new jd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(iy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),iy(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Gd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ns=class{component;route;constructor(e,n){this.component=e,this.route=n}};function V1(t,e,n){let r=t._root,i=e?e._root:null;return sc(r,i,n,[r.value])}function j1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function us(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!$p(t)?t:e.get(t):r}function sc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=es(e);return t.children.forEach(s=>{U1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>uc(c,n.getContext(s),i)),i}function U1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=B1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Gd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?sc(t,e,c?c.children:null,r,i):sc(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ns(c.outlet.component,s))}else s&&uc(e,c,i),i.canActivateChecks.push(new Gd(r)),o.component?sc(t,null,c?c.children:null,r,i):sc(t,null,n,r,i);return i}function B1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ki(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ki(t.url,e.url)||!In(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fy(t,e)||!In(t.queryParams,e.queryParams);case"paramsChange":default:return!fy(t,e)}}function uc(t,e,n){let r=es(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?uc(s,e.children.getContext(o),n):uc(s,null,n):uc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ns(e.outlet.component,i)):n.canDeactivateChecks.push(new ns(null,i)):n.canDeactivateChecks.push(new ns(null,i))}function Dc(t){return typeof t=="function"}function $1(t){return typeof t=="boolean"}function H1(t){return t&&Dc(t.canLoad)}function z1(t){return t&&Dc(t.canActivate)}function q1(t){return t&&Dc(t.canActivateChild)}function G1(t){return t&&Dc(t.canDeactivate)}function W1(t){return t&&Dc(t.canMatch)}function Ab(t){return t instanceof Ln||t?.name==="EmptyError"}var bd=Symbol("INITIAL_VALUE");function as(){return Bt(t=>ll(t.map(e=>e.pipe(Vn(1),fl(bd)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===bd)return bd;if(n===!1||K1(n))return n}return!0}),Mt(e=>e!==bd),Vn(1)))}function K1(t){return rs(t)||t instanceof ss}function Q1(t,e){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Q(ie(O({},n),{guardsResult:!0})):Y1(s,r,i,t).pipe(Be(c=>c&&$1(c)?Z1(r,o,t,e):Q(c)),oe(c=>ie(O({},n),{guardsResult:c})))})}function Y1(t,e,n,r){return Re(t).pipe(Be(i=>nF(i.component,i.route,n,e,r)),jn(i=>i!==!0,!0))}function Z1(t,e,n,r){return Re(e).pipe(Ro(i=>Ao(X1(i.route.parent,r),J1(i.route,r),tF(t,i.path,n),eF(t,i.route,n))),jn(i=>i!==!0,!0))}function J1(t,e){return t!==null&&e&&e(new Ud(t)),Q(!0)}function X1(t,e){return t!==null&&e&&e(new Vd(t)),Q(!0)}function eF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>_a(()=>{let s=Ic(e)??n,c=us(o,s),u=z1(c)?c.canActivate(e,t):et(s,()=>c(e,t));return Zn(u).pipe(jn())}));return Q(i).pipe(as())}function tF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>j1(s)).filter(s=>s!==null).map(s=>_a(()=>{let c=s.guards.map(u=>{let l=Ic(s.node)??n,h=us(u,l),p=q1(h)?h.canActivateChild(r,t):et(l,()=>h(r,t));return Zn(p).pipe(jn())});return Q(c).pipe(as())}));return Q(o).pipe(as())}function nF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(c=>{let u=Ic(e)??i,l=us(c,u),h=G1(l)?l.canDeactivate(t,e,n,r):et(u,()=>l(t,e,n,r));return Zn(h).pipe(jn())});return Q(s).pipe(as())}function rF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let c=us(s,t),u=H1(c)?c.canLoad(e,n):et(t,()=>c(e,n));return Zn(u)});return Q(o).pipe(as(),Rb(r))}function Rb(t){return qu(qe(e=>{if(typeof e!="boolean")throw qd(t,e)}),oe(e=>e===!0))}function iF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let c=us(s,t),u=W1(c)?c.canMatch(e,n):et(t,()=>c(e,n));return Zn(u)});return Q(o).pipe(as(),Rb(r))}var yc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},vc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Xo(t){return So(new yc(t))}function oF(t){return So(new V(4e3,!1))}function sF(t){return So(bb(!1,_t.GuardRejected))}var my=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[ne])return oF(`${e.redirectTo}`);i=i.children[ne]}}applyRedirectCommands(e,n,r,i,o){return aF(n,i,o).pipe(oe(s=>{if(s instanceof Dn)throw new vc(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new vc(c);return c}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function aF(t,e,n){if(typeof t=="string")return Q(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return Zn(et(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var yy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cF(t,e,n,r,i){let o=Nb(t,e,n);return o.matched?(r=N1(e,r),iF(r,e,n,i).pipe(oe(s=>s===!0?o:O({},yy)))):Q(o)}function Nb(t,e,n){if(e.path==="**")return uF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?O({},yy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ob)(n,t,e);if(!i)return O({},yy);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uF(t){return{matched:!0,parameters:t.length>0?ab(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function nb(t,e,n,r){return n.length>0&&hF(t,n,r)?{segmentGroup:new me(e,dF(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&fF(t,n,r)?{segmentGroup:new me(t.segments,lF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function lF(t,e,n,r){let i={};for(let o of n)if(Qd(t,e,o)&&!r[an(o)]){let s=new me([],{});i[an(o)]=s}return O(O({},r),i)}function dF(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&an(r)!==ne){let i=new me([],{});n[an(r)]=i}return n}function hF(t,e,n){return n.some(r=>Qd(t,e,r)&&an(r)!==ne)}function fF(t,e,n){return n.some(r=>Qd(t,e,r))}function Qd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pF(t,e,n){return e.length===0&&!t.children[n]}var vy=class{};function gF(t,e,n,r,i,o,s="emptyOnly"){return new _y(t,e,n,r,i,s,o).recognize()}var mF=31,_y=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new my(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=nb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:n,rootSnapshot:r})=>{let i=new Ot(r,n),o=new gc("",i),s=mb(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Oi([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ne,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ne,n).pipe(oe(r=>({children:r,rootSnapshot:n})),yr(r=>{if(r instanceof vc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof yc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof Ot?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(Ro(s=>{let c=r.children[s],u=M1(n,s);return this.processSegmentGroup(e,u,c,s,i)}),hl((s,c)=>(s.push(...c),s)),vr(null),bp(),Be(s=>{if(s===null)return Xo(r);let c=Mb(s);return yF(c),Q(c)}))}processSegment(e,n,r,i,o,s,c){return Re(n).pipe(Ro(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c).pipe(yr(l=>{if(l instanceof yc)return Q(null);throw l}))),jn(u=>!!u),yr(u=>{if(Ab(u))return pF(r,i,o)?Q(new vy):Xo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,c,u){return an(r)!==s&&(s===ne||!Qd(i,o,r))?Xo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Xo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=Nb(n,i,o);if(!u)return Xo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mF&&(this.allowRedirects=!1));let y=new Oi(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,rb(i),an(i),i.component??i._loadedComponent??null,i,ib(i)),S=zd(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Bt(R=>this.applyRedirects.lineralizeSegments(i,R)),Be(R=>this.processSegment(e,r,n,R.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let c=cF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Bt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Bt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new Oi(m,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,rb(r),an(r),r.component??r._loadedComponent??null,r,ib(r)),N=zd(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:F}=nb(n,m,y,l);if(F.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(oe(K=>new Ot(S,K)));if(l.length===0&&F.length===0)return Q(new Ot(S,[]));let G=an(r)===o;return this.processSegment(h,l,R,F,G?ne:o,!0,S).pipe(oe(K=>new Ot(S,K instanceof Ot?[K]:[])))}))):Xo(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):rF(e,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,n).pipe(qe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):sF(n))):Q({routes:[],injector:e})}};function yF(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function vF(t){let e=t.value.routeConfig;return e&&e.path===""}function Mb(t){let e=[],n=new Set;for(let r of t){if(!vF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Mb(r.children);e.push(new Ot(r.value,i))}return e.filter(r=>!n.has(r))}function rb(t){return t.data||{}}function ib(t){return t.resolve||{}}function _F(t,e,n,r,i,o){return Be(s=>gF(t,e,n,r,s.extractedUrl,i,o).pipe(oe(({state:c,tree:u})=>ie(O({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function EF(t,e){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Pb(u))s.add(l);let c=0;return Re(s).pipe(Ro(u=>o.has(u)?IF(u,r,t,e):(u.data=zd(u,u.parent,t).resolve,Q(void 0))),qe(()=>c++),No(1),Be(u=>c===s.size?Q(n):It))})}function Pb(t){let e=t.children.map(n=>Pb(n)).flat();return[t,...e]}function IF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Db(i)&&(o[_c]=i.title),_a(()=>(t.data=zd(t,t.parent,n).resolve,wF(o,t,e,r).pipe(oe(s=>(t._resolvedData=s,t.data=O(O({},t.data),s),null)))))}function wF(t,e,n,r){let i=ay(t);if(i.length===0)return Q({});let o={};return Re(i).pipe(Be(s=>DF(t[s],e,n,r).pipe(jn(),qe(c=>{if(c instanceof ss)throw qd(new Li,c);o[s]=c}))),No(1),oe(()=>o),yr(s=>Ab(s)?It:So(s)))}function DF(t,e,n,r){let i=Ic(e)??r,o=us(t,i),s=o.resolve?o.resolve(e,n):et(i,()=>o(e,n));return Zn(s)}function oy(t){return Bt(e=>{let n=t(e);return n?Re(n).pipe(oe(()=>e)):Q(e)})}var Dy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[_c]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(xb),providedIn:"root"})}return t})(),xb=(()=>{class t extends Dy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(z(ZT))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cc=new U("",{providedIn:"root",factory:()=>({})}),Tc=new U(""),kb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(xm);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Zn(n.loadComponent()).pipe(oe(Fb),qe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Ea(()=>{this.componentLoaders.delete(n)})),i=new Do(r,()=>new Ue).pipe(wo());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Ob(r,this.compiler,n,this.onLoadEndListener).pipe(Ea(()=>{this.childrenLoaders.delete(r)})),s=new Do(o,()=>new Ue).pipe(wo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ob(t,e,n,r){return Zn(t.loadChildren()).pipe(oe(Fb),Be(i=>i instanceof dd||Array.isArray(i)?Q(i):Re(e.compileModuleAsync(i))),oe(i=>{r&&r(t);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(n).injector,s=o.get(Tc,[],{optional:!0,self:!0}).flat()),{routes:s.map(wy),injector:o}}))}function CF(t){return t&&typeof t=="object"&&"default"in t}function Fb(t){return CF(t)?t.default:t}var Yd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(TF),providedIn:"root"})}return t})(),TF=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lb=new U("");var Vb=new U(""),jb=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortWithErrorSubject=new Ue;configLoader=P(kb);environmentInjector=P($e);destroyRef=P(Ii);urlSerializer=P(Ec);rootContexts=P(cs);location=P(Jo);inputBindingEnabled=P(Kd,{optional:!0})!==null;titleStrategy=P(Dy);options=P(Cc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Yd);createViewTransition=P(Lb,{optional:!0});navigationErrorHandler=P(Vb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Fd(i)),r=i=>this.events.next(new Ld(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ie(O({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new Ye(null),this.transitions.pipe(Mt(r=>r!==null),Bt(r=>{let i=!1;return Q(r).pipe(Bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),It;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ie(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&c!=="reload"){let u="";return this.events.next(new Yn(o.id,this.urlSerializer.serialize(o.rawUrl),u,dc.IgnoredSameUrlNavigation)),o.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Q(o).pipe(Bt(u=>(this.events.next(new Vi(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?It:Promise.resolve(u))),_F(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ie(O({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new hc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Vi(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=Ib(this.rootComponentType).snapshot;return this.currentTransition=r=ie(O({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:ie(O({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Q(r)}else{let u="";return this.events.next(new Yn(o.id,this.urlSerializer.serialize(o.extractedUrl),u,dc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),It}}),qe(o=>{let s=new Pd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),oe(o=>(this.currentTransition=r=ie(O({},o),{guards:V1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Q1(this.environmentInjector,o=>this.events.next(o)),qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw qd(this.urlSerializer,o.guardsResult);let s=new xd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Mt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",_t.GuardRejected),!1)),oy(o=>{if(o.guards.canActivateChecks.length!==0)return Q(o).pipe(qe(s=>{let c=new kd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Bt(s=>{let c=!1;return Q(s).pipe(EF(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",_t.NoDataFromResolver)}}))}),qe(s=>{let c=new Od(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),oy(o=>{let s=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(qe(l=>{c.component=l}),oe(()=>{})));for(let l of c.children)u.push(...s(l));return u};return ll(s(o.targetSnapshot.root)).pipe(vr(null),Vn(1))}),oy(()=>this.afterPreactivation()),Bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?Re(c).pipe(oe(()=>r)):Q(r)}),oe(o=>{let s=x1(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ie(O({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),qe(()=>{this.events.next(new fc)}),L1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Vn(1),pl(new ee(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(Mt(()=>!i&&!r.targetRouterState),qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",_t.Aborted)}))),qe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),pl(this.transitionAbortWithErrorSubject.pipe(qe(o=>{throw o}))),Ea(()=>{i||this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),yr(o=>{if(this.destroyed)return r.resolve(!1),It;if(i=!0,Sb(o))this.events.next(new wn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),F1(o)?this.events.next(new os(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new is(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=et(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof ss){let{message:u,cancellationCode:l}=qd(this.urlSerializer,c);this.events.next(new wn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new os(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return It}))}))}cancelNavigationTransition(n,r,i){let o=new wn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bF(t){return t!==cc}var Ub=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(SF),providedIn:"root"})}return t})(),Wd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},SF=(()=>{class t extends Wd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zo(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bb=(()=>{class t{urlSerializer=P(Ec);options=P(Cc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Jo);urlHandlingStrategy=P(Yd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Ib(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>P(AF),providedIn:"root"})}return t})(),AF=(()=>{class t extends Bb{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Vi?this.updateStateMemento():n instanceof Yn?this.commitTransition(r):n instanceof hc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof wn&&n.code!==_t.SupersededByNewNavigation&&n.code!==_t.Redirect?this.restoreHistory(r):n instanceof is?this.restoreHistory(r,!0):n instanceof Qn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zo(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cy(t,e){t.events.pipe(Mt(n=>n instanceof Qn||n instanceof wn||n instanceof is||n instanceof Yn),oe(n=>n instanceof Qn||n instanceof Yn?0:(n instanceof wn?n.code===_t.Redirect||n.code===_t.SupersededByNewNavigation:!1)?2:1),Mt(n=>n!==2),Vn(1)).subscribe(()=>{e()})}var RF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},At=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Nm);stateManager=P(Bb);options=P(Cc,{optional:!0})||{};pendingTasks=P(qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(jb);urlSerializer=P(Ec);location=P(Jo);urlHandlingStrategy=P(Yd);injector=P($e);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(Ub);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Tc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Kd,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Me;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof wn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qn)this.navigated=!0;else if(r instanceof os){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bF(i.source)},s);this.scheduleNavigation(c,cc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}R1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),cc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.injector.get(St)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(wy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=yb(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return vb(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=rs(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,cc,null,r)}navigate(n,r={skipLocationChange:!1}){return MF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=O({},RF):r===!1?i=O({},NF):i=r,rs(n))return JT(this.currentUrlTree,n,i);let o=this.parseUrl(n);return JT(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return Cy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var xF=new U("");function Ty(t,...e){return Tr([{provide:Tc,multi:!0,useValue:t},[],{provide:Cn,useFactory:kF,deps:[At]},{provide:fd,multi:!0,useFactory:OF},e.map(n=>n.\u0275providers)])}function kF(t){return t.routerState.root}function OF(){let t=P(Xe);return e=>{let n=t.get(Ai);if(e!==n.components[0])return;let r=t.get(At),i=t.get(FF);t.get(LF)===1&&r.initialNavigation(),t.get(VF,null,{optional:!0})?.setUpPreloading(),t.get(xF,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FF=new U("",{factory:()=>new Ue}),LF=new U("",{providedIn:"root",factory:()=>1});var VF=new U("");var Zd=class t{router=P(At);onTap(){this.router.navigate(["menu"],{replaceUrl:!0})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=vt({type:t,selectors:[["app-starting-page"]],decls:29,vars:0,consts:[[1,"container",3,"click"],[1,"prompt"],[1,"typewriter"],[1,"cursor"]],template:function(n,r){n&1&&(q(0,"div",0),De("click",function(){return r.onTap()}),q(1,"p")(2,"span",1),te(3,">"),W(),te(4," hello Asya"),W(),q(5,"p")(6,"span",1),te(7,">"),W(),te(8," dumping all thoughts here:"),W(),q(9,"p"),te(10," - movies"),W(),q(11,"p"),te(12," - drugs"),W(),q(13,"p"),te(14," - places"),W(),q(15,"p")(16,"span",1),te(17,">"),W(),te(18," you name it."),W(),q(19,"p")(20,"span",1),te(21,">"),W(),te(22," ready to roll?"),W(),q(23,"p",2)(24,"span",1),te(25,">"),W(),te(26," tap anywhere to start"),q(27,"span",3),te(28,"|"),W()()())},styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;height:100vh;padding:2rem;background-color:#000;color:#0f0;font-family:Roboto Mono,monospace;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}p[_ngcontent-%COMP%]{margin:.25rem 0;white-space:pre-wrap}.prompt[_ngcontent-%COMP%]{color:#0f0;font-weight:700}.cursor[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;animation:_ngcontent-%COMP%_blink 1.2s steps(2,start) infinite;color:#0f0}@keyframes _ngcontent-%COMP%_blink{0%,50%{opacity:1}51%,to{opacity:0}}.typewriter[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;border-right:.15em solid transparent;display:inline-block;animation:_ngcontent-%COMP%_typing 4s steps(30,end) forwards;width:25ch}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:25ch}}']})};var Jd=class t{constructor(e){this.router=e}navigateTo(e){this.router.navigate([e])}restart(){this.navigateTo("")}static \u0275fac=function(n){return new(n||t)(fe(At))};static \u0275cmp=vt({type:t,selectors:[["app-menu-page"]],decls:10,vars:0,consts:[[1,"restart-button",3,"click"],[1,"container",3,"click"],[1,"button-group"],[3,"click"]],template:function(n,r){n&1&&(q(0,"button",0),De("click",function(){return r.restart()}),te(1,"Restart"),W(),q(2,"div",1),De("click",function(o){return o.stopPropagation()}),q(3,"h1"),te(4,"Random Riot"),W(),q(5,"div",2)(6,"button",3),De("click",function(){return r.navigateTo("notes")}),te(7,"Notes"),W(),q(8,"button",3),De("click",function(){return r.navigateTo("categories")}),te(9,"Categories"),W()()())},styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:844px;width:390px;background-color:#000;font-family:Roboto Mono,monospace;color:#0f0;-webkit-user-select:none;user-select:none;padding:2rem;box-sizing:border-box}.container[_ngcontent-%COMP%]{text-align:center;width:100%;max-width:360px}button[_ngcontent-%COMP%]{background-color:transparent;border:1.5px solid #0a0;color:#0a0;font-family:Roboto Mono,monospace;font-size:1.1rem;padding:.4rem 1.2rem;cursor:pointer;transition:background-color .25s ease,color .25s ease;text-transform:uppercase;border-radius:4px;box-shadow:none;-webkit-user-select:none;user-select:none;white-space:nowrap}button[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:focus{background-color:#0a0;color:#000;outline:none}.left-buttons[_ngcontent-%COMP%]{display:flex;gap:1.2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.restart-button[_ngcontent-%COMP%]{background-color:transparent;border:1.5px solid #0a0;color:#0a0;font-family:Roboto Mono,monospace;font-size:1.1rem;padding:.4rem 1.2rem;cursor:pointer;transition:background-color .25s ease,color .25s ease;text-transform:uppercase;border-radius:4px;box-shadow:none;-webkit-user-select:none;user-select:none;white-space:nowrap}[_nghost-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;height:844px;width:390px;background-color:#000;font-family:Roboto Mono,monospace;color:#0f0;-webkit-user-select:none;user-select:none;padding:2rem;box-sizing:border-box}.container[_ngcontent-%COMP%]{text-align:center;width:100%;max-width:360px;position:relative}.restart-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background-color:transparent;border:1.5px solid #0a0;color:#0a0;font-family:Roboto Mono,monospace;font-size:1.1rem;padding:.4rem 1.2rem;cursor:pointer;transition:background-color .25s ease,color .25s ease;text-transform:uppercase;border-radius:4px;box-shadow:none;-webkit-user-select:none;user-select:none;white-space:nowrap}.restart-button[_ngcontent-%COMP%]:hover, .restart-button[_ngcontent-%COMP%]:focus{background-color:#0a0;color:#000;outline:none}h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:2rem;letter-spacing:.2em;color:#0a0;text-shadow:0 0 4px #0a0}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.2rem}']})};var Qb=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(fe(Ga),fe(qo))};static \u0275dir=on({type:t})}return t})(),UF=(()=>{class t extends Qb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zo(t)))(i||t)}})();static \u0275dir=on({type:t,features:[Si]})}return t})(),Yb=new U("");var BF={provide:Yb,useExisting:hi(()=>Br),multi:!0};function $F(){let t=Kt()?Kt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var HF=new U(""),Br=(()=>{class t extends Qb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!$F())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(fe(Ga),fe(qo),fe(HF,8))};static \u0275dir=on({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&De("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[gd([BF]),Si]})}return t})();var zF=new U(""),qF=new U("");function Zb(t){return t!=null}function Jb(t){return Kn(t)?Re(t):t}function Xb(t){let e={};return t.forEach(n=>{e=n!=null?O(O({},e),n):e}),Object.keys(e).length===0?null:e}function e0(t,e){return e.map(n=>n(t))}function GF(t){return!t.validate}function t0(t){return t.map(e=>GF(e)?e:n=>e.validate(n))}function WF(t){if(!t)return null;let e=t.filter(Zb);return e.length==0?null:function(n){return Xb(e0(n,e))}}function n0(t){return t!=null?WF(t0(t)):null}function KF(t){if(!t)return null;let e=t.filter(Zb);return e.length==0?null:function(n){let r=e0(n,e).map(Jb);return Tp(r).pipe(oe(Xb))}}function r0(t){return t!=null?KF(t0(t)):null}function $b(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function QF(t){return t._rawValidators}function YF(t){return t._rawAsyncValidators}function Sy(t){return t?Array.isArray(t)?t:[t]:[]}function eh(t,e){return Array.isArray(t)?t.includes(e):t===e}function Hb(t,e){let n=Sy(e);return Sy(t).forEach(i=>{eh(n,i)||n.push(i)}),n}function zb(t,e){return Sy(e).filter(n=>!eh(t,n))}var th=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=n0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=r0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ay=class extends th{name;get formDirective(){return null}get path(){return null}},Nc=class extends th{_parent=null;name=null;valueAccessor=null},Ry=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ZF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YJ=ie(O({},ZF),{"[class.ng-submitted]":"isSubmitted"}),fs=(()=>{class t extends Ry{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(fe(Nc,2))};static \u0275dir=on({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Si]})}return t})();var bc="VALID",Xd="INVALID",ls="PENDING",Sc="DISABLED",hs=class{},nh=class extends hs{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Ac=class extends hs{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Rc=class extends hs{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},ds=class extends hs{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function JF(t){return(rh(t)?t.validators:t)||null}function XF(t){return Array.isArray(t)?n0(t):t||null}function eL(t,e){return(rh(e)?e.asyncValidators:t)||null}function tL(t){return Array.isArray(t)?r0(t):t||null}function rh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Ny=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Wt(this.statusReactive)}set status(e){Wt(()=>this.statusReactive.set(e))}_status=Za(()=>this.statusReactive());statusReactive=Rr(void 0);get valid(){return this.status===bc}get invalid(){return this.status===Xd}get pending(){return this.status==ls}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}errors;get pristine(){return Wt(this.pristineReactive)}set pristine(e){Wt(()=>this.pristineReactive.set(e))}_pristine=Za(()=>this.pristineReactive());pristineReactive=Rr(!0);get dirty(){return!this.pristine}get touched(){return Wt(this.touchedReactive)}set touched(e){Wt(()=>this.touchedReactive.set(e))}_touched=Za(()=>this.touchedReactive());touchedReactive=Rr(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Hb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Hb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zb(e,this._rawAsyncValidators))}hasValidator(e){return eh(this._rawValidators,e)}hasAsyncValidator(e){return eh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Rc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Rc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(O({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ac(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ac(!0,r))}markAsPending(e={}){this.status=ls;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ds(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(O({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(i=>{i.disable(ie(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nh(this.value,r)),this._events.next(new ds(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bc,this._forEachChild(r=>{r.enable(ie(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(O({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bc||this.status===ls)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nh(this.value,n)),this._events.next(new ds(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(O({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ls,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Jb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ds(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?Xd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ls)?ls:this._anyControlsHaveStatus(Xd)?Xd:bc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Ac(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Rc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=XF(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tL(this._rawAsyncValidators)}};var i0=new U("",{providedIn:"root",factory:()=>My}),My="always";function nL(t,e){return[...e.path,t]}function rL(t,e,n=My){oL(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),sL(t,e),cL(t,e),aL(t,e),iL(t,e)}function qb(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function iL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function oL(t,e){let n=QF(t);e.validator!==null?t.setValidators($b(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=YF(t);e.asyncValidator!==null?t.setAsyncValidators($b(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();qb(e._rawValidators,i),qb(e._rawAsyncValidators,i)}function sL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&o0(t,e)})}function aL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&o0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function o0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function cL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function uL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function lL(t){return Object.getPrototypeOf(t.constructor)===UF}function dL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Br?n=o:lL(o)?r=o:i=o}),i||r||n||null}function Gb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Wb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var hL=class extends Ny{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(JF(n),eL(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Wb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Wb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var fL={provide:Nc,useExisting:hi(()=>ji)},Kb=Promise.resolve(),ji=(()=>{class t extends Nc{_changeDetectorRef;callSetDisabledState;control=new hL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new He;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=dL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),uL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Kb.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Bm(r);Kb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?nL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(fe(Ay,9),fe(zF,10),fe(qF,10),fe(Yb,10),fe(Zo,8),fe(i0,8))};static \u0275dir=on({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[gd([fL]),Si,Ho]})}return t})();var pL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pr({type:t});static \u0275inj=Bn({})}return t})();var ps=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:i0,useValue:n.callSetDisabledState??My}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Pr({type:t});static \u0275inj=Bn({imports:[pL]})}return t})();var s0=()=>{};var u0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ih={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new ky;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ky=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mL=function(t){let e=u0(t);return ih.encodeByteArray(e,!0)},Pc=function(t){return mL(t).replace(/\./g,"")},oh=function(t){try{return ih.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yL=()=>Fy().__FIREBASE_DEFAULTS__,vL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_L=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&oh(t[1]);return e&&JSON.parse(e)},sh=()=>{try{return s0()||yL()||vL()||_L()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l0=t=>{var e,n;return(n=(e=sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d0=t=>{let e=l0(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ly=()=>{var t;return(t=sh())===null||t===void 0?void 0:t.config},h0=t=>{var e;return(e=sh())===null||e===void 0?void 0:e[`_${t}`]};var Ui=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Bi(t){return t.endsWith(".cloudworkstations.dev")}function Vy(t){return b(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function f0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pc(JSON.stringify(n)),Pc(JSON.stringify(s)),""].join(".")}var Mc={};function EL(){let t={prod:[],emulator:[]};for(let e of Object.keys(Mc))Mc[e]?t.emulator.push(e):t.prod.push(e);return t}function IL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var a0=!1;function jy(t,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||Mc[t]===e||Mc[t]||a0)return;Mc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=EL().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{a0=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=IL(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),F=n("preprendIcon"),G=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let K=m.element;c(K),h(R,N);let Ee=l();u(G,F),K.append(G,S,R,Ee),document.body.appendChild(K)}o?(S.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function wL(){var t;let e=(t=sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function y0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v0(){return!wL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xc(){try{return typeof indexedDB=="object"}catch{return!1}}function _0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var DL="FirebaseError",Qt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}},cn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?CL(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Qt(i,c,r)}};function CL(t,e){return t.replace(TL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var TL=/\{\$([^}]+)}/g;function $i(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(c0(o)&&c0(s)){if(!$i(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function c0(t){return t!==null&&typeof t=="object"}function Uy(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function E0(t,e){let n=new Oy(t,e);return n.subscribe.bind(n)}var Oy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xy),i.error===void 0&&(i.error=xy),i.complete===void 0&&(i.complete=xy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xy(){}var tX=4*60*60*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Et=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Hi="[DEFAULT]";var By=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ui;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AL(e))try{this.getOrInitializeService({instanceIdentifier:Hi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Hi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Hi){return this.instances.has(e)}getOptions(e=Hi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hi){return this.component?this.component.multipleInstances?e:Hi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SL(t){return t===Hi?void 0:t}function AL(t){return t.instantiationMode==="EAGER"}var ah=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new By(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var RL=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),NL={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},ML=ue.INFO,PL={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},xL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=PL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=ML,this._logHandler=xL,this._userLogHandler=null,RL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var kL=(t,e)=>e.some(n=>t instanceof n),I0,w0;function OL(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FL(){return w0||(w0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var D0=new WeakMap,Hy=new WeakMap,C0=new WeakMap,$y=new WeakMap,qy=new WeakMap;function LL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(bn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&D0.set(n,t)}).catch(()=>{}),qy.set(e,t),e}function VL(t){if(Hy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Hy.set(t,e)}var zy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function T0(t){zy=t(zy)}function jL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ch(this),e,...n);return C0.set(r,e.sort?e.sort():[e]),bn(r)}:FL().includes(t)?function(...e){return t.apply(ch(this),e),bn(D0.get(this))}:function(...e){return bn(t.apply(ch(this),e))}}function UL(t){return typeof t=="function"?jL(t):(t instanceof IDBTransaction&&VL(t),kL(t,OL())?new Proxy(t,zy):t)}function bn(t){if(t instanceof IDBRequest)return LL(t);if($y.has(t))return $y.get(t);let e=UL(t);return e!==t&&($y.set(t,e),qy.set(e,t)),e}var ch=t=>qy.get(t);function S0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=bn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(bn(s.result),u.oldVersion,u.newVersion,bn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var BL=["get","getKey","getAll","getAllKeys","count"],$L=["put","add","delete","clear"],Gy=new Map;function b0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gy.get(e))return Gy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=$L.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BL.includes(n)))return;let o=function(s,...c){return b(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return Gy.set(e,o),o}T0(t=>ie(O({},t),{get:(e,n,r)=>b0(e,n)||t.get(e,n,r),has:(e,n)=>!!b0(e,n)||t.has(e,n)}));var Ky=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function HL(t){let e=t.getComponent();return e?.type==="VERSION"}var Qy="@firebase/app",A0="0.13.1";var Jn=new Tn("@firebase/app"),zL="@firebase/app-compat",qL="@firebase/analytics-compat",GL="@firebase/analytics",WL="@firebase/app-check-compat",KL="@firebase/app-check",QL="@firebase/auth",YL="@firebase/auth-compat",ZL="@firebase/database",JL="@firebase/data-connect",XL="@firebase/database-compat",eV="@firebase/functions",tV="@firebase/functions-compat",nV="@firebase/installations",rV="@firebase/installations-compat",iV="@firebase/messaging",oV="@firebase/messaging-compat",sV="@firebase/performance",aV="@firebase/performance-compat",cV="@firebase/remote-config",uV="@firebase/remote-config-compat",lV="@firebase/storage",dV="@firebase/storage-compat",hV="@firebase/firestore",fV="@firebase/ai",pV="@firebase/firestore-compat",gV="firebase",mV="11.9.0";var Yy="[DEFAULT]",yV={[Qy]:"fire-core",[zL]:"fire-core-compat",[GL]:"fire-analytics",[qL]:"fire-analytics-compat",[KL]:"fire-app-check",[WL]:"fire-app-check-compat",[QL]:"fire-auth",[YL]:"fire-auth-compat",[ZL]:"fire-rtdb",[JL]:"fire-data-connect",[XL]:"fire-rtdb-compat",[eV]:"fire-fn",[tV]:"fire-fn-compat",[nV]:"fire-iid",[rV]:"fire-iid-compat",[iV]:"fire-fcm",[oV]:"fire-fcm-compat",[sV]:"fire-perf",[aV]:"fire-perf-compat",[cV]:"fire-rc",[uV]:"fire-rc-compat",[lV]:"fire-gcs",[dV]:"fire-gcs-compat",[hV]:"fire-fst",[pV]:"fire-fst-compat",[fV]:"fire-vertex","fire-js":"fire-js",[gV]:"fire-js-all"};var kc=new Map,vV=new Map,Zy=new Map;function R0(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function un(t){let e=t.name;if(Zy.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(let n of kc.values())R0(n,t);for(let n of vV.values())R0(n,t);return!0}function uh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t==null?!1:t.settings!==void 0}var _V={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new cn("app","Firebase",_V);var Jy=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}};var gs=mV;function tv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Yy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=Ly()),!n)throw $r.create("no-options");let o=kc.get(i);if(o){if($i(n,o.options)&&$i(r,o.config))return o;throw $r.create("duplicate-app",{appName:i})}let s=new ah(i);for(let u of Zy.values())s.addComponent(u);let c=new Jy(n,r,s);return kc.set(i,c),c}function ms(t=Yy){let e=kc.get(t);if(!e&&t===Yy&&Ly())return tv();if(!e)throw $r.create("no-app",{appName:t});return e}function lh(){return Array.from(kc.values())}function ke(t,e,n){var r;let i=(r=yV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(c.join(" "));return}un(new Et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var EV="firebase-heartbeat-database",IV=1,Oc="firebase-heartbeat-store",Wy=null;function x0(){return Wy||(Wy=S0(EV,IV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oc)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Wy}function wV(t){return b(this,null,function*(){try{let n=(yield x0()).transaction(Oc),r=yield n.objectStore(Oc).get(k0(t));return yield n.done,r}catch(e){if(e instanceof Qt)Jn.warn(e.message);else{let n=$r.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}})}function N0(t,e){return b(this,null,function*(){try{let r=(yield x0()).transaction(Oc,"readwrite");yield r.objectStore(Oc).put(e,k0(t)),yield r.done}catch(n){if(n instanceof Qt)Jn.warn(n.message);else{let r=$r.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}})}function k0(t){return`${t.name}!${t.options.appId}`}var DV=1024,CV=30,Xy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ev(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=M0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>CV){let s=bV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jn.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=M0(),{heartbeatsToSend:r,unsentEntries:i}=TV(this._heartbeatsCache.heartbeats),o=Pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Jn.warn(n),""}})}};function M0(){return new Date().toISOString().substring(0,10)}function TV(t,e=DV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),P0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),P0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ev=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return xc()?_0().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return N0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function P0(t){return Pc(JSON.stringify({version:2,heartbeats:t})).length}function bV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function SV(t){un(new Et("platform-logger",e=>new Ky(e),"PRIVATE")),un(new Et("heartbeat",e=>new Xy(e),"PRIVATE")),ke(Qy,A0,t),ke(Qy,A0,"esm2017"),ke("fire-js","")}SV("");var AV="firebase",RV="11.9.1";ke(AV,RV,"app");function O0(t){t===void 0&&(t=P(Xe));let e=t.get(Lo);return n=>new ee(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var qi=new Qo("ANGULARFIRE2_VERSION");function hh(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var vs=(t,e)=>{let n=e?[e]:lh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ys=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(ys||{}),F0=jm()&&typeof Zone<"u"?ys.WARN:ys.SILENT;var dh=class{zone;delegate;constructor(e,n=wp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Gi=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=P(Te);this.outsideAngular=n.runOutsideAngular(()=>new dh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new dh(typeof Zone>"u"?void 0:Zone.current,Ip))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L0=!1;function NV(t,e){!L0&&(F0>ys.SILENT||jm())&&(L0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),F0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function MV(t){let e=P(Te,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function zi(t){let e=P(Te,{optional:!0});return e?e.run(()=>t()):t()}var PV=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),et(n,()=>zi(()=>t.apply(void 0,r)))),Yt=(t,e,n)=>(n||=e?ys.WARN:ys.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=P(Gi),s=P(Lo),c=P($e)}catch{return NV(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=zi(()=>s.add())),i[l]=PV(i[l],r,c));let u=MV(()=>t.apply(this,i));return e?u instanceof ee?u.pipe(mr(o.outsideAngular),gr(o.insideAngular),O0(c)):u instanceof Promise?zi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>et(c,()=>zi(()=>h(m))),m=>et(c,()=>zi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:zi(()=>u):u instanceof ee?u.pipe(mr(o.outsideAngular),gr(o.insideAngular)):zi(()=>u)});var Wi=class{constructor(e){return e}},Fc=class{constructor(){return lh()}};function xV(t){return t&&t.length===1?t[0]:new Wi(ms())}var nv=new U("angularfire2._apps"),kV={provide:Wi,useFactory:xV,deps:[[new _n,nv]]},OV={provide:Fc,deps:[[new _n,nv]]};function FV(t){return(e,n)=>{let r=n.get(Mr);ke("angularfire",qi.full,"core"),ke("angularfire",qi.full,"app"),ke("angular",MT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Wi(i)}}function V0(t,...e){return Tr([kV,OV,{provide:nv,useFactory:FV(t),multi:!0,deps:[Te,Xe,Gi,...e]}])}var j0=Yt(tv,!0);var LV=new Map,VV={activated:!1,tokenObservers:[]},jV={initialized:!1,enabled:!1};function ln(t){return LV.get(t)||Object.assign({},VV)}function H0(){return jV}var UV="https://content-firebaseappcheck.googleapis.com/v1";var BV="exchangeDebugToken",U0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},iee=24*60*60*1e3;var ov=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new Ui,this.pending.promise.catch(n=>{}),yield $V(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ui,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function $V(t){return new Promise(e=>{setTimeout(e,t)})}var HV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new cn("appCheck","AppCheck",HV);function z0(t){if(!ln(t).activated)throw Hr.create("use-before-activation",{appName:t.name})}function q0(r,i){return b(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(y){throw Hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Hr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function G0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${UV}/projects/${n}/apps/${r}:${BV}?key=${i}`,body:{debug_token:e}}}var zV="firebase-app-check-database",qV=1,sv="firebase-app-check-store";var fh=null;function GV(){return fh||(fh=new Promise((t,e)=>{try{let n=indexedDB.open(zV,qV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sv,{keyPath:"compositeKey"})}}}catch(n){e(Hr.create("storage-open",{originalErrorMessage:n?.message}))}}),fh)}function WV(t,e){return KV(QV(t),e)}function KV(t,e){return b(this,null,function*(){let r=(yield GV()).transaction(sv,"readwrite"),o=r.objectStore(sv).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function QV(t){return`${t.options.appId}-${t.name}`}var Lc=new Tn("@firebase/app-check");function rv(t,e){return xc()?WV(t,e).catch(n=>{Lc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function W0(){return H0().enabled}function K0(){return b(this,null,function*(){let t=H0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var YV={error:"UNKNOWN_ERROR"};function ZV(t){return ih.encodeString(JSON.stringify(t),!1)}function av(t,e=!1,n=!1){return b(this,null,function*(){let r=t.app;z0(r);let i=ln(r),o=i.token,s;if(o&&!Vc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Vc(l)?o=l:yield rv(r,void 0))}if(!e&&o&&Vc(o))return{token:o.token};let c=!1;if(W0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=q0(G0(r,yield K0()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield rv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):n&&Lc.error(l),iv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Lc.warn(l.message):n&&Lc.error(l),s=l}let u;return o?s?Vc(o)?u={token:o.token,internalError:s}:u=iv(s):(u={token:o.token},i.token=o,yield rv(r,o)):u=iv(s),c&&t2(r,u),u})}function JV(t){return b(this,null,function*(){let e=t.app;z0(e);let{provider:n}=ln(e);if(W0()){let r=yield K0(),{token:i}=yield q0(G0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function XV(t,e,n,r){let{app:i}=t,o=ln(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Vc(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),B0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>B0(t))}function Q0(t,e){let n=ln(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function B0(t){let{app:e}=t,n=ln(e),r=n.tokenRefresher;r||(r=e2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function e2(t){let{app:e}=t;return new ov(()=>b(null,null,function*(){let n=ln(e),r;if(n.token?r=yield av(t,!0):r=yield av(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=ln(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},U0.RETRIAL_MIN_WAIT,U0.RETRIAL_MAX_WAIT)}function t2(t,e){let n=ln(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Vc(t){return t.expireTimeMillis-Date.now()>0}function iv(t){return{token:ZV(YV),error:t}}var cv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ln(this.app);for(let n of e)Q0(this.app,n.next);return Promise.resolve()}};function n2(t,e){return new cv(t,e)}function r2(t){return{getToken:e=>av(t,e),getLimitedUseToken:()=>JV(t),addTokenListener:e=>XV(t,"INTERNAL",e),removeTokenListener:e=>Q0(t.app,e)}}var i2="@firebase/app-check",o2="0.10.0";var s2="app-check",$0="app-check-internal";function a2(){un(new Et(s2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return n2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($0).initialize()})),un(new Et($0,t=>{let e=t.getProvider("app-check").getImmediate();return r2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke(i2,o2)}a2();var c2="app-check";var ph=class{constructor(){return vs(c2)}};var u2=["localhost","0.0.0.0","127.0.0.1"],yee=typeof window<"u"&&u2.includes(window.location.hostname);function rS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iS=rS,oS=new cn("auth","Firebase",rS());var vh=new Tn("@firebase/auth");function d2(t,...e){vh.logLevel<=ue.WARN&&vh.warn(`Auth (${gs}): ${t}`,...e)}function mh(t,...e){vh.logLevel<=ue.ERROR&&vh.error(`Auth (${gs}): ${t}`,...e)}function Y0(t,...e){throw Ev(t,...e)}function _v(t,...e){return Ev(t,...e)}function sS(t,e,n){let r=Object.assign(Object.assign({},iS()),{[e]:n});return new cn("auth","Firebase",r).create(e,{appName:t.name})}function yh(t){return sS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oS.create(t,...e)}function ye(t,e,...n){if(!t)throw Ev(e,...n)}function jc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw mh(e),new Error(e)}function _h(t,e){t||jc(e)}function h2(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function f2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h2()||m0()||"connection"in navigator)?navigator.onLine:!0}function p2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Yi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,_h(n>e,"Short delay should be less than long delay!"),this.isMobile=p0()||y0()}get(){return f2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function g2(t,e){_h(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Eh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var y2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v2=new Yi(3e4,6e4);function aS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Th(o,s,c,u){return b(this,arguments,function*(t,e,n,r,i={}){return cS(t,i,()=>b(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Uy(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return g0()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(y.credentials="include"),Eh.fetch()(yield uS(t,t.config.apiHost,n,p),y)}))})}function cS(t,e,n){return b(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},m2),e);try{let i=new dv(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw gh(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw gh(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw gh(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sS(t,h,l);Y0(t,h)}}catch(i){if(i instanceof Qt)throw i;Y0(t,"network-request-failed",{message:String(i)})}})}function uS(t,e,n,r){return b(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?g2(t.config,i):`${t.config.apiScheme}://${i}`;return y2.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var dv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_v(this.auth,"network-request-failed")),v2.get())})}};function gh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_v(t,e,r);return i.customData._tokenResponse=n,i}function _2(t,e){return b(this,null,function*(){return Th(t,"POST","/v1/accounts:delete",e)})}function Ih(t,e){return b(this,null,function*(){return Th(t,"POST","/v1/accounts:lookup",e)})}function Uc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Iv(t,e=!1){return b(this,null,function*(){let n=dt(t),r=yield n.getIdToken(e),i=lS(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Uc(uv(i.auth_time)),issuedAtTime:Uc(uv(i.iat)),expirationTime:Uc(uv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function uv(t){return Number(t)*1e3}function lS(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{let i=oh(n);return i?JSON.parse(i):(mh("Failed to decode base64 JWT payload"),null)}catch(i){return mh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function J0(t){let e=lS(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function hv(t,e,n=!1){return b(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Qt&&E2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function E2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var fv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),n)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var $c=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function wh(t){return b(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield hv(t,Ih(n,{idToken:r}));ye(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dS(o.providerUserInfo):[],c=I2(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $c(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function wv(t){return b(this,null,function*(){let e=dt(t);yield wh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function I2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dS(t){return t.map(e=>{var{providerId:n}=e,r=Dp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function w2(t,e){return b(this,null,function*(){let n=yield cS(t,{},()=>b(null,null,function*(){let r=Uy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield uS(t,i,"/v1/token",`key=${o}`),c=yield t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Bi(t.emulatorConfig.host)&&(u.credentials="include"),Eh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function D2(t,e){return b(this,null,function*(){return Th(t,"POST","/v2/accounts:revokeToken",aS(t,e))})}var Bc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");let n=J0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return b(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield w2(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return jc("not implemented")}};function zr(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ki=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $c(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let n=yield hv(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Iv(this,e)}reload(){return wv(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield wh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Xn(this.auth.app))return Promise.reject(yh(this.auth));let e=yield this.getIdToken();return yield hv(this,_2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,G=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:Ee,isAnonymous:pt,providerData:_e,stsTokenManager:w}=n;ye(K&&w,e,"internal-error");let v=Bc.fromJSON(this.name,w);ye(typeof K=="string",e,"internal-error"),zr(p,e.name),zr(m,e.name),ye(typeof Ee=="boolean",e,"internal-error"),ye(typeof pt=="boolean",e,"internal-error"),zr(y,e.name),zr(S,e.name),zr(N,e.name),zr(R,e.name),zr(F,e.name),zr(G,e.name);let E=new t({uid:K,auth:e,email:m,emailVerified:Ee,displayName:p,isAnonymous:pt,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:F,lastLoginAt:G});return _e&&Array.isArray(_e)&&(E.providerData=_e.map(I=>Object.assign({},I))),R&&(E._redirectEventId=R),E}static _fromIdTokenResponse(e,n,r=!1){return b(this,null,function*(){let i=new Bc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return b(this,null,function*(){let i=n.users[0];ye(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Bc;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $c(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var X0=new Map;function Qi(t){_h(t instanceof Function,"Expected a class definition");let e=X0.get(t);return e?(_h(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X0.set(t,e),e)}var C2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(n,r){return b(this,null,function*(){this.storage[n]=r})}_get(n){return b(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return b(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),pv=C2;function lv(t,e,n){return`firebase:${t}:${e}:${n}`}var Dh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lv(this.userKey,i.apiKey,o),this.fullPersistenceKey=lv("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Ih(this.auth,{idToken:e}).catch(()=>{});return n?Ki._fromGetAccountInfoResponse(this.auth,n,e):null}return Ki._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return b(this,null,function*(){if(!n.length)return new t(Qi(pv),e,r);let i=(yield Promise.all(n.map(l=>b(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Qi(pv),s=lv(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Ih(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Ki._fromGetAccountInfoResponse(e,m,h)}else p=Ki._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(n.map(l=>b(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function eS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(N2(e))return"Blackberry";if(M2(e))return"Webos";if(b2(e))return"Safari";if((e.includes("chrome/")||S2(e))&&!e.includes("edge/"))return"Chrome";if(R2(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function T2(t=Lt()){return/firefox\//i.test(t)}function b2(t=Lt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S2(t=Lt()){return/crios\//i.test(t)}function A2(t=Lt()){return/iemobile/i.test(t)}function R2(t=Lt()){return/android/i.test(t)}function N2(t=Lt()){return/blackberry/i.test(t)}function M2(t=Lt()){return/webos/i.test(t)}function hS(t,e=[]){let n;switch(t){case"Browser":n=eS(Lt());break;case"Worker":n=`${eS(Lt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${r}`}var gv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function P2(n){return b(this,arguments,function*(t,e={}){return Th(t,"GET","/v2/passwordPolicy",aS(t,e))})}var x2=6,mv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:x2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var yv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ch(this),this.idTokenSubscription=new Ch(this),this.beforeStateQueue=new gv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Dh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let n=yield Ih(this,{idToken:e}),r=yield Ki._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var n;if(Xn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=p2()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Xn(this.app))return Promise.reject(yh(this));let n=e?dt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return b(this,null,function*(){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Xn(this.app)?Promise.reject(yh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xn(this.app)?Promise.reject(yh(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Qi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield P2(this),n=new mv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield D2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Qi(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=yield Dh.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return b(this,null,function*(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&d2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function k2(t){return dt(t)}var Ch=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=E0(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var O2={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F2(t){O2=t}function L2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function V2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Qi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Ree=L2("rcb"),Nee=new Yi(3e4,6e4);var Mee=new Yi(2e3,1e4);var Pee=10*60*1e3;var xee=new Yi(3e4,6e4);var kee=new Yi(5e3,15e3);var Oee=encodeURIComponent("fac");var tS="@firebase/auth",nS="1.10.7";var vv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function j2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U2(t){un(new Et("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hS(t)},l=new yv(r,i,o,u);return V2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),un(new Et("auth-internal",e=>{let n=k2(e.getProvider("auth").getImmediate());return(r=>new vv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(tS,nS,j2(t)),ke(tS,nS,"esm2017")}var B2=5*60,Fee=h0("authIdTokenMaxAge")||B2;function $2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}F2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=_v("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",$2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U2("Browser");var Uj="auth";var bh=class{constructor(){return vs(Uj)}};var fS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pS={};var er,Dv;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,D,T){for(var _=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)_[xn-2]=arguments[xn];return v.prototype[D].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)I[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],D=w.g[2];var T=w.g[3],_=v+(T^E&(D^T))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(T^E&(D^T))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(D^v&(E^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(E^T&(v^E))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=E+(v^D&(T^v))+I[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(E^D))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(E^D))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^D&(v^E))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(D^T))+I[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^T)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^T)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^E)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=E+(D^T^v)+I[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~T))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~T))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~E))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=E+(T^(D|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+T&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=E;)i(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<v;)if(I[D++]=w.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=w[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,D=w.length-1;0<=D;D--){var T=w[D]|0;I&&T==v||(E[D]=T,I=!1)}this.g=E}var c={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,D=0;D<w.length;D+=8){var T=Math.min(8,w.length-D),_=parseInt(w.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var D=Ee(E,v).g;E=F(E,D.j(v));var T=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=D,S(E))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=F(this,w),N(w)?-1:S(w)?0:1};function R(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(w.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,E[D]=_<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(w,v){return w.add(R(v))}t.j=function(w){if(S(this)||S(w))return p;if(N(this))return N(w)?R(this).j(R(w)):R(R(this).j(w));if(N(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<w.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,xn=w.i(D)>>>16,Qs=w.i(D)&65535;E[2*I+2*D]+=_*Qs,G(E,2*I+2*D),E[2*I+2*D+1]+=T*Qs,G(E,2*I+2*D+1),E[2*I+2*D+1]+=_*xn,G(E,2*I+2*D+1),E[2*I+2*D+2]+=T*xn,G(E,2*I+2*D+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function G(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function K(w,v){this.g=w,this.h=v}function Ee(w,v){if(S(v))throw Error("division by zero");if(S(w))return new K(p,p);if(N(w))return v=Ee(R(w),v),new K(R(v.g),R(v.h));if(N(v))return v=Ee(w,R(v)),new K(R(v.g),v.h);if(30<w.g.length){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=pt(E),I=pt(I);var D=_e(E,1),T=_e(I,1);for(I=_e(I,2),E=_e(E,2);!S(I);){var _=T.add(I);0>=_.l(w)&&(D=D.add(E),T=_),I=_e(I,1),E=_e(E,1)}return v=F(w,D.j(v)),new K(D,v)}for(D=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(E),_=T.j(v);N(_)||0<_.l(w);)E-=I,T=l(E),_=T.j(v);S(T)&&(T=m),D=D.add(T),w=F(w,_)}return new K(D,w)}t.A=function(w){return Ee(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function pt(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function _e(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,D=[],T=0;T<I;T++)D[T]=0<v?w.i(T+E)>>>v|w.i(T+E+1)<<32-v:w.i(T+E);return new s(D,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dv=pS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,er=pS.Integer=s}).apply(typeof fS<"u"?fS:typeof self<"u"?self:typeof window<"u"?window:{});var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var Cv,Bj,_s,Tv,Hc,Ah,bv,Sv,Av;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sh=="object"&&Sh];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,C={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),a.apply(d,C)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function S(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,C,A){for(var k=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)k[Ie-2]=arguments[Ie];return d.prototype[C].apply(g,k)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=a.length||0,A=g.length||0;a.length=C+A;for(let k=0;k<A;k++)a[C+k]=g[k]}else a.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(a){return/^[\s\xa0]*$/.test(a)}function K(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ee(a){return Ee[" "](a),a}Ee[" "]=function(){};var pt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function _e(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function w(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function D(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function T(a){c.setTimeout(()=>{throw a},0)}function _(){var a=xf;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class xn{constructor(){this.h=this.g=null}add(d,f){let g=Qs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Qs=new F(()=>new zR,a=>a.reset());class zR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ys,Zs=!1,xf=new xn,GE=()=>{let a=c.Promise.resolve(void 0);Ys=()=>{a.then(qR)}};var qR=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){T(f)}var d=Qs;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Zs=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var GR=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Js(a,d){if(it.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(pt){e:{try{Ee(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:WR[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Js.aa.h.call(this)}}S(Js,it);var WR={2:"touch",3:"pen",4:"mouse"};Js.prototype.h=function(){Js.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xs="closure_listenable_"+(1e6*Math.random()|0),KR=0;function QR(a,d,f,g,C){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++KR,this.da=this.fa=!1}function lu(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function du(a){this.src=a,this.g={},this.h=0}du.prototype.add=function(a,d,f,g,C){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=Of(a,d,g,C);return-1<k?(d=a[k],f||(d.fa=!1)):(d=new QR(d,this.src,A,!!g,C),d.fa=f,a.push(d)),d};function kf(a,d){var f=d.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(lu(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Of(a,d,f,g){for(var C=0;C<a.length;++C){var A=a[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Ff="closure_lm_"+(1e6*Math.random()|0),Lf={};function WE(a,d,f,g,C){if(g&&g.once)return QE(a,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)WE(a,d[A],f,g,C);return null}return f=Bf(f),a&&a[Xs]?a.K(d,f,l(g)?!!g.capture:!!g,C):KE(a,d,f,!1,g,C)}function KE(a,d,f,g,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,Ie=jf(a);if(Ie||(a[Ff]=Ie=new du(a)),f=Ie.add(d,f,g,k,A),f.proxy)return f;if(g=YR(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)GR||(C=k),C===void 0&&(C=!1),a.addEventListener(d.toString(),g,C);else if(a.attachEvent)a.attachEvent(ZE(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function YR(){function a(f){return d.call(a.src,a.listener,f)}let d=ZR;return a}function QE(a,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)QE(a,d[A],f,g,C);return null}return f=Bf(f),a&&a[Xs]?a.L(d,f,l(g)?!!g.capture:!!g,C):KE(a,d,f,!0,g,C)}function YE(a,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)YE(a,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Bf(f),a&&a[Xs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Of(A,f,g,C),-1<f&&(lu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=jf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Of(d,f,g,C)),(f=-1<a?d[a]:null)&&Vf(f))}function Vf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Xs])kf(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(ZE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=jf(d))?(kf(f,a),f.h==0&&(f.src=null,d[Ff]=null)):lu(a)}}}function ZE(a){return a in Lf?Lf[a]:Lf[a]="on"+a}function ZR(a,d){if(a.da)a=!0;else{d=new Js(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Vf(a),a=f.call(g,d)}return a}function jf(a){return a=a[Ff],a instanceof du?a:null}var Uf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bf(a){return typeof a=="function"?a:(a[Uf]||(a[Uf]=function(d){return a.handleEvent(d)}),a[Uf])}function ot(){lr.call(this),this.i=new du(this),this.M=this,this.F=null}S(ot,lr),ot.prototype[Xs]=!0,ot.prototype.removeEventListener=function(a,d,f,g){YE(this,a,d,f,g)};function gt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new it(d,a);else if(d instanceof it)d.target=d.target||a;else{var C=d;d=new it(g,a),I(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=hu(k,g,!0,d)&&C}if(k=d.g=a,C=hu(k,g,!0,d)&&C,C=hu(k,g,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=hu(k,g,!1,d)&&C}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)lu(f[g]);delete a.g[d],a.h--}}this.F=null},ot.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},ot.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function hu(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ie=k.listener,Qe=k.ha||k.src;k.fa&&kf(a.i,k),C=Ie.call(Qe,g)!==!1&&C}}return C&&!g.defaultPrevented}function JE(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function XE(a){a.g=JE(()=>{a.g=null,a.i&&(a.i=!1,XE(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class JR extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:XE(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(a){lr.call(this),this.h=a,this.g={}}S(ea,lr);var eI=[];function tI(a){_e(a.g,function(d,f){this.g.hasOwnProperty(f)&&Vf(d)},a),a.g={}}ea.prototype.N=function(){ea.aa.N.call(this),tI(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $f=c.JSON.stringify,XR=c.JSON.parse,eN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Hf(){}Hf.prototype.h=null;function nI(a){return a.h||(a.h=a.i())}function rI(){}var ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zf(){it.call(this,"d")}S(zf,it);function qf(){it.call(this,"c")}S(qf,it);var Jr={},iI=null;function fu(){return iI=iI||new ot}Jr.La="serverreachability";function oI(a){it.call(this,Jr.La,a)}S(oI,it);function na(a){let d=fu();gt(d,new oI(d))}Jr.STAT_EVENT="statevent";function sI(a,d){it.call(this,Jr.STAT_EVENT,a),this.stat=d}S(sI,it);function mt(a){let d=fu();gt(d,new sI(d,a))}Jr.Ma="timingevent";function aI(a,d){it.call(this,Jr.Ma,a),this.size=d}S(aI,it);function ra(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ia(){this.g=!0}ia.prototype.xa=function(){this.g=!1};function tN(a,d,f,g,C,A){a.info(function(){if(a.g)if(A)for(var k="",Ie=A.split("&"),Qe=0;Qe<Ie.length;Qe++){var ge=Ie[Qe].split("=");if(1<ge.length){var st=ge[0];ge=ge[1];var at=st.split("_");k=2<=at.length&&at[1]=="type"?k+(st+"="+ge+"&"):k+(st+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function nN(a,d,f,g,C,A,k){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function co(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+iN(a,f)+(g?" "+g:"")})}function rN(a,d){a.info(function(){return"TIMEOUT: "+d})}ia.prototype.info=function(){};function iN(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return $f(f)}catch{return d}}var pu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gf;function gu(){}S(gu,Hf),gu.prototype.g=function(){return new XMLHttpRequest},gu.prototype.i=function(){return{}},Gf=new gu;function dr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new ea(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uI}function uI(){this.i=null,this.g="",this.h=!1}var lI={},Wf={};function Kf(a,d,f){a.L=1,a.v=_u(kn(d)),a.m=f,a.P=!0,dI(a,null)}function dI(a,d){a.F=Date.now(),mu(a),a.A=kn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),TI(f.i,"t",g),a.C=0,f=a.j.J,a.h=new uI,a.g=HI(a.j,f?d:null,!a.m),0<a.O&&(a.M=new JR(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(eI[0]=C.toString()),C=eI);for(var A=0;A<C.length;A++){var k=WE(f,C[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),na(),tN(a.i,a.u,a.A,a.l,a.R,a.m)}dr.prototype.ca=function(a){a=a.target;let d=this.M;d&&On(a)==3?d.j():this.Y(a)},dr.prototype.Y=function(a){try{if(a==this.g)e:{let at=On(this.g);var d=this.g.Ba();let ho=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||PI(this.g)))){this.J||at!=4||d==7||(d==8||0>=ho?na(3):na(2)),Qf(this);var f=this.g.Z();this.X=f;t:if(hI(this)){var g=PI(this.g);a="";var C=g.length,A=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),oa(this);var k="";break t}this.h.i=new c.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,nN(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Qe=this.g;if((Ie=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Ie)){var ge=Ie;break t}}ge=null}if(f=ge)co(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yf(this,f);else{this.o=!1,this.s=3,mt(12),Xr(this),oa(this);break e}}if(this.P){f=!0;let Xt;for(;!this.J&&this.C<k.length;)if(Xt=oN(this,k),Xt==Wf){at==4&&(this.s=4,mt(14),f=!1),co(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==lI){this.s=4,mt(15),co(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else co(this.i,this.l,Xt,null),Yf(this,Xt);if(hI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||k.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)co(this.i,this.l,k,"[Invalid Chunked Response]"),Xr(this),oa(this);else if(0<k.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),np(st),st.M=!0,mt(11))}}else co(this.i,this.l,k,null),Yf(this,k);at==4&&Xr(this),this.o&&!this.J&&(at==4?jI(this.j,this):(this.o=!1,mu(this)))}else wN(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Xr(this),oa(this)}}}catch{}finally{}};function hI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function oN(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?Wf:(f=Number(d.substring(f,g)),isNaN(f)?lI:(g+=1,g+f>d.length?Wf:(d=d.slice(g,g+f),a.C=g+f,d)))}dr.prototype.cancel=function(){this.J=!0,Xr(this)};function mu(a){a.S=Date.now()+a.I,fI(a,a.I)}function fI(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ra(m(a.ba,a),d)}function Qf(a){a.B&&(c.clearTimeout(a.B),a.B=null)}dr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(rN(this.i,this.A),this.L!=2&&(na(),mt(17)),Xr(this),this.s=2,oa(this)):fI(this,this.S-a)};function oa(a){a.j.G==0||a.J||jI(a.j,a)}function Xr(a){Qf(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,tI(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Yf(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Zf(f.h,a))){if(!a.K&&Zf(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Cu(f),wu(f);else break e;tp(f),mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ra(m(f.Za,f),6e3));if(1>=mI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ti(f,11)}else if((a.K||f.g==a)&&Cu(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ge=C[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let st=ge[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));let at=ge[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let ho=ge[5];ho!=null&&typeof ho=="number"&&0<ho&&(g=1.5*ho,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Xt=a.g;if(Xt){let bu=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var A=g.h;A.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Jf(A,A.h),A.h=null))}if(g.D){let rp=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;rp&&(g.ya=rp,be(g.I,g.D,rp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=a;if(g.qa=$I(g,g.J?g.ia:null,g.W),k.K){yI(g.h,k);var Ie=k,Qe=g.L;Qe&&(Ie.I=Qe),Ie.B&&(Qf(Ie),mu(Ie)),g.g=k}else LI(g);0<f.i.length&&Du(f)}else ge[0]!="stop"&&ge[0]!="close"||ti(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?ti(f,7):ep(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}na(4)}catch{}}var sN=class{constructor(a,d){this.g=a,this.map=d}};function pI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mI(a){return a.h?1:a.g?a.g.size:0}function Zf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Jf(a,d){a.g?a.g.add(d):a.h=d}function yI(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}pI.prototype.cancel=function(){if(this.i=vI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function vI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function aN(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function cN(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function _I(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=cN(a),g=aN(a),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],a)}var EI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uN(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),C=null;if(0<=g){var A=a[f].substring(0,g);C=a[f].substring(g+1)}else A=a[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ei(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ei){this.h=a.h,yu(this,a.j),this.o=a.o,this.g=a.g,vu(this,a.s),this.l=a.l;var d=a.i,f=new ca;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),II(this,f),this.m=a.m}else a&&(d=String(a).match(EI))?(this.h=!1,yu(this,d[1]||"",!0),this.o=sa(d[2]||""),this.g=sa(d[3]||"",!0),vu(this,d[4]),this.l=sa(d[5]||"",!0),II(this,d[6]||"",!0),this.m=sa(d[7]||"")):(this.h=!1,this.i=new ca(null,this.h))}ei.prototype.toString=function(){var a=[],d=this.j;d&&a.push(aa(d,wI,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(aa(d,wI,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(aa(f,f.charAt(0)=="/"?hN:dN,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",aa(f,pN)),a.join("")};function kn(a){return new ei(a)}function yu(a,d,f){a.j=f?sa(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function vu(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function II(a,d,f){d instanceof ca?(a.i=d,gN(a.i,a.h)):(f||(d=aa(d,fN)),a.i=new ca(d,a.h))}function be(a,d,f){a.i.set(d,f)}function _u(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function sa(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function aa(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,lN),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function lN(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var wI=/[#\/\?@]/g,dN=/[#\?:]/g,hN=/[#\?]/g,fN=/[#\?@]/g,pN=/#/g;function ca(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function hr(a){a.g||(a.g=new Map,a.h=0,a.i&&uN(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ca.prototype,t.add=function(a,d){hr(this),this.i=null,a=uo(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function DI(a,d){hr(a),d=uo(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function CI(a,d){return hr(a),d=uo(a,d),a.g.has(d)}t.forEach=function(a,d){hr(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(d,C,g,this)},this)},this)},t.na=function(){hr(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=a[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(a){hr(this);let d=[];if(typeof a=="string")CI(this,a)&&(d=d.concat(this.g.get(uo(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return hr(this),this.i=null,a=uo(this,a),CI(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function TI(a,d,f){DI(a,d),0<f.length&&(a.i=null,a.g.set(uo(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var C=A;k[g]!==""&&(C+="="+encodeURIComponent(String(k[g]))),a.push(C)}}return this.i=a.join("&")};function uo(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function gN(a,d){d&&!a.j&&(hr(a),a.i=null,a.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(DI(this,g),TI(this,C,f))},a)),a.j=d}function mN(a,d){let f=new ia;if(c.Image){let g=new Image;g.onload=y(fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(fr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(fr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function yN(a,d){let f=new ia,g=new AbortController,C=setTimeout(()=>{g.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),fr(f,"TestPingServer: error",!1,d)})}function fr(a,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function vN(){this.g=new eN}function _N(a,d,f){let g=f||"";try{_I(a,function(C,A){let k=C;l(C)&&(k=$f(C)),d.push(g+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ua(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ua,Hf),ua.prototype.g=function(){return new Eu(this.l,this.j)},ua.prototype.i=function(a){return function(){return a}}({});function Eu(a,d){ot.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Eu,ot),t=Eu.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,da(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,la(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,da(this)),this.g&&(this.readyState=3,da(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bI(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function bI(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?la(this):da(this),this.readyState==3&&bI(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,la(this))},t.Qa=function(a){this.g&&(this.response=a,la(this))},t.ga=function(){this.g&&la(this)};function la(a){a.readyState=4,a.l=null,a.j=null,a.v=null,da(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function da(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Eu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function SI(a){let d="";return _e(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Xf(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=SI(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function Ne(a){ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ne,ot);var EN=/^https?$/i,IN=["POST","PUT"];t=Ne.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gf.g(),this.v=this.o?nI(this.o):nI(Gf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){AI(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(IN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{MI(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){AI(this,A)}};function AI(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,RI(a),Iu(a)}function RI(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,gt(this,"complete"),gt(this,"abort"),Iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Iu(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?NI(this):this.bb())},t.bb=function(){NI(this)};function NI(a){if(a.h&&typeof s<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)JE(a.Ea,0,a);else if(gt(a,"readystatechange"),On(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var C=String(a.D).match(EI)[1]||null;!C&&c.self&&c.self.location&&(C=c.self.location.protocol.slice(0,-1)),g=!EN.test(C?C.toLowerCase():"")}f=g}if(f)gt(a,"complete"),gt(a,"success");else{a.m=6;try{var A=2<On(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",RI(a)}}finally{Iu(a)}}}}function Iu(a,d){if(a.g){MI(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||gt(a,"ready");try{f.onreadystatechange=g}catch{}}}function MI(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),XR(d)}};function PI(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function wN(a){let d={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(G(a[g]))continue;var f=D(a[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function xI(a){this.Aa=0,this.i=[],this.j=new ia,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,a),this.cb=ha("retryDelaySeedMs",1e4,a),this.Wa=ha("forwardChannelMaxRetries",2,a),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pI(a&&a.concurrentRequestLimit),this.Da=new vN,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xI.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){mt(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=$I(this,null,this.W),Du(this)};function ep(a){if(kI(a),a.G==3){var d=a.U++,f=kn(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),fa(a,f),d=new dr(a,a.j,d),d.L=2,d.v=_u(kn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=HI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),mu(d)}BI(a)}function wu(a){a.g&&(np(a),a.g.cancel(),a.g=null)}function kI(a){wu(a),a.u&&(c.clearTimeout(a.u),a.u=null),Cu(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Du(a){if(!gI(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ys||GE(),Zs||(Ys(),Zs=!0),xf.add(d,a),a.B=0}}function DN(a,d){return mI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ra(m(a.Ga,a,d),UI(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let C=new dr(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=FI(this,C,d),f=kn(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),fa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(SI(A)))+"&"+d:this.m&&Xf(f,this.m,A)),Jf(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,Kf(C,f,null)):Kf(C,f,d),this.G=2}}else this.G==3&&(a?OI(this,a):this.i.length==0||gI(this.h)||OI(this))};function OI(a,d){var f;d?f=d.l:f=a.U++;let g=kn(a.I);be(g,"SID",a.K),be(g,"RID",f),be(g,"AID",a.T),fa(a,g),a.m&&a.o&&Xf(g,a.m,a.o),f=new dr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=FI(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Jf(a.h,f),Kf(f,g,d)}function fa(a,d){a.H&&_e(a.H,function(f,g){be(d,g,f)}),a.l&&_I({},function(f,g){be(d,g,f)})}function FI(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var C=a.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ie=!0;for(let Qe=0;Qe<f;Qe++){let ge=C[Qe].g,st=C[Qe].map;if(ge-=A,0>ge)A=Math.max(0,C[Qe].g-100),Ie=!1;else try{_N(st,k,"req"+ge+"_")}catch{g&&g(st)}}if(Ie){g=k.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function LI(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ys||GE(),Zs||(Ys(),Zs=!0),xf.add(d,a),a.v=0}}function tp(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ra(m(a.Fa,a),UI(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,VI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ra(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),wu(this),VI(this))};function np(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function VI(a){a.g=new dr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=kn(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),fa(a,d),a.m&&a.o&&Xf(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=_u(kn(d)),f.m=null,f.P=!0,dI(f,a)}t.Za=function(){this.C!=null&&(this.C=null,wu(this),tp(this),mt(19))};function Cu(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function jI(a,d){var f=null;if(a.g==d){Cu(a),np(a),a.g=null;var g=2}else if(Zf(a.h,d))f=d.D,yI(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=a.B;g=fu(),gt(g,new aI(g,f)),Du(a)}else LI(a);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&DN(a,d)||g==2&&tp(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),C){case 1:ti(a,5);break;case 4:ti(a,10);break;case 3:ti(a,6);break;default:ti(a,2)}}}function UI(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ti(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let C=!g;g=new ei(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||yu(g,"https"),_u(g),C?mN(g.toString(),f):yN(g.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(d),BI(a),kI(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function BI(a){if(a.G=0,a.ka=[],a.l){let d=vI(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function $I(a,d,f){var g=f instanceof ei?kn(f):new ei(f);if(g.g!="")d&&(g.g=d+"."+g.g),vu(g,g.s);else{var C=c.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ei(null);g&&yu(A,g),d&&(A.g=d),C&&vu(A,C),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&be(g,f,d),be(g,"VER",a.la),fa(a,g),g}function HI(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ne(new ua({eb:f})):new Ne(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zI(){}t=zI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tu(){}Tu.prototype.g=function(a,d){return new Rt(a,d)};function Rt(a,d){ot.call(this),this.g=new xI(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!G(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new lo(this)}S(Rt,ot),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){ep(this.g)},Rt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=$f(a),a=f);d.i.push(new sN(d.Ya++,a)),d.G==3&&Du(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,ep(this.g),delete this.g,Rt.aa.N.call(this)};function qI(a){zf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}S(qI,zf);function GI(){qf.call(this),this.status=1}S(GI,qf);function lo(a){this.g=a}S(lo,zI),lo.prototype.ua=function(){gt(this.g,"a")},lo.prototype.ta=function(a){gt(this.g,new qI(a))},lo.prototype.sa=function(a){gt(this.g,new GI)},lo.prototype.ra=function(){gt(this.g,"b")},Tu.prototype.createWebChannel=Tu.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Av=tr.createWebChannelTransport=function(){return new Tu},Sv=tr.getStatEventTarget=function(){return fu()},bv=tr.Event=Jr,Ah=tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pu.NO_ERROR=0,pu.TIMEOUT=8,pu.HTTP_ERROR=6,Hc=tr.ErrorCode=pu,cI.COMPLETE="complete",Tv=tr.EventType=cI,rI.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",ot.prototype.listen=ot.prototype.K,_s=tr.WebChannel=rI,Bj=tr.FetchXmlHttpFactory=ua,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Cv=tr.XhrIo=Ne}).apply(typeof Sh<"u"?Sh:typeof self<"u"?self:typeof window<"u"?window:{});var gS="@firebase/firestore",mS="4.7.17";var We=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");var $s="11.9.0";var eo=new Tn("@firebase/firestore");function Es(){return eo.logLevel}function L(t,...e){if(eo.logLevel<=ue.DEBUG){let n=e.map(mE);eo.debug(`Firestore (${$s}): ${t}`,...n)}}function ir(t,...e){if(eo.logLevel<=ue.ERROR){let n=e.map(mE);eo.error(`Firestore (${$s}): ${t}`,...n)}}function Ss(t,...e){if(eo.logLevel<=ue.WARN){let n=e.map(mE);eo.warn(`Firestore (${$s}): ${t}`,...n)}}function mE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function $(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sA(t,r,n)}function sA(t,e,n){let r=`FIRESTORE (${$s}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ir(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||sA(e,i,r)}function Y(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Oh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},xv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}},kv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ov=class{constructor(e){this.t=e,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>b(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new Oh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new We(e)}},Fv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Lv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Fv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Vv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function $j(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function aA(){return new TextEncoder}var Lh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=$j(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function se(t,e){return t<e?-1:t>e?1:0}function jv(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=aA(),s=Hj(o.encode(yS(t,n)),o.encode(yS(e,n)));return s!==0?s:se(r,i)}}n+=r>65535?2:1}return se(t.length,e.length)}function yS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Hj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return se(t[n],e[n]);return se(t.length,e.length)}function As(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var vS=-62135596800,_S=1e6,rt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_S);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vS)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_S}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-vS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new rt(0,0))}static max(){return new t(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ES="__name__",Vh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&$(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return se(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):jv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return er.fromString(e.substring(4,e.length-2))}},Pe=class t extends Vh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},zj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jt=class t extends Vh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return zj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ES}static keyField(){return new t([ES])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Pe.fromString(e))}static fromName(e){return new t(Pe.fromString(e).popFirst(5))}static empty(){return new t(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Pe(e.slice()))}};var Qc=-1,Uv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Uv.UNKNOWN_ID=-1;function qj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new to(i,H.empty(),e)}function Gj(t){return new to(t.readTime,t.key,Qc)}var to=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),H.empty(),Qc)}static max(){return new t(X.max(),H.empty(),Qc)}};function Wj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var Kj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Hs(t){return b(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==Kj)throw t;L("LocalStore","Unexpectedly lost primary lease")})}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Qj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zs(t){return t.name==="IndexedDbTransactionError"}var yE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),vE=-1;function yf(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function Yj(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var cA="";function Zj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IS(e)),e=Jj(t.get(n),e);return IS(e)}function Jj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case cA:n+="";break;default:n+=o}}return n}function IS(t){return t+cA+""}var Xj="remoteDocuments",uA="owner";var lA="mutationQueues";var dA="mutations";var hA="documentMutations",eU="remoteDocumentsV14";var fA="remoteDocumentGlobal";var pA="targets";var gA="targetDocuments";var mA="targetGlobal",yA="collectionParents";var vA="clientMetadata";var _A="bundles";var EA="namedQueries";var tU="indexConfiguration";var nU="indexState";var rU="indexEntries";var IA="documentOverlays";var iU="globals";var oU=[lA,dA,hA,Xj,pA,uA,mA,gA,vA,fA,yA,_A,EA],Ute=[...oU,IA],sU=[lA,dA,hA,eU,pA,uA,mA,gA,vA,fA,yA,_A,EA,IA],aU=sU,cU=[...aU,tU,nU,rU];var Bte=[...cU,iU];function wS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cs(this.root,e,this.comparator,!0)}},Cs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jh(this.data.getIterator())}getIteratorFrom(e){return new jh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},jh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jt=class t{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ke(jt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Uh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Uh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var uU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(ve(!!t,39018),typeof t=="string"){let e=0,n=uU.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var DA="server_timestamp",CA="__type__",TA="__previous_value__",bA="__local_write_time__";function _E(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[CA])===null||n===void 0?void 0:n.stringValue)===DA}function vf(t){let e=t.mapValue.fields[TA];return _E(e)?vf(e):e}function Zc(t){let e=or(t.mapValue.fields[bA].timestampValue);return new rt(e.seconds,e.nanos)}var $v=class{constructor(e,n,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Bh="(default)",$h=class t{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var EE="__type__",SA="__max__",Rh={mapValue:{fields:{__type__:{stringValue:SA}}}},IE="__vector__",Rs="value";function Wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_E(t)?4:RA(t)?9007199254740991:AA(t)?10:11:$(28295,{value:t})}function Nn(t,e){if(t===e)return!0;let n=Wr(t);if(n!==Wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zc(t).isEqual(Zc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),c=or(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return sr(i.bytesValue).isEqual(sr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),c=Ae(o.doubleValue);return s===c?Yc(s)===Yc(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(wS(s)!==wS(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Nn(s[u],c[u])))return!1;return!0}(t,e);default:return $(52216,{left:t})}}function Jc(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function Ns(t,e){if(t===e)return 0;let n=Wr(t),r=Wr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Ae(o.integerValue||o.doubleValue),u=Ae(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return DS(t.timestampValue,e.timestampValue);case 4:return DS(Zc(t),Zc(e));case 5:return jv(t.stringValue,e.stringValue);case 6:return function(o,s){let c=sr(o),u=sr(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=se(c[l],u[l]);if(h!==0)return h}return se(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=se(Ae(o.latitude),Ae(s.latitude));return c!==0?c:se(Ae(o.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Rs])===null||c===void 0?void 0:c.arrayValue,S=(u=m[Rs])===null||u===void 0?void 0:u.arrayValue,N=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:CS(y,S)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rh.mapValue&&s===Rh.mapValue)return 0;if(o===Rh.mapValue)return 1;if(s===Rh.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=jv(u[p],h[p]);if(m!==0)return m;let y=Ns(c[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw $(23264,{Pe:n})}}function DS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=or(t),r=or(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function CS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ns(n[i],r[i]);if(o)return o}return se(n.length,r.length)}function Ms(t){return Hv(t)}function Hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Hv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Hv(n.fields[s])}`;return i+"}"}(t.mapValue):$(61005,{value:t})}function Ph(t){switch(Wr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vf(t);return e?16+Ph(e):16;case 5:return 2*t.stringValue.length;case 6:return sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Ph(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Zr(r.fields,(o,s)=>{i+=o.length+Ph(s)}),i}(t.mapValue);default:throw $(13486,{value:t})}}function zv(t){return!!t&&"integerValue"in t}function wE(t){return!!t&&"arrayValue"in t}function TS(t){return!!t&&"nullValue"in t}function bS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xh(t){return!!t&&"mapValue"in t}function AA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EE])===null||n===void 0?void 0:n.stringValue)===IE}function qc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SA}var Hte={mapValue:{fields:{[EE]:{stringValue:IE},[Rs]:{arrayValue:{}}}}};var Vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qc(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=qc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());xh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(qc(this.value))}};function NA(t){let e=[];return Zr(t.fields,(n,r)=>{let i=new jt([n]);if(xh(r)){let o=NA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Jt(e)}var dn=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ps=class{constructor(e,n){this.position=e,this.inclusive=n}};function SS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=Ns(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function AS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}var xs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function lU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Hh=class{},ze=class t extends Hh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gv(e,n,r):n==="array-contains"?new Qv(e,r):n==="in"?new Yv(e,r):n==="not-in"?new Zv(e,r):n==="array-contains-any"?new Jv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wv(e,r):new Kv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ns(n,this.value)):n!==null&&Wr(this.value)===Wr(n)&&this.matchesComparison(Ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mn=class t extends Hh{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return MA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function MA(t){return t.op==="and"}function PA(t){return dU(t)&&MA(t)}function dU(t){for(let e of t.filters)if(e instanceof Mn)return!1;return!0}function qv(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(PA(t))return t.filters.map(e=>qv(e)).join(",");{let e=t.filters.map(n=>qv(n)).join(",");return`${t.op}(${e})`}}function xA(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)}(t,e):t instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&xA(s,i.filters[c]),!0):!1}(t,e):void $(19439)}function kA(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(kA).join(" ,")+"}"}(t):"Filter"}var Gv=class extends ze{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},Wv=class extends ze{constructor(e,n){super(e,"in",n),this.keys=OA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Kv=class extends ze{constructor(e,n){super(e,"not-in",n),this.keys=OA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function OA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var Qv=class extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return wE(n)&&Jc(n.arrayValue,this.value)}},Yv=class extends ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Jc(this.value.arrayValue,n)}},Zv=class extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jc(this.value.arrayValue,n)}},Jv=class extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!wE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jc(this.value.arrayValue,r))}};var Xv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Ie=null}};function RS(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Xv(t,e,n,r,i,o,s)}function DE(t){let e=Y(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.Ie=n}return e.Ie}function CE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!AS(t.startAt,e.startAt)&&AS(t.endAt,e.endAt)}function e_(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ks=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function hU(t,e,n,r,i,o,s,c){return new ks(t,e,n,r,i,o,s,c)}function TE(t){return new ks(t)}function NS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fU(t){return t.collectionGroup!==null}function Gc(t){let e=Y(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Ke(jt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new xs(o,r))}),n.has(jt.keyField().canonicalString())||e.Ee.push(new xs(jt.keyField(),r))}return e.Ee}function An(t){let e=Y(t);return e.de||(e.de=pU(e,Gc(t))),e.de}function pU(t,e){if(t.limitType==="F")return RS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xs(i.field,o)});let n=t.endAt?new Ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ps(t.startAt.position,t.startAt.inclusive):null;return RS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function t_(t,e,n){return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _f(t,e){return CE(An(t),An(e))&&t.limitType===e.limitType}function FA(t){return`${DE(An(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kA(i)).join(", ")}]`),yf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ms(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ms(i)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Ef(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Gc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,c,u){let l=SS(s,c,u);return s.inclusive?l<=0:l<0}(r.startAt,Gc(r),i)||r.endAt&&!function(s,c,u){let l=SS(s,c,u);return s.inclusive?l>=0:l>0}(r.endAt,Gc(r),i))}(t,e)}function gU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LA(t){return(e,n)=>{let r=!1;for(let i of Gc(t)){let o=mU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function mU(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Ns(u,l):$(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $(19790,{direction:t.dir})}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wA(this.inner)}size(){return this.innerSize}};var yU=new xe(H.comparator);function cr(){return yU}var VA=new xe(H.comparator);function zc(...t){let e=VA;for(let n of t)e=e.insert(n.key,n);return e}function jA(t){let e=VA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zi(){return Wc()}function UA(){return Wc()}function Wc(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var vU=new xe(H.comparator),_U=new Ke(H.comparator);function de(...t){let e=_U;for(let n of t)e=e.add(n);return e}var EU=new Ke(se);function IU(){return EU}function bE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function BA(t){return{integerValue:""+t}}function wU(t,e){return Yj(e)?BA(e):bE(t,e)}var Os=class{constructor(){this._=void 0}};function DU(t,e,n){return t instanceof Fs?function(i,o){let s={fields:{[CA]:{stringValue:DA},[bA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_E(o)&&(o=vf(o)),o&&(s.fields[TA]=o),{mapValue:s}}(n,e):t instanceof no?HA(t,e):t instanceof ro?zA(t,e):function(i,o){let s=$A(i,o),c=MS(s)+MS(i.Re);return zv(s)&&zv(i.Re)?BA(c):bE(i.serializer,c)}(t,e)}function CU(t,e,n){return t instanceof no?HA(t,e):t instanceof ro?zA(t,e):n}function $A(t,e){return t instanceof Ls?function(r){return zv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Fs=class extends Os{},no=class extends Os{constructor(e){super(),this.elements=e}};function HA(t,e){let n=qA(e);for(let r of t.elements)n.some(i=>Nn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ro=class extends Os{constructor(e){super(),this.elements=e}};function zA(t,e){let n=qA(e);for(let r of t.elements)n=n.filter(i=>!Nn(i,r));return{arrayValue:{values:n}}}var Ls=class extends Os{constructor(e,n){super(),this.serializer=e,this.Re=n}};function MS(t){return Ae(t.integerValue||t.doubleValue)}function qA(t){return wE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function TU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof no&&i instanceof no||r instanceof ro&&i instanceof ro?As(r.elements,i.elements,Nn):r instanceof Ls&&i instanceof Ls?Nn(r.Re,i.Re):r instanceof Fs&&i instanceof Fs}(t.transform,e.transform)}var n_=class{constructor(e,n){this.version=e,this.transformResults=n}},rr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Vs=class{};function GA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xc(t.key,rr.none()):new io(t.key,t.data,rr.none());{let n=t.data,r=Vt.empty(),i=new Ke(jt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pn(t.key,r,new Jt(i.toArray()),rr.none())}}function bU(t,e,n){t instanceof io?function(i,o,s){let c=i.value.clone(),u=xS(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Pn?function(i,o,s){if(!kh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=xS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(WA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Kc(t,e,n,r){return t instanceof io?function(o,s,c,u){if(!kh(o.precondition,s))return c;let l=o.value.clone(),h=kS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pn?function(o,s,c,u){if(!kh(o.precondition,s))return c;let l=kS(o.fieldTransforms,u,s),h=s.data;return h.setAll(WA(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,c){return kh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function SU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=$A(r.transform,i||null);o!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,o))}return n||null}function PS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(o,s)=>TU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var io=class extends Vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pn=class extends Vs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function WA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xS(t,e,n){let r=new Map;ve(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,CU(s,c,n[i]))}return r}function kS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,DU(o,s,e))}return r}var Xc=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},r_=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var i_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&bU(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Kc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=UA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=GA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>PS(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>PS(n,r))}},o_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return vU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var s_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var a_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,pe;function AU(t){switch(t){case x.OK:return $(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return $(15467,{code:t})}}function KA(t){if(t===void 0)return ir("GRPC error has no .code"),x.UNKNOWN;switch(t){case Le.OK:return x.OK;case Le.CANCELLED:return x.CANCELLED;case Le.UNKNOWN:return x.UNKNOWN;case Le.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Le.INTERNAL:return x.INTERNAL;case Le.UNAVAILABLE:return x.UNAVAILABLE;case Le.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Le.NOT_FOUND:return x.NOT_FOUND;case Le.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Le.ABORTED:return x.ABORTED;case Le.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Le.DATA_LOSS:return x.DATA_LOSS;default:return $(39323,{code:t})}}(pe=Le||(Le={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var OS=null;var RU=new er([4294967295,4294967295],0);function FS(t){let e=aA().encode(t),n=new Dv;return n.update(e),new Uint8Array(n.digest())}function LS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new er([n,r],0),new er([i,o],0)]}var c_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ji(`Invalid padding: ${n}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=er.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(er.fromNumber(r)));return i.compare(RU)===1&&(i=new er([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=FS(e),[r,i]=LS(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.pe===0)return;let n=FS(e),[r,i]=LS(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ji=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new xe(se),cr(),de())}},eu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var Ts=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},qh=class{constructor(e,n){this.targetId=e,this.Ce=n}},Gh=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Wh=class{constructor(){this.Fe=0,this.Me=VS(),this.xe=ft.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=de(),n=de(),r=de();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$(38017,{changeType:o})}}),new eu(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=VS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ve(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},u_=class{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=Nh(),this.Ye=Nh(),this.Ze=new xe(se)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(e_(o))if(r===0){let s=new H(o.path);this.tt(n,s,dn.newNoDocument(s,X.min()))}else ve(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let c=this.ct(e),u=c?this.lt(c,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}OS?.ht(function(h,p,m,y,S){var N,R,F,G,K,Ee;let pt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},_e=p.unchangedNames;return _e&&(pt.bloomFilter={applied:S===0,hashCount:(N=_e?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(G=(F=(R=_e?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&G!==void 0?G:0,padding:(Ee=(K=_e?.bits)===null||K===void 0?void 0:K.padding)!==null&&Ee!==void 0?Ee:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),pt}(s,e.Ce,this.ze.Pt(),c,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=sr(r).toUint8Array()}catch(u){if(u instanceof Uh)return Ss("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new c_(s,i,o)}catch(u){return Ss(u instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let c=this._t(s);if(c){if(o.current&&e_(c.target)){let u=new H(c.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,dn.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=de();this.Ye.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new zh(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=Nh(),this.Ye=Nh(),this.Ze=new xe(se),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Wh,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ke(se),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ke(se),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Wh),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function Nh(){return new xe(H.comparator)}function VS(){return new xe(H.comparator)}var NU={asc:"ASCENDING",desc:"DESCENDING"},MU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PU={and:"AND",or:"OR"},l_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function d_(t,e){return t.useProto3Json||yf(e)?e:{value:e}}function Kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xU(t,e){return Kh(t,e.toTimestamp())}function Rn(t){return ve(!!t,49232),X.fromTimestamp(function(n){let r=or(n);return new rt(r.seconds,r.nanos)}(t))}function SE(t,e){return h_(t,e).canonicalString()}function h_(t,e){let n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YA(t){let e=Pe.fromString(t);return ve(tR(e),10190,{key:e.toString()}),e}function f_(t,e){return SE(t.databaseId,e.path)}function Rv(t,e){let n=YA(e);if(n.get(1)!==t.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(JA(n))}function ZA(t,e){return SE(t.databaseId,e)}function kU(t){let e=YA(t);return e.length===4?Pe.emptyPath():JA(e)}function p_(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JA(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jS(t,e,n){return{name:f_(t,e),fields:n.value.mapValue.fields}}function OU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:$(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(l){let h=l.code===void 0?x.UNKNOWN:KA(l.code);return new B(h,l.message||"")}(s);n=new Gh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Rv(t,r.document.name),o=Rn(r.document.updateTime),s=r.document.createTime?Rn(r.document.createTime):X.min(),c=new Vt({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ts(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Rv(t,r.document),o=r.readTime?Rn(r.readTime):X.min(),s=dn.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Ts([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Rv(t,r.document),o=r.removedTargetIds||[];n=new Ts([],o,i,null)}else{if(!("filter"in e))return $(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new a_(i,o),c=r.targetId;n=new qh(c,s)}}return n}function FU(t,e){let n;if(e instanceof io)n={update:jS(t,e.key,e.value)};else if(e instanceof Xc)n={delete:f_(t,e.key)};else if(e instanceof Pn)n={update:jS(t,e.key,e.data),updateMask:qU(e.fieldMask)};else{if(!(e instanceof r_))return $(16599,{ft:e.type});n={verify:f_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let c=s.transform;if(c instanceof Fs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof no)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ro)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ls)return{fieldPath:s.field.canonicalString(),increment:c.Re};throw $(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:xU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$(27497)}(t,e.precondition)),n}function LU(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Rn(i.updateTime):Rn(o);return s.isEqual(X.min())&&(s=Rn(o)),new n_(s,i.transformResults||[])}(n,e))):[]}function VU(t,e){return{documents:[ZA(t,e.path)]}}function jU(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZA(t,i);let o=function(l){if(l.length!==0)return eR(Mn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ws(m.field),direction:$U(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=d_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function UU(t){let e=kU(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ve(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=XA(p);return m instanceof Mn&&PA(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(S){return new xs(Ds(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,yf(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Ps(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Ps(y,m)}(n.endAt)),hU(e,i,s,o,c,"F",u,l)}function BU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ds(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ds(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ds(n.unaryFilter.field);return ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ds(n.unaryFilter.field);return ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(t):t.fieldFilter!==void 0?function(n){return ze.create(Ds(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>XA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(t):$(30097,{filter:t})}function $U(t){return NU[t]}function HU(t){return MU[t]}function zU(t){return PU[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Ds(t){return jt.fromServerFormat(t.fieldPath)}function eR(t){return t instanceof ze?function(n){if(n.op==="=="){if(bS(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(TS(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bS(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(TS(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:HU(n.op),value:n.value}}}(t):t instanceof Mn?function(n){let r=n.getFilters().map(i=>eR(i));return r.length===1?r[0]:{compositeFilter:{op:zU(n.op),filters:r}}}(t):$(54877,{filter:t})}function qU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var tu=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),c=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var g_=class{constructor(e){this.wt=e}};function GU(t){let e=UU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?t_(e,e.limit,"L"):e}var Qh=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),Yc(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=or(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(sr(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?RA(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):AA(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):$(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=Rs,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Ae(c)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),H.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};Qh.Wt=new Qh;var m_=class{constructor(){this.Cn=new y_}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(to.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(to.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},y_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Pe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Pe.comparator)).toArray()}};var zte=new Uint8Array(0);var US={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nR=41943040,Zt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(nR,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var nu=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var BS="LruGarbageCollector",WU=1048576;function $S([t,e],[n,r]){let i=se(t,n);return i===0?se(e,r):i}var v_=class{constructor(e){this.Er=e,this.buffer=new Ke($S),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();$S(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},__=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){L(BS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?L(BS,"Ignoring IndexedDB error during garbage collection: ",n):yield Hs(n)}yield this.mr(3e5)}))}},E_=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(yE.le);let r=new v_(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(US)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),US):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Es()<=ue.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function KU(t,e){return new E_(t,e)}var I_=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var w_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var D_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Kc(r.mutation,i,Jt.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=Zi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=zc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=cr(),s=Wc(),c=function(){return Wc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Kc(h.mutation,l,h.mutation.getFieldMask(),rt.now())):s.set(l.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new w_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Wc(),i=new xe((s,c)=>s-c),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Jt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||de()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=UA();h.forEach(m=>{if(!o.has(m)){let y=GA(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(Zi()),c=Qc,u=o;return s.next(l=>M.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:c,changes:jA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=zc();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=function(p,m){return new ks(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,dn.newInvalidDocument(h)))});let c=zc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Kc(h.mutation,l,Jt.empty(),rt.now()),Ef(n,l)&&(c=c.insert(u,l))}),c})}};var C_=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return M.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:GU(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),M.resolve()}};var T_=class{constructor(){this.overlays=new xe(H.comparator),this.Qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Zi();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=Zi(),o=n.length+1,s=new H(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Zi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Zi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return M.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new s_(n,r));let o=this.Qr.get(n);o===void 0&&(o=de(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var b_=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var ru=class{constructor(){this.$r=new Ke(Ve.Ur),this.Kr=new Ke(Ve.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ve(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new H(new Pe([])),r=new Ve(n,e),i=new Ve(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new H(new Pe([])),r=new Ve(n,e),i=new Ve(n,e+1),o=de();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ve(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return H.comparator(e.key,n.key)||se(e.Zr,n.Zr)}static Wr(e,n){return se(e.Zr,n.Zr)||H.comparator(e.key,n.key)}};var S_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ke(Ve.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new i_(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Xr=this.Xr.add(new Ve(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?vE:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let c=this.ei(s.Zr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(se);return n.forEach(i=>{let o=new Ve(i,0),s=new Ve(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],c=>{r=r.add(c.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Ve(new H(o),0),c=new Ke(se);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Zr)),!0)},s),M.resolve(this.ni(c))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(n.mutations,i=>{let o=new Ve(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new Ve(n,0),i=this.Xr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var A_=class{constructor(e){this.ii=e,this.docs=function(){return new xe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dn.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr(),s=n.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Wj(Gj(h),r)<=0||(i.has(h.key)||Ef(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){$(9500)}si(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R_(this)}getSize(e){return M.resolve(this.size)}},R_=class extends I_{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var N_=class{constructor(e){this.persistence=e,this.oi=new ar(n=>DE(n),CE),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this._i=0,this.ai=new ru,this.targetCount=0,this.ui=nu.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),M.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new nu(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Tr(n),M.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.ai.containsKey(n))}};var Yh=class{constructor(e,n){this.ci={},this.overlays={},this.li=new yE(0),this.hi=!1,this.hi=!0,this.Pi=new b_,this.referenceDelegate=e(this),this.Ti=new N_(this),this.indexManager=new m_,this.remoteDocumentCache=function(i){return new A_(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new g_(n),this.Ei=new C_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new T_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new S_(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new M_(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},M_=class extends Bv{constructor(e){super(),this.currentSequenceNumber=e}},P_=class t{constructor(e){this.persistence=e,this.Vi=new ru,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw $(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{let i=H.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return M.or([()=>M.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},Zh=class t{constructor(e,n){this.persistence=e,this.yi=new ar(r=>Zj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=KU(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return M.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(c=>{c||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),M.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ph(e.data.value)),n}Dr(e,n,r){return M.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var x_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=de(),i=de();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var k_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var O_=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return v0()?8:Qj(Lt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.bs(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new k_;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,s,c.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(Es()<=ue.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(Es()<=ue.DEBUG&&L("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(Es()<=ue.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):M.resolve())}ws(e,n){if(NS(n))return M.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=t_(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.ys.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,c);return this.Cs(n,l,s,u.readTime)?this.ws(e,t_(n,null,"F")):this.Fs(e,l,n,u)}))})))}bs(e,n,r,i){return NS(n)||i.isEqual(X.min())?M.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?M.resolve(null):(Es()<=ue.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.Fs(e,s,n,qj(i,Qc)).next(c=>c))})}vs(e,n){let r=new Ke(LA(e));return n.forEach((i,o)=>{Ef(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Es()<=ue.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Is(n)),this.ys.getDocumentsMatchingQuery(e,n,to.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var AE="LocalStore",QU=3e8,F_=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new xe(se),this.Os=new ar(o=>DE(o),CE),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D_(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function YU(t,e,n,r){return new F_(t,e,n,r)}function rR(t,e){return b(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=de();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:c}))})})})}function ZU(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(N=>{let R=l.docVersions.get(S);ve(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=de();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iR(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function JU(t,e){let n=Y(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,F){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=QU?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,y,h)&&c.push(n.Ti.updateTargetData(o,y))});let u=cr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(XU(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(X.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function XU(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(AE,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function eB(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tB(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new tu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function L_(t,e,n){return b(this,null,function*(){let r=Y(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!zs(s))throw s;L(AE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function HS(t,e,n){let r=Y(t),i=X.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),m=p.Os.get(h);return m!==void 0?M.resolve(p.xs.get(m)):p.Ti.getTargetData(l,h)}(r,s,An(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:de())).next(c=>(nB(r,gU(e),c),{documents:c,$s:o})))}function nB(t,e,n){let r=t.Ns.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var Jh=class{constructor(){this.activeTargetIds=IU()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var V_=class{constructor(){this.xo=new Jh,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Jh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var j_=class{No(e){}shutdown(){}};var zS="ConnectivityMonitor",Xh=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){L(zS,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){L(zS,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mh=null;function U_(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}var Nv="RestConnection",rB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},B_=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=U_(),c=this.jo(e,n.toUriEncodedString());L(Nv,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(c),h=Bi(l);return this.Jo(e,c,u,r,h).then(p=>(L(Nv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ss(Nv,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$s}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=rB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var $_=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ht="WebChannelConnection",H_=class extends B_{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=U_();return new Promise((c,u)=>{let l=new Cv;l.setWithCredentials(!0),l.listenOnce(Tv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Hc.NO_ERROR:let p=l.getResponseJson();L(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Hc.TIMEOUT:L(ht,`RPC '${e}' ${s} timed out`),u(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:let m=l.getStatus();if(L(ht,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let N=function(F){let G=F.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(G)>=0?G:x.UNKNOWN}(S.status);u(new B(N,S.message))}else u(new B(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new B(x.UNAVAILABLE,"Connection failed."));break;default:$(9055,{h_:e,streamId:s,P_:l.getLastErrorCode(),T_:l.getLastError()})}}finally{L(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}I_(e,n,r){let i=U_(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Av(),c=Sv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.E_(p);let m=!1,y=!1,S=new $_({Zo:R=>{y?L(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(L(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(ht,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Xo:()=>p.close()}),N=(R,F,G)=>{R.listen(F,K=>{try{G(K)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return N(p,_s.EventType.OPEN,()=>{y||(L(ht,`RPC '${e}' stream ${i} transport opened.`),S.__())}),N(p,_s.EventType.CLOSE,()=>{y||(y=!0,L(ht,`RPC '${e}' stream ${i} transport closed`),S.u_(),this.d_(p))}),N(p,_s.EventType.ERROR,R=>{y||(y=!0,Ss(ht,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.u_(new B(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,_s.EventType.MESSAGE,R=>{var F;if(!y){let G=R.data[0];ve(!!G,16349);let K=G,Ee=K?.error||((F=K[0])===null||F===void 0?void 0:F.error);if(Ee){L(ht,`RPC '${e}' stream ${i} received error:`,Ee);let pt=Ee.status,_e=function(E){let I=Le[E];if(I!==void 0)return KA(I)}(pt),w=Ee.message;_e===void 0&&(_e=x.INTERNAL,w="Unknown error status: "+pt+" with message "+Ee.message),y=!0,S.u_(new B(_e,w)),p.close()}else L(ht,`RPC '${e}' stream ${i} received:`,G),S.c_(G)}}),N(c,bv.STAT_EVENT,R=>{R.stat===Ah.PROXY?L(ht,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ah.NOPROXY&&L(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}};function Mv(){return typeof document<"u"?document:null}function If(t){return new l_(t,!0)}var ef=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=i,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}};var qS="PersistentStream",tf=class{constructor(e,n,r,i,o,s,c,u){this.xi=e,this.S_=r,this.D_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ef(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}stop(){return b(this,null,function*(){this.O_()&&(yield this.close(0))})}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}q_(){return b(this,null,function*(){if(this.N_())return this.close(0)})}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}close(e,n){return b(this,null,function*(){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}W_(){}auth(){this.state=1;let e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.v_===n&&this.z_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(i)})})}z_(e,n){let r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.j_(i))}),this.stream.onMessage(i=>{r(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(()=>b(this,null,function*(){this.state=0,this.start()}))}j_(e){return L(qS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(L(qS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},z_=class extends tf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let n=OU(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?Rn(s.readTime):X.min()}(e);return this.listener.Y_(n,r)}Z_(e){let n={};n.database=p_(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=e_(u)?{documents:VU(o,u)}:{query:jU(o,u).gt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=QA(o,s.resumeToken);let l=d_(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){c.readTime=Kh(o,s.snapshotVersion.toTimestamp());let l=d_(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=BU(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){let n={};n.database=p_(this.serializer),n.removeTarget=e,this.Q_(n)}},q_=class extends tf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let n=LU(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.ra(r,n)}ia(){let e={};e.database=p_(this.serializer),this.Q_(e)}ta(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>FU(this.serializer,r))};this.Q_(n)}};var G_=class{},W_=class extends G_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,h_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Yo(e,h_(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}terminate(){this.sa=!0,this.connection.terminate()}},K_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ir(n),this.ua=!1):L("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}};var oo="RemoteStore",Q_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(s=>{r.enqueueAndForget(()=>b(this,null,function*(){so(this)&&(L(oo,"Restarting streams for network reachability change."),yield function(u){return b(this,null,function*(){let l=Y(u);l.da.add(4),yield cu(l),l.Va.set("Unknown"),l.da.delete(4),yield wf(l)})}(this))}))}),this.Va=new K_(r,i)}};function wf(t){return b(this,null,function*(){if(so(t))for(let e of t.Aa)yield e(!0)})}function cu(t){return b(this,null,function*(){for(let e of t.Aa)yield e(!1)})}function oR(t,e){let n=Y(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),PE(n)?ME(n):qs(n).N_()&&NE(n,e))}function RE(t,e){let n=Y(t),r=qs(n);n.Ea.delete(e),r.N_()&&sR(n,e),n.Ea.size===0&&(r.N_()?r.k_():so(n)&&n.Va.set("Unknown"))}function NE(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).Z_(e)}function sR(t,e){t.ma.Ke(e),qs(t).X_(e)}function ME(t){t.ma=new u_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.Va.ca()}function PE(t){return so(t)&&!qs(t).O_()&&t.Ea.size>0}function so(t){return Y(t).da.size===0}function aR(t){t.ma=void 0}function iB(t){return b(this,null,function*(){t.Va.set("Online")})}function oB(t){return b(this,null,function*(){t.Ea.forEach((e,n)=>{NE(t,e)})})}function sB(t,e){return b(this,null,function*(){aR(t),PE(t)?(t.Va.Pa(e),ME(t)):t.Va.set("Unknown")})}function aB(t,e,n){return b(this,null,function*(){if(t.Va.set("Online"),e instanceof Gh&&e.state===2&&e.cause)try{yield function(i,o){return b(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ea.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ea.delete(c),i.ma.removeTarget(c))})}(t,e)}catch(r){L(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nf(t,r)}else if(e instanceof Ts?t.ma.Xe(e):e instanceof qh?t.ma.ot(e):t.ma.nt(e),!n.isEqual(X.min()))try{let r=yield iR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let c=o.ma.It(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ea.get(l);h&&o.Ea.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ea.get(u);if(!h)return;o.Ea.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),sR(o,u);let p=new tu(h.target,u,l,h.sequenceNumber);NE(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){L(oo,"Failed to raise snapshot:",r),yield nf(t,r)}})}function nf(t,e,n){return b(this,null,function*(){if(!zs(e))throw e;t.da.add(1),yield cu(t),t.Va.set("Offline"),n||(n=()=>iR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){L(oo,"Retrying IndexedDB access"),yield n(),t.da.delete(1),yield wf(t)}))})}function cR(t,e){return e().catch(n=>nf(t,n,e))}function Df(t){return b(this,null,function*(){let e=Y(t),n=Kr(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:vE;for(;cB(e);)try{let i=yield eB(e.localStore,r);if(i===null){e.Ia.length===0&&n.k_();break}r=i.batchId,uB(e,i)}catch(i){yield nf(e,i)}uR(e)&&lR(e)})}function cB(t){return so(t)&&t.Ia.length<10}function uB(t,e){t.Ia.push(e);let n=Kr(t);n.N_()&&n.ea&&n.ta(e.mutations)}function uR(t){return so(t)&&!Kr(t).O_()&&t.Ia.length>0}function lR(t){Kr(t).start()}function lB(t){return b(this,null,function*(){Kr(t).ia()})}function dB(t){return b(this,null,function*(){let e=Kr(t);for(let n of t.Ia)e.ta(n.mutations)})}function hB(t,e,n){return b(this,null,function*(){let r=t.Ia.shift(),i=o_.from(r,e,n);yield cR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Df(t)})}function fB(t,e){return b(this,null,function*(){e&&Kr(t).ea&&(yield function(r,i){return b(this,null,function*(){if(function(s){return AU(s)&&s!==x.ABORTED}(i.code)){let o=r.Ia.shift();Kr(r).L_(),yield cR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Df(r)}})}(t,e)),uR(t)&&lR(t)})}function GS(t,e){return b(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),L(oo,"RemoteStore received new credentials");let r=so(n);n.da.add(3),yield cu(n),r&&n.Va.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),yield wf(n)})}function pB(t,e){return b(this,null,function*(){let n=Y(t);e?(n.da.delete(2),yield wf(n)):e||(n.da.add(2),yield cu(n),n.Va.set("Unknown"))})}function qs(t){return t.fa||(t.fa=function(n,r,i){let o=Y(n);return o.oa(),new z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:iB.bind(null,t),n_:oB.bind(null,t),i_:sB.bind(null,t),Y_:aB.bind(null,t)}),t.Aa.push(e=>b(null,null,function*(){e?(t.fa.L_(),PE(t)?ME(t):t.Va.set("Unknown")):(yield t.fa.stop(),aR(t))}))),t.fa}function Kr(t){return t.ga||(t.ga=function(n,r,i){let o=Y(n);return o.oa(),new q_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:lB.bind(null,t),i_:fB.bind(null,t),na:dB.bind(null,t),ra:hB.bind(null,t)}),t.Aa.push(e=>b(null,null,function*(){e?(t.ga.L_(),yield Df(t)):(yield t.ga.stop(),t.Ia.length>0&&(L(oo,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))}))),t.ga}var Y_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xE(t,e){if(ir("AsyncQueue",`${e}: ${t}`),zs(t))return new B(x.UNAVAILABLE,`${e}: ${t}`);throw t}var rf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=zc(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var of=class{constructor(){this.pa=new xe(H.comparator)}track(e){let n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):$(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){let e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}},js=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,rf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Z_=class{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}},J_=class{constructor(){this.queries=WS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=WS(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function WS(){return new ar(t=>FA(t),_f)}function gB(t,e){return b(this,null,function*(){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Da()&&e.va()&&(r=2):(o=new Z_,r=e.va()?0:1);try{switch(r){case 0:o.ba=yield n.onListen(i,!0);break;case 1:o.ba=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let c=xE(s,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&kE(n)})}function mB(t,e){return b(this,null,function*(){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.va()?0:1:!o.Da()&&e.va()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function yB(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Ma(i)&&(r=!0);s.ba=i}}r&&kE(n)}function vB(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function kE(t){t.Ca.forEach(e=>{e.next()})}var X_,KS;(KS=X_||(X_={})).xa="default",KS.Cache="cache";var eE=class{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;let r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;let n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==X_.Cache}};var sf=class{constructor(e){this.key=e}},af=class{constructor(e){this.key=e}},tE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=de(),this.mutatedKeys=de(),this.Za=LA(e),this.Xa=new rf(this.Za)}get eu(){return this.Ha}tu(e,n){let r=n?n.nu:new of,i=n?n.Xa:this.Xa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Ef(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==N&&(r.track({type:3,doc:y}),R=!0):this.ru(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Za(y,u)>0||l&&this.Za(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Xa:s,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((h,p)=>function(y,S){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Vt:R})}};return N(y)-N(S)}(h.type,p.type)||this.Za(h.doc,p.doc)),this.iu(r),i=i!=null&&i;let c=n&&!i?this.su():[],u=this.Ya.size===0&&this.current&&!i?1:0,l=u!==this.Ja;return this.Ja=u,s.length!==0||l?{snapshot:new js(this.query,e.Xa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new of,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=de(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});let n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new af(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new sf(r))}),n}au(e){this.Ha=e.$s,this.Ya=de();let n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return js.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}},OE="SyncEngine",nE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},rE=class{constructor(e){this.key=e,this.cu=!1}},iE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new ar(c=>FA(c),_f),this.Pu=new Map,this.Tu=new Set,this.Iu=new xe(H.comparator),this.Eu=new Map,this.du=new ru,this.Au={},this.Ru=new Map,this.Vu=nu.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}};function _B(t,e,n=!0){return b(this,null,function*(){let r=mR(t),i,o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.uu()):i=yield dR(r,e,n,!0),i})}function EB(t,e){return b(this,null,function*(){let n=mR(t);yield dR(n,e,!0,!1)})}function dR(t,e,n,r){return b(this,null,function*(){let i=yield tB(t.localStore,An(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=yield IB(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&oR(t.remoteStore,i),c})}function IB(t,e,n,r,i){return b(this,null,function*(){t.fu=(p,m,y)=>function(N,R,F,G){return b(this,null,function*(){let K=R.view.tu(F);K.Cs&&(K=yield HS(N.localStore,R.query,!1).then(({documents:w})=>R.view.tu(w,K)));let Ee=G&&G.targetChanges.get(R.targetId),pt=G&&G.targetMismatches.get(R.targetId)!=null,_e=R.view.applyChanges(K,N.isPrimaryClient,Ee,pt);return YS(N,R.targetId,_e.ou),_e.snapshot})}(t,p,m,y);let o=yield HS(t.localStore,e,!0),s=new tE(e,o.$s),c=s.tu(o.documents),u=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);YS(t,n,l.ou);let h=new nE(e,n,s);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),l.snapshot})}function wB(t,e,n){return b(this,null,function*(){let r=Y(t),i=r.hu.get(e),o=r.Pu.get(i.targetId);if(o.length>1)return r.Pu.set(i.targetId,o.filter(s=>!_f(s,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield L_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&RE(r.remoteStore,i.targetId),oE(r,i.targetId)}).catch(Hs))):(oE(r,i.targetId),yield L_(r.localStore,i.targetId,!0))})}function DB(t,e){return b(this,null,function*(){let n=Y(t),r=n.hu.get(e),i=n.Pu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),RE(n.remoteStore,r.targetId))})}function CB(t,e,n){return b(this,null,function*(){let r=MB(t);try{let i=yield function(s,c){let u=Y(s),l=rt.now(),h=c.reduce((y,S)=>y.add(S.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=cr(),N=de();return u.Bs.getEntries(y,h).next(R=>{S=R,S.forEach((F,G)=>{G.isValidDocument()||(N=N.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let F=[];for(let G of c){let K=SU(G,p.get(G.key).overlayedDocument);K!=null&&F.push(new Pn(G.key,K,NA(K.value.mapValue),rr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,F,c)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:jA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,u){let l=s.Au[s.currentUser.toKey()];l||(l=new xe(se)),l=l.insert(c,u),s.Au[s.currentUser.toKey()]=l}(r,i.batchId,n),yield uu(r,i.changes),yield Df(r.remoteStore)}catch(i){let o=xE(i,"Failed to persist write");n.reject(o)}})}function hR(t,e){return b(this,null,function*(){let n=Y(t);try{let r=yield JU(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.cu=!0:i.modifiedDocuments.size>0?ve(s.cu,14607):i.removedDocuments.size>0&&(ve(s.cu,42227),s.cu=!1))}),yield uu(n,r,e)}catch(r){yield Hs(r)}})}function QS(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.hu.forEach((o,s)=>{let c=s.view.Fa(e);c.snapshot&&i.push(c.snapshot)}),function(s,c){let u=Y(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.Fa(c)&&(l=!0)}),l&&kE(u)}(r.eventManager,e),i.length&&r.lu.Y_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TB(t,e,n){return b(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new xe(H.comparator);s=s.insert(o,dn.newNoDocument(o,X.min()));let c=de().add(o),u=new zh(X.min(),new Map,new xe(se),s,c);yield hR(r,u),r.Iu=r.Iu.remove(o),r.Eu.delete(e),FE(r)}else yield L_(r.localStore,e,!1).then(()=>oE(r,e,n)).catch(Hs)})}function bB(t,e){return b(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield ZU(n.localStore,e);pR(n,r,null),fR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield uu(n,i)}catch(i){yield Hs(i)}})}function SB(t,e,n){return b(this,null,function*(){let r=Y(t);try{let i=yield function(s,c){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ve(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);pR(r,e,n),fR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield uu(r,i)}catch(i){yield Hs(i)}})}function fR(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function pR(t,e,n){let r=Y(t),i=r.Au[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Au[r.currentUser.toKey()]=i}}function oE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||gR(t,r)})}function gR(t,e){t.Tu.delete(e.path.canonicalString());let n=t.Iu.get(e);n!==null&&(RE(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),FE(t))}function YS(t,e,n){for(let r of n)r instanceof sf?(t.du.addReference(r.key,e),AB(t,r)):r instanceof af?(L(OE,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||gR(t,r.key)):$(19791,{pu:r})}function AB(t,e){let n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(L(OE,"New document in limbo: "+n),t.Tu.add(r),FE(t))}function FE(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){let e=t.Tu.values().next().value;t.Tu.delete(e);let n=new H(Pe.fromString(e)),r=t.Vu.next();t.Eu.set(r,new rE(n)),t.Iu=t.Iu.insert(n,r),oR(t.remoteStore,new tu(An(TE(n.path)),r,"TargetPurposeLimboResolution",yE.le))}}function uu(t,e,n){return b(this,null,function*(){let r=Y(t),i=[],o=[],s=[];r.hu.isEmpty()||(r.hu.forEach((c,u)=>{s.push(r.fu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=x_.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.lu.Y_(i),yield function(u,l){return b(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.ds,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.As,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!zs(p))throw p;L(AE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.xs.get(m),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);h.xs=h.xs.insert(m,N)}}})}(r.localStore,o))})}function RB(t,e){return b(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){L(OE,"User change. New user:",e.toKey());let r=yield rR(n.localStore,e);n.currentUser=e,function(o,s){o.Ru.forEach(c=>{c.forEach(u=>{u.reject(new B(x.CANCELLED,s))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield uu(n,r.ks)}})}function NB(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.cu)return de().add(r.key);{let i=de(),o=n.Pu.get(e);if(!o)return i;for(let s of o){let c=n.hu.get(s);i=i.unionWith(c.view.eu)}return i}}function mR(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TB.bind(null,e),e.lu.Y_=yB.bind(null,e.eventManager),e.lu.gu=vB.bind(null,e.eventManager),e}function MB(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SB.bind(null,e),e}var yR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return b(this,null,function*(){this.serializer=If(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Su(n),yield this.persistence.start(),this.localStore=this.Du(n),this.gcScheduler=this.vu(n,this.localStore),this.indexBackfillerScheduler=this.Cu(n,this.localStore)})}vu(n,r){return null}Cu(n,r){return null}Du(n){return YU(this.persistence,new O_,n.initialUser,this.serializer)}Su(n){return new Yh(P_.fi,this.serializer)}bu(n){return new V_}terminate(){return b(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),sE=class extends yR{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){ve(this.persistence.referenceDelegate instanceof Zh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new __(r,e.asyncQueue,n)}Su(e){let n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Yh(r=>Zh.fi(r,n),this.serializer)}};var PB=(()=>{class t{initialize(n,r){return b(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>QS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RB.bind(null,this.syncEngine),yield pB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new J_}()}createDatastore(n){let r=If(n.databaseInfo.databaseId),i=function(s){return new H_(s)}(n.databaseInfo);return function(s,c,u,l){return new W_(s,c,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,c,u){return new Q_(i,o,s,c,u)}(this.localStore,this.datastore,n.asyncQueue,r=>QS(this.syncEngine,r,0),function(){return Xh.C()?new Xh:new j_}())}createSyncEngine(n,r){return function(o,s,c,u,l,h,p){let m=new iE(o,s,c,u,l,h);return p&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var n,r;yield function(o){return b(this,null,function*(){let s=Y(o);L(oo,"RemoteStore shutting down."),s.da.add(5),yield cu(s),s.Ra.shutdown(),s.Va.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var aE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Qr="FirestoreClient",cE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=We.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){L(Qr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(Qr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=xE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pv(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),L(Qr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield rR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ZS(t,e){return b(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield xB(t);L(Qr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GS(e.remoteStore,i)),t._onlineComponents=e})}function xB(t){return b(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L(Qr,"Using user provided OfflineComponentProvider");try{yield Pv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),yield Pv(t,new yR)}}else L(Qr,"Using default OfflineComponentProvider"),yield Pv(t,new sE(void 0));return t._offlineComponents})}function vR(t){return b(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(L(Qr,"Using user provided OnlineComponentProvider"),yield ZS(t,t._uninitializedComponentsProvider._online)):(L(Qr,"Using default OnlineComponentProvider"),yield ZS(t,new PB))),t._onlineComponents})}function kB(t){return vR(t).then(e=>e.syncEngine)}function JS(t){return b(this,null,function*(){let e=yield vR(t),n=e.eventManager;return n.onListen=_B.bind(null,e.syncEngine),n.onUnlisten=wB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DB.bind(null,e.syncEngine),n})}function _R(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var XS=new Map;function ER(t,e,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OB(t,e,n,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function eA(t){if(!H.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tA(t){if(H.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function LE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$(12329,{type:typeof t})}function qr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=LE(t);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var IR="firestore.googleapis.com",nA=!0,cf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IR,this.ssl=nA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:nA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<WU)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_R((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Us=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xv;switch(r.type){case"firstParty":return new Lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=XS.get(n);r&&(L("ComponentProvider","Removing Datastore"),XS.delete(n),r.terminate())}(this),Promise.resolve()}};function wR(t,e,n,r={}){var i;t=qr(t,Us);let o=Bi(e),s=t._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Vy(`https://${u}`),jy("Firestore",!0)),s.host!==IR&&s.host!==u&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!$i(l,c)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=We.MOCK_USER;else{h=f0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new We(m)}t._authCredentials=new kv(new Oh(h,p))}}var uf=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Gr=class t extends uf{constructor(e,n,r){super(e,n,TE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function DR(t,e,...n){if(t=dt(t),ER("collection","path",e),t instanceof Us){let r=Pe.fromString(e,...n);return tA(r),new Gr(t,null,r)}{if(!(t instanceof Ut||t instanceof Gr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return tA(r),new Gr(t.firestore,null,r)}}function VE(t,e,...n){if(t=dt(t),arguments.length===1&&(e=Lh.newId()),ER("doc","path",e),t instanceof Us){let r=Pe.fromString(e,...n);return eA(r),new Ut(t,null,new H(r))}{if(!(t instanceof Ut||t instanceof Gr))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Pe.fromString(e,...n));return eA(r),new Ut(t.firestore,t instanceof Gr?t.converter:null,new H(r))}}var rA="AsyncQueue",lf=class{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ef(this,"async_queue_retry"),this.rc=()=>{let r=Mv();r&&L(rA,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;let n=Mv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let n=Mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let n=new nr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}ac(){return b(this,null,function*(){if(this.Ju.length!==0){try{yield this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!zs(e))throw e;L(rA,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}})}_c(e){let n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ir("INTERNAL UNHANDLED ERROR: ",iA(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);let i=Y_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(i),i}oc(){this.Xu&&$(47125,{cc:iA(this.Xu)})}verifyOperationInProgress(){}lc(){return b(this,null,function*(){let e;do e=this.sc,yield e;while(e!==this.sc)})}hc(e){for(let n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let n=this.Zu.indexOf(e);this.Zu.splice(n,1)}};function iA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function oA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Yr=class extends Us{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lf(e),this._firestoreClient=void 0,yield e}})}};function CR(t,e){let n=typeof t=="object"?t:ms(),r=typeof t=="string"?t:e||Bh,i=uh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=d0("firestore");o&&wR(i,...o)}return i}function TR(t){if(t._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FB(t),t._firestoreClient}function FB(t){var e,n,r;let i=t._freezeSettings(),o=function(c,u,l,h){return new $v(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,_R(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new cE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(t._componentsProvider))}var iu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Bs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ou=class{constructor(e){this._methodName=e}};var su=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}};var au=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var LB=/^__.*__$/,uE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,n,this.fieldTransforms):new io(e,this.data,n,this.fieldTransforms)}},df=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function bR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ic:t})}}var lE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Vc(e),i}mc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.dc({path:r,Rc:!1});return i.Ec(),i}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ff(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(bR(this.Ic)&&LB.test(e))throw this.gc('Document fields cannot begin and end with "__"')}},dE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||If(e)}bc(e,n,r,i=!1){return new lE({Ic:e,methodName:n,wc:r,path:jt.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function SR(t){let e=t._freezeSettings(),n=If(t._databaseId);return new dE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VB(t,e,n,r,i,o={}){let s=t.bc(o.merge||o.mergeFields?2:0,e,n,i);jE("Data must be an object, but it was:",s,r);let c=AR(r,s),u,l;if(o.merge)u=new Jt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=hE(e,p,n);if(!s.contains(m))throw new B(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NR(h,m)||h.push(m)}u=new Jt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new uE(new Vt(c),u,l)}var hf=class t extends ou{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function jB(t,e,n,r){let i=t.bc(1,e,n);jE("Data must be an object, but it was:",i,r);let o=[],s=Vt.empty();Zr(r,(u,l)=>{let h=UE(e,u,n);l=dt(l);let p=i.mc(h);if(l instanceof hf)o.push(h);else{let m=Cf(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new Jt(o);return new df(s,c,i.fieldTransforms)}function UB(t,e,n,r,i,o){let s=t.bc(1,e,n),c=[hE(e,r,n)],u=[i];if(o.length%2!=0)throw new B(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(hE(e,o[m])),u.push(o[m+1]);let l=[],h=Vt.empty();for(let m=c.length-1;m>=0;--m)if(!NR(l,c[m])){let y=c[m],S=u[m];S=dt(S);let N=s.mc(y);if(S instanceof hf)l.push(y);else{let R=Cf(S,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Jt(l);return new df(h,p,s.fieldTransforms)}function Cf(t,e){if(RR(t=dt(t)))return jE("Unsupported field value:",e,t),AR(t,e);if(t instanceof ou)return function(r,i){if(!bR(i.Ic))throw i.gc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let c of r){let u=Cf(c,i.fc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rt.fromDate(r);return{timestampValue:Kh(i.serializer,o)}}if(r instanceof rt){let o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kh(i.serializer,o)}}if(r instanceof su)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof iu)return{bytesValue:QA(i.serializer,r._byteString)};if(r instanceof Ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.gc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:SE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof au)return function(s,c){return{mapValue:{fields:{[EE]:{stringValue:IE},[Rs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.gc("VectorValues must only contain numeric values.");return bE(c.serializer,l)})}}}}}}(r,i);throw i.gc(`Unsupported field value: ${LE(r)}`)}(t,e)}function AR(t,e){let n={};return wA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zr(t,(r,i)=>{let o=Cf(i,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function RR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof su||t instanceof iu||t instanceof Ut||t instanceof ou||t instanceof au)}function jE(t,e,n){if(!RR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=LE(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function hE(t,e,n){if((e=dt(e))instanceof Bs)return e._internalPath;if(typeof e=="string")return UE(t,e);throw ff("Field path arguments must be of type string or ",t,!1,void 0,n)}var BB=new RegExp("[~\\*/\\[\\]]");function UE(t,e,n){if(e.search(BB)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bs(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ff(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(x.INVALID_ARGUMENT,c+t+u)}function NR(t,e){return t.some(n=>n.isEqual(e))}var pf=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(MR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},fE=class extends pf{data(){return super.data()}};function MR(t,e){return typeof e=="string"?UE(t,e):e instanceof Bs?e._internalPath:e._delegate._internalPath}function $B(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pE=class{convertValue(e,n="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Zr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Rs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new au(o)}convertGeoPoint(e){return new su(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=vf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){let n=or(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Pe.fromString(e);ve(tR(r),9688,{name:e});let i=new $h(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function HB(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Xi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gf=class extends pf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new bs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(MR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},bs=class extends gf{data(e={}){return super.data(e)}},gE=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bs(this._firestore,this._userDataWriter,r.key,r,new Xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new bs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new bs(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Xi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:zB(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function zB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:t})}}var mf=class extends pE{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}};function PR(t,e,n,...r){t=qr(t,Ut);let i=qr(t.firestore,Yr),o=SR(i),s;return s=typeof(e=dt(e))=="string"||e instanceof Bs?UB(o,"updateDoc",t._key,e,n,r):jB(o,"updateDoc",t._key,e),$E(i,[s.toMutation(t._key,rr.exists(!0))])}function xR(t){return $E(qr(t.firestore,Yr),[new Xc(t._key,rr.none())])}function kR(t,e){let n=qr(t.firestore,Yr),r=VE(t),i=HB(t.converter,e);return $E(n,[VB(SR(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}function BE(t,...e){var n,r,i;t=dt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||oA(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(oA(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Ut)l=qr(t.firestore,Yr),h=TE(t._key.path),u={next:p=>{e[s]&&e[s](qB(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=qr(t,uf);l=qr(p.firestore,Yr),h=p._query;let m=new mf(l);u={next:y=>{e[s]&&e[s](new gE(l,m,p,y))},error:e[s+1],complete:e[s+2]},$B(t._query)}return function(m,y,S,N){let R=new aE(N),F=new eE(y,R,S);return m.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return gB(yield JS(m),F)})),()=>{R.xu(),m.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return mB(yield JS(m),F)}))}}(TR(l),h,c,u)}function $E(t,e){return function(r,i){let o=new nr;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return CB(yield kB(r),i,o)})),o.promise}(TR(t),e)}function qB(t,e,n){let r=n.docs.get(e._key),i=new mf(t);return new gf(t,i,e._key,r,new Xi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){$s=i})(gs),un(new Et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new Yr(new Ov(r.getProvider("auth-internal")),new Vv(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $h(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ke(gS,mS,e),ke(gS,mS,"esm2017")})();var Tf=function(){return Tf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tf.apply(this,arguments)};var KB={includeMetadataChanges:!1};function OR(t,e){return e===void 0&&(e=KB),new ee(function(n){var r=BE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function FR(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Tf(Tf({},r),(n={},n[e.idField]=t.id,n))}function LR(t){return OR(t,{includeMetadataChanges:!0}).pipe(oe(function(e){return e.docs}))}function VR(t,e){return e===void 0&&(e={}),LR(t).pipe(oe(function(n){return n.map(function(r){return FR(r,e)})}))}var hn=class{constructor(e){return e}},jR="firestore",HE=class{constructor(){return vs(jR)}};var zE=new U("angularfire2.firestore-instances");function QB(t,e){let n=hh(jR,t,e);return n&&new hn(n)}function YB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new hn(r)}}var ZB={provide:HE,deps:[[new _n,zE]]},JB={provide:hn,useFactory:QB,deps:[[new _n,zE],Wi]};function UR(t,...e){return ke("angularfire",qi.full,"fst"),Tr([JB,ZB,{provide:zE,useFactory:YB(t),multi:!0,deps:[Te,Xe,Gi,Fc,[new _n,bh],[new _n,ph],...e]}])}var Gs=Yt(VR,!0);var Ws=Yt(kR,!0,2);var ur=Yt(DR,!0,2);var Ks=Yt(xR,!0,2);var ao=Yt(VE,!0,2);var BR=Yt(CR,!0);var $R=Yt(PR,!0,2);var bf=class t{constructor(e){this.firestore=e}getNotes(){let e=ur(this.firestore,"notes");return Gs(e,{idField:"id"})}addNote(e){let n=ur(this.firestore,"notes");return Ws(n,{text:e,createdAt:new Date})}deleteNote(e){let n=ao(this.firestore,"notes",e);return Ks(n)}static \u0275fac=function(n){return new(n||t)(z(hn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function e$(t,e){if(t&1){let n=Ri();q(0,"li")(1,"span",5),te(2),W(),q(3,"small",6),te(4),W(),q(5,"button",3),De("click",function(){let i=Hn(n).$implicit,o=sn();return zn(o.deleteNote(i.id))}),te(6,"\u{1F5D1}\uFE0F"),W()()}if(t&2){let n=e.$implicit,r=sn();lt(2),Ko(n.text),lt(2),En("(",r.formatDate(n.createdAt),")")}}var Sf=class t{constructor(e){this.notesService=e;this.notes$=this.notesService.getNotes()}notes$;newNoteText="";router=P(At);addNote(){this.newNoteText.trim()&&(this.notesService.addNote(this.newNoteText.trim()),this.newNoteText="")}formatDate(e){return e?e.toDate?e.toDate().toDateString():e instanceof Date?e.toDateString():"":""}deleteNote(e){e&&this.notesService.deleteNote(e).catch(console.error)}goToMenu(){this.router.navigate(["menu"],{replaceUrl:!0})}static \u0275fac=function(n){return new(n||t)(fe(bf))};static \u0275cmp=vt({type:t,selectors:[["app-notes"]],decls:11,vars:4,consts:[[1,"menu-button",3,"click"],[1,"input-group"],["type","text","placeholder","Add new note...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[1,"note-text"],[1,"note-date"]],template:function(n,r){n&1&&(q(0,"h1"),te(1," Notes "),q(2,"button",0),De("click",function(){return r.goToMenu()}),te(3,"Menu"),W()(),q(4,"div",1)(5,"input",2),Fr("ngModelChange",function(o){return Ni(r.newNoteText,o)||(r.newNoteText=o),o}),De("keyup.enter",function(){return r.addNote()}),W(),q(6,"button",3),De("click",function(){return r.addNote()}),te(7,"Add"),W()(),q(8,"ul"),xr(9,e$,7,2,"li",4),Mi(10,"async"),W()),n&2&&(lt(5),Or("ngModel",r.newNoteText),lt(4),kr("ngForOf",Pi(10,2,r.notes$)))},dependencies:[jr,Vr,xi,ps,Br,fs,ji],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;padding:1rem;font-family:Roboto Mono,monospace;background-color:#000;color:#0f0;min-height:100vh}h1[_ngcontent-%COMP%]{margin-bottom:1rem;position:relative;font-weight:400;display:flex;justify-content:space-between;align-items:center}h1[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{position:static;background-color:#0f0;border:none;color:#000;font-weight:700;padding:.25rem .75rem;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.9rem;border-radius:4px;transition:background-color .3s}h1[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]:hover{background-color:#0c0}.input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}input[_ngcontent-%COMP%]{flex:1;padding:.5rem;background-color:#111;border:1px solid #0f0;color:#0f0;font-family:Roboto Mono,monospace}button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#0f0;border:none;color:#000;font-weight:700;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0c0}ul[_ngcontent-%COMP%]{list-style:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;gap:1rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .note-text[_ngcontent-%COMP%]{flex:1}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .note-date[_ngcontent-%COMP%]{width:120px;flex-shrink:0;color:#0a0;font-size:.85rem;white-space:nowrap;text-align:right;margin-left:.5rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;padding:.3rem .6rem;font-size:1.1rem;background-color:transparent;border:none;color:#0f0;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#0c0}']})};var Af=class t{constructor(e){this.firestore=e}getCategories(){let e=ur(this.firestore,"categories");return Gs(e,{idField:"id"})}addCategory(e){let n=ur(this.firestore,"categories");return Ws(n,{name:e,createdAt:new Date})}deleteCategory(e){let n=ao(this.firestore,"categories",e);return Ks(n)}static \u0275fac=function(n){return new(n||t)(z(hn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function n$(t,e){if(t&1){let n=Ri();q(0,"li")(1,"span",5),De("click",function(){let i=Hn(n).$implicit,o=sn();return zn(o.openCategory(i.id))}),te(2),W(),q(3,"small",6),te(4),W(),q(5,"button",3),De("click",function(){let i=Hn(n).$implicit,o=sn();return zn(o.deleteCategory(i.id))}),te(6,"\u{1F5D1}\uFE0F"),W()()}if(t&2){let n=e.$implicit,r=sn();lt(2),En(" ",n.name," "),lt(2),En("(",r.formatDate(n.createdAt),")")}}var Rf=class t{constructor(e,n){this.categoryService=e;this.router=n;this.categories$=this.categoryService.getCategories()}categories$;newCategoryName="";addCategory(){let e=this.newCategoryName.trim();e&&(this.categoryService.addCategory(e),this.newCategoryName="")}deleteCategory(e){!e||!confirm("Really delete this category?")||this.categoryService.deleteCategory(e)}openCategory(e){this.router.navigate(["categories",e,"items"])}formatDate(e){return e?e.toDate?e.toDate().toDateString():e instanceof Date?e.toDateString():"":""}goToMenu(){this.router.navigate(["menu"],{replaceUrl:!0})}static \u0275fac=function(n){return new(n||t)(fe(Af),fe(At))};static \u0275cmp=vt({type:t,selectors:[["app-categories-page"]],decls:11,vars:4,consts:[[1,"menu-button",3,"click"],[1,"input-group"],["type","text","placeholder","Add new category...",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],[4,"ngFor","ngForOf"],[1,"cat-name",3,"click"],[1,"cat-date"]],template:function(n,r){n&1&&(q(0,"h1"),te(1," Categories "),q(2,"button",0),De("click",function(){return r.goToMenu()}),te(3,"Menu"),W()(),q(4,"div",1)(5,"input",2),Fr("ngModelChange",function(o){return Ni(r.newCategoryName,o)||(r.newCategoryName=o),o}),De("keyup.enter",function(){return r.addCategory()}),W(),q(6,"button",3),De("click",function(){return r.addCategory()}),te(7,"Add"),W()(),q(8,"ul"),xr(9,n$,7,2,"li",4),Mi(10,"async"),W()),n&2&&(lt(5),Or("ngModel",r.newCategoryName),lt(4),kr("ngForOf",Pi(10,2,r.categories$)))},dependencies:[jr,Vr,xi,ps,Br,fs,ji],styles:["[_nghost-%COMP%]{display:block;padding:1rem;font-family:Roboto Mono,monospace;background-color:#000;color:#0f0;min-height:100vh}h1[_ngcontent-%COMP%]{margin-bottom:1rem;position:relative;font-weight:400;display:flex;justify-content:space-between;align-items:center}h1[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{position:static;background-color:#0f0;border:none;color:#000;font-weight:700;padding:.25rem .75rem;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.9rem;border-radius:4px;transition:background-color .3s}h1[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]:hover{background-color:#0c0}.input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}input[_ngcontent-%COMP%]{flex:1;padding:.5rem;background-color:#111;border:1px solid #0f0;color:#0f0}button[_ngcontent-%COMP%]{background-color:#0f0;color:#000;border:none;padding:.5rem 1rem;cursor:pointer;font-family:Roboto Mono,monospace;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#0c0}ul[_ngcontent-%COMP%]{list-style:none;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{flex:1;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]:hover{text-decoration:underline}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .cat-date[_ngcontent-%COMP%]{width:120px;flex-shrink:0;color:#0a0;font-size:.85rem;white-space:nowrap;text-align:right;margin:0 1rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:0;background:transparent;color:#0f0;border:none;font-size:1.1rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#c00}"]})};var Nf=class t{constructor(e){this.firestore=e}getItems(e){let n=ur(this.firestore,`categories/${e}/items`);return Gs(n,{idField:"id"})}addItem(e,n){let r=ur(this.firestore,`categories/${e}/items`);return Ws(r,{content:n,createdAt:new Date}).then(()=>{})}deleteItem(e,n){let r=ao(this.firestore,`categories/${e}/items/${n}`);return Ks(r)}updateItem(e,n,r){let i=ao(this.firestore,`categories/${e}/items/${n}`);return $R(i,{content:r})}static \u0275fac=function(n){return new(n||t)(z(hn))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function i$(t,e){if(t&1){let n=Ri();q(0,"li")(1,"span",4),te(2),W(),q(3,"small",5),te(4),W(),q(5,"button",0),De("click",function(){let i=Hn(n).$implicit,o=sn();return zn(o.deleteItem(i.id))}),te(6,"\u{1F5D1}\uFE0F"),W()()}if(t&2){let n=e.$implicit,r=sn();lt(2),Ko(n.content),lt(2),En("(",r.formatDate(n.createdAt),")")}}var Mf=class t{constructor(e,n,r){this.itemService=e;this.route=n;this.router=r}items$;newItemText="";categoryId;ngOnInit(){this.categoryId=this.route.snapshot.paramMap.get("id"),this.items$=this.itemService.getItems(this.categoryId)}addItem(){let e=this.newItemText.trim();e&&(this.itemService.addItem(this.categoryId,e),this.newItemText="")}deleteItem(e){!e||!confirm("Really delete this item?")||this.itemService.deleteItem(this.categoryId,e)}back(){this.router.navigate(["/categories"])}formatDate(e){return e?e.toDate?e.toDate().toDateString():e instanceof Date?e.toDateString():"":""}static \u0275fac=function(n){return new(n||t)(fe(Nf),fe(Cn),fe(At))};static \u0275cmp=vt({type:t,selectors:[["app-category-items-page"]],decls:11,vars:4,consts:[[3,"click"],[1,"input-group"],["type","text","placeholder","Add new item...",3,"ngModelChange","keyup.enter","ngModel"],[4,"ngFor","ngForOf"],[1,"item-text"],[1,"item-date"]],template:function(n,r){n&1&&(q(0,"h1"),te(1," Items "),q(2,"button",0),De("click",function(){return r.back()}),te(3,"\u2190 Back"),W()(),q(4,"div",1)(5,"input",2),Fr("ngModelChange",function(o){return Ni(r.newItemText,o)||(r.newItemText=o),o}),De("keyup.enter",function(){return r.addItem()}),W(),q(6,"button",0),De("click",function(){return r.addItem()}),te(7,"Add"),W()(),q(8,"ul"),xr(9,i$,7,2,"li",3),Mi(10,"async"),W()),n&2&&(lt(5),Or("ngModel",r.newItemText),lt(4),kr("ngForOf",Pi(10,2,r.items$)))},dependencies:[jr,Vr,xi,ps,Br,fs,ji],styles:["[_nghost-%COMP%]{display:block;padding:1rem;font-family:Roboto Mono,monospace;background-color:#000;color:#0f0;min-height:100vh}h1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}h1[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:transparent;border:1px solid #0a0;color:#0a0;padding:.25rem .75rem;cursor:pointer}h1[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background-color:#0a0;color:#000}.input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}input[_ngcontent-%COMP%]{flex:1;padding:.5rem;background-color:#111;border:1px solid #0f0;color:#0f0}button[_ngcontent-%COMP%]{background:#0f0;border:none;color:#000;padding:.5rem 1rem;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0c0}ul[_ngcontent-%COMP%]{list-style:none;padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex:1}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-date[_ngcontent-%COMP%]{width:120px;flex-shrink:0;color:#0a0;font-size:.85rem;white-space:nowrap;text-align:right;margin:0 1rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#0f0;font-size:1.1rem;flex-shrink:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#c00}"]})};var HR=[{path:"",component:Zd},{path:"menu",component:Jd},{path:"notes",component:Sf},{path:"categories",component:Rf},{path:"",redirectTo:"menu",pathMatch:"full"},{path:"categories/:id/items",component:Mf}];var Pf=class t{title="movieList";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=vt({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Wo(0,"router-outlet")},dependencies:[wc],encapsulation:2})};ty(Pf,{providers:[Ty(HR),V0(()=>j0(QI)),UR(()=>BR())]});
